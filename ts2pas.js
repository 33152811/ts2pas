#! /usr/bin/env node
/**
* ts2pas
* https://github.com/CWBudde/TS2Pas
*
* Copyright (c) 2016 Christian-W. Budde
* Licensed under the MIT license.
*/

var TObject={$ClassName:"TObject",$Parent:null,ClassName:function(s){return s.$ClassName},ClassType:function(s){return s},ClassParent:function(s){return s.$Parent},$Init:function(){},Create:function(s){return s},Destroy:function(s){for(var prop in s)if(s.hasOwnProperty(prop))delete s.prop},Destroy$:function(s){return s.ClassType.Destroy(s)},Free:function(s){if(s!==null)s.ClassType.Destroy(s)}}
function StrReplace(s,o,n){return o?s.replace(new RegExp(StrRegExp(o),"g"),n):s}
function StrRegExp(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}
var Exception={$ClassName:"Exception",$Parent:TObject,$Init:function(){var FMessage=""},Create:function(s,Msg){s.FMessage=Msg;return s}}
function stringRepeat(s,n){if(n<1)return'';var r='';while(n>0){if(n&1)r+=s;n>>=1,s+=s};return r};function DupeString(s,n){return stringRepeat(s,n)}
function $W(e){return e.ClassType?e:Exception.Create($New(Exception),e.constructor.name+", "+e.message)}
function $StrSet(s,i,v,z){if(i<1)throw Exception.Create($New(Exception),"Lower bound exceeded! Index "+i.toString()+z);if(i>s.length)throw Exception.Create($New(Exception),"Upper bound exceeded! Index "+i.toString()+z);return s.substring(0,i-1)+v+s.substring(i)}
function $New(c){var i={ClassType:c};c.$Init(i);return i}
function $Is(o,c){if(o===null)return false;return $Inh(o.ClassType,c)};function $Inh(s,c){if(s===null)return false;while((s)&&(s!==c))s=s.$Parent;return(s)?true:false};function $Extend(base,sub,props){function F(){};F.prototype=base.prototype;sub.prototype=new F();sub.prototype.constructor=sub;for(var n in props){if(props.hasOwnProperty(n)){sub.prototype[n]=props[n]}}}
function $AsIntf(o,i){if(o===null)return null;var r=o.ClassType.$Intf[i].map(function(e){return function(){var arg=Array.prototype.slice.call(arguments);arg.splice(0,0,o);return e.apply(o,arg)}});r.O=o;return r};function $As(o,c){if((o===null)||$Is(o,c))return o;throw Exception.Create($New(Exception),"Cannot cast instance of type \""+o.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"")}
function JError(){}
$Extend(Object,JError,{});function Td(gf){if(gf==(gf).split(".")[0])gf+=".d.ts";vU.readFile(gf,function(IL,Jn){var Sc="",Bc=null;Sc=Jn.toString("utf8");Bc=j.createSourceFile(gf,Sc,2,true);kl(Bc)})};function JD(Nd,OR){if(Nd==(Nd).split(".")[0])Nd+=".d.ts";vU.readFile(Nd,function(Sp,Xo){var vt="",T1=null,Du="";if(!Xo)return;vt=Xo.toString("utf8");T1=wY.Qc($New(wY));T1.Name=(Nd).split(".")[0];Du=wY.Vp(T1,vt);vU.writeFile(OR,Du,function(Bj){});T1=null})};function cy(Zt){JD(Zt,(Zt).split(".")[0]+".pas")};function kl(y9){qU(y9)};function qU(En){var R=undefined;switch(En.kind){case 9:console.log(En.text);break;case 69:console.log(En.text);break;case 151:console.log(En.text);break;case 122:console.log("declare");break;case 135:console.log(En.left);break;default:console.log(En.kind)}
j.forEachChild(En,qU);return R};function Copy$kU(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$kU($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$Y7(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$Y7($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$HA(s,d){d.persistent=s.persistent;return d}
function Clone$HA($){return{persistent:$.persistent}}
function Copy$tK(s,d){d.curr=s.curr;d.prev=s.prev;return d}
function Clone$tK($){return{curr:$.curr,prev:$.prev}}
function Copy$ZL(s,d){d.curr=s.curr;d.prev=s.prev;return d}
function Clone$ZL($){return{curr:$.curr,prev:$.prev}}
function Copy$Cp(s,d){d.persistent=s.persistent;d.interval=s.interval;return d}
function Clone$Cp($){return{persistent:$.persistent,interval:$.interval}}
function Copy$Lm(s,d){d.encoding=s.encoding;d.flag=s.flag;return d}
function Clone$Lm($){return{encoding:$.encoding,flag:$.flag}}
function Copy$Sd(s,d){d.encoding=s.encoding;d.flag=s.flag;return d}
function Clone$Sd($){return{encoding:$.encoding,flag:$.flag}}
function Copy$lY(s,d){d.flags=s.flags;d.encoding=s.encoding;d.string_=s.string_;return d}
function Clone$lY($){return{flags:$.flags,encoding:$.encoding,string_:$.string_}}
function Copy$XY(s,d){d.bufferSize=s.bufferSize;d.encoding=s.encoding;d.fd=s.fd;d.mode=s.mode;d.flags=s.flags;return d}
function Clone$XY($){return{bufferSize:$.bufferSize,encoding:$.encoding,fd:$.fd,mode:$.mode,flags:$.flags}}
function Copy$wk(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$wk($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$R7(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$R7($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function r7(){var R=null;R=require("fs");return R};function FL(){var R=null;R=require("stream");return R};function v6(){var R=null;R=require("events");return R};var wY={$ClassName:"TTranslator",$Parent:TObject,$Init:function($){TObject.$Init($);$.NeedsSemicolon=false;$.Name="";$.V4=[];$.Eg=[];$.Qm=[];$.d5=[];$.XN=$.yY=null},Pc:function(S){return S.XN.getTokenText()},N6:function(S){return S.XN.getToken()},UY:function(S,Vf){if(!(S.XN.isIdentifier()||Vf.indexOf(wY.N6(S))>=0))wY.as(S,0)},Hf:function(S,mF){if(!(mF.indexOf(wY.N6(S))>=0))wY.as(S,0)},Ot:function(S,XR){if(wY.N6(S)!=XR)wY.as(S,XR)},F1:function(S){var R="";var YH=0;var YP=null,mZ=0;var fY=null,BK=0;var qc=null,In=0;var zl=null;var da=[],Qd=[],pZ=[];R="unit "+is(S.Name)+";"+"\r\n"+"\r\n";R+="interface"+"\r\n"+"\r\n";pZ=S.Eg;var $t1;for(YH=0,$t1=pZ.length;YH<$t1;YH++){YP=pZ[YH];R=R+fw.nH$(YP)}
Qd=S.d5;var $t2;for(mZ=0,$t2=Qd.length;mZ<$t2;mZ++){fY=Qd[mZ];R=R+fw.nH$(fY)}
if(S.Qm.length>0){var fL=[];R+="type"+"\r\n";fw.IG(fw);fL=S.Qm;var $t3;for(BK=0,$t3=fL.length;BK<$t3;BK++){qc=fL[BK];R=R+fw.nH$(qc)}
fw.Rd(fw)}
da=S.V4;var $t4;for(In=0,$t4=da.length;In<$t4;In++){zl=da[In];R=R+fw.nH$(zl)}
return R},Qc:function(S){S.NeedsSemicolon=false;return S},as:function(S,mz){var iS=null,CU="";iS=j.getLineAndCharacterOfPosition(S.yY,S.XN.getTokenPos());CU=("Unknown token \""+wY.Pc(S).toString()+"\" in this context ("+(iS.line+1).toString()+":"+(iS.character+1).toString()+")");if(mz>0)CU+=("; Expected ("+mz.toString()+")");console.trace("");throw Exception.Create($New(Exception),CU)},ba:function(S){var R=null;wY.UY(S,[]);R=fw.Dk$($New(Wm),$AsIntf(S,"cm"));R.Name=wY.Pc(S);if(wY.aJ(S,54,false))R.Type=wY.jZ(S);if(S.NeedsSemicolon)wY.Hf(S,[23,24].slice());return R},S1:function(S,rI){do{rI.push(wY.ba(S));if(wY.N6(S)==23)break;if(wY.N6(S)!=24)break;if(!wY.ak(S,false))break}while(!(wY.N6(S)==23||(!S.XN.isIdentifier())||(!S.NeedsSemicolon)&&(!S.XN.isIdentifier())))},tR:function(S){var R=null;var I9=0,dm=false;wY.UY(S,[121,110,111,112,113].slice());if(wY.N6(S)==121)return wY.Ic(S);I9=0;switch(wY.N6(S)){case 112:I9=0;wY.u2(S,[113].slice(),true);break;case 111:I9=1;wY.u2(S,[113].slice(),true);break;case 110:I9=2;wY.u2(S,[113].slice(),true);break}
dm=wY.N6(S)==113;if(dm)wY.ak(S,true);R=wY.hq(S);$As(R,z6).IsStatic=dm;$As(R,z6).Visibility=I9;if(S.NeedsSemicolon)wY.Hf(S,[23,16].slice());return R},w7:function(S){var R=null;var PB=[],PB=[121,110,111,112,113,16,23].slice();wY.Ot(S,73);R=fw.Dk$($New(sF),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.VR(S,[83,106,15].slice(),true);if(wY.N6(S)==83){wY.ak(S,true);R.Extends.push(wY.mB(S))}
if(wY.N6(S)==106){wY.ak(S,true);R.Implements.push(wY.AU(S));while(wY.N6(S)==24){wY.ak(S,true);R.Implements.push(wY.AU(S))}}
wY.Ot(S,15);wY.u2(S,PB,false);while(wY.N6(S)!=16){R.Members.push(wY.tR(S));if(wY.N6(S)==23)wY.u2(S,PB,false)}
wY.Ot(S,16);return R},Ic:function(S){var R=null;wY.Ot(S,121);wY.aJ(S,17,true);R=fw.Dk$($New(cJ),$AsIntf(S,"cm"));while(wY.ak(S,false)){R.ParameterList.push(wY.jH(S));wY.Hf(S,[24,18,23].slice());if(wY.N6(S)==18)break}
wY.Hf(S,[18,23].slice());if(wY.N6(S)!=23)wY.aJ(S,23,true);return R},a8:function(S){var R=null;wY.Ot(S,122);R=fw.Dk$($New(ZM),$AsIntf(S,"cm"));wY.VR(S,[102,108,74,87,73,81,125,126].slice(),true);switch(wY.N6(S)){case 102:case 108:case 74:R.Variables.push(wY.cF(S));break;case 87:R.Functions.push(wY.A4(S));break;case 73:R.Classes.push(wY.w7(S));break;case 81:R.Enums.push(wY.Nm(S));break;case 125:R.Modules.push(wY.jS(S));break;case 126:R.Namespaces.push(wY.Xu(S));break}
return R},Nm:function(S){var R=null;R=wY.n8(S);return R},A4:function(S){var R=null;wY.Ot(S,87);R=fw.Dk$($New(UB),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);R.CallSignature=wY.Hp(S);if(S.NeedsSemicolon)wY.Hf(S,[23].slice());return R},jS:function(S){var R=null;var mQ=[],mQ=[82,102,108,74,132,87,73,107,81,125,89,16,23].slice();var b6=false,ww=null;wY.Ot(S,125);R=fw.Dk$($New(zw),$AsIntf(S,"cm"));wY.u2(S,[9].slice(),true);R.IdentifierPath=wY.AU(S);wY.Ot(S,15);wY.VR(S,mQ,true);while(wY.N6(S)!=16){b6=wY.N6(S)==82;if(b6){wY.VR(S,mQ.concat([77,56]),true);if(wY.N6(S)==77){b6=false;wY.ak(S,false);wY.aJ(S,23,false);wY.VR(S,mQ,true)}
if(wY.N6(S)==56){b6=false;wY.ak(S,false);wY.aJ(S,23,false);wY.VR(S,mQ,true)}}
switch(wY.N6(S)){case 102:case 108:R.Variables.push(wY.cF(S));break;case 74:wY.u2(S,[81].slice(),false);if(wY.N6(S)==81){R.Enums.push(wY.Nm(S))}else{ww=fw.Dk$($New(FW),$AsIntf(S,"cm"));ww.IsConst=true;wY.S1(S,ww.AmbientBindingList);R.Variables.push(ww)}
wY.VR(S,mQ,true);break;case 132:R.TypeAliases.push(wY.ek(S));wY.VR(S,mQ,true);break;case 87:R.Functions.push(wY.A4(S));break;case 73:R.Classes.push(wY.PN(S));wY.VR(S,mQ,true);break;case 125:R.Modules.push(wY.jS(S));wY.VR(S,mQ,true);break;case 107:R.Interfaces.push(wY.WI(S));wY.VR(S,mQ,true);break;case 89:wY.z7(S);if(!S.NeedsSemicolon)wY.VR(S,mQ,true);break;case 81:wY.n8(S);wY.VR(S,mQ,true);break}
if(wY.N6(S)==23)wY.VR(S,mQ,true)}
wY.Ot(S,16);return R},Xu:function(S){var R=null;return R},hq:function(S){var R=null;var Qu="";wY.UY(S,[]);Qu=wY.Pc(S);wY.VR(S,[54,17,23].slice(),true);if(wY.N6(S)==17){R=wY.xF(S)}else R=wY.wr(S);R.Name=Qu;if(S.NeedsSemicolon)wY.UY(S,[23,16,24].slice());return R},xF:function(S){var R=null;wY.Ot(S,17);R=fw.Dk$($New(xq),$AsIntf(S,"cm"));R.CallSignature=wY.Yo(S);wY.Hf(S,[18,23].slice());if(wY.N6(S)!=23)wY.aJ(S,23,true);return R},wr:function(S){var R=null;R=fw.Dk$($New(yB),$AsIntf(S,"cm"));if(wY.N6(S)==54)R.Type=wY.cH(S);return R},cF:function(S){var R=null;wY.Hf(S,[102,108,74].slice());R=fw.Dk$($New(FW),$AsIntf(S,"cm"));R.IsConst=wY.N6(S)==74;wY.ak(S,true);wY.S1(S,R.AmbientBindingList);return R},tL:function(S){var R=null;R=fw.Dk$($New(ME),$AsIntf(S,"cm"));R.Type=wY.mw(S);wY.Hf(S,[23,16].slice());return R},Hp:function(S){var R=null;R=fw.Dk$($New(jA),$AsIntf(S,"cm"));wY.VR(S,[17,25].slice(),true);if(wY.N6(S)==25){do{R.TypeParameters.push(wY.wO(S))}while(!(wY.N6(S)!=24));wY.aJ(S,17,true)}
wY.Ot(S,17);wY.u2(S,[112,110,111,22,18].slice(),true);while(wY.N6(S)!=18){R.ParameterList.push(wY.Tg(S));if(wY.N6(S)==24)wY.u2(S,[22].slice(),false)}
wY.Hf(S,[18].slice());wY.VR(S,[54,23].slice(),true);if(wY.N6(S)==54)R.Type=wY.cH(S);return R},Yo:function(S){var R=null;wY.Hf(S,[17,25].slice());R=fw.Dk$($New(jA),$AsIntf(S,"cm"));if(wY.N6(S)==25){R.TypeParameters.push(wY.wO(S));wY.aJ(S,17,true)}
wY.Ot(S,17);wY.u2(S,[112,110,111,22,18].slice(),true);while(wY.N6(S)!=18){R.ParameterList.push(wY.Tg(S));if(wY.N6(S)==24)wY.u2(S,[22].slice(),false)}
wY.Hf(S,[18].slice());wY.VR(S,[54,23].slice(),true);if(wY.N6(S)==54)R.Type=wY.cH(S);return R},PN:function(S){var R=null;var dv=[],dv=[92,9,82,16,23].slice();var xh=0,q2=false,sR=null;wY.Ot(S,73);R=fw.Dk$($New(VS),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.VR(S,[83,106,15].slice(),true);if(wY.N6(S)==83){wY.ak(S,true);R.Extends.push(wY.mB(S))}
if(wY.N6(S)==106){wY.ak(S,true);R.Implements.push(wY.AU(S));while(wY.N6(S)==24){wY.ak(S,true);R.Implements.push(wY.AU(S))}}
wY.Ot(S,15);wY.Ot(S,15);wY.u2(S,dv,false);while(wY.N6(S)!=16){xh=0;switch(wY.N6(S)){case 112:xh=0;wY.u2(S,[92].slice(),true);break;case 111:xh=1;wY.u2(S,[92].slice(),true);break;case 110:xh=2;wY.u2(S,[92].slice(),true);break}
q2=wY.N6(S)==113;if(q2)wY.u2(S,[92,17].slice(),true);sR=wY.DL(S);R.Members.push(sR);if(wY.N6(S)==23)wY.u2(S,dv,false)}
return R},DL:function(S){var R=null;var FB="",m4=false;wY.UY(S,[92,17,9,82].slice());if(wY.N6(S)==17){R=wY.tL(S)}else{FB=wY.Pc(S);wY.VR(S,[25,53,54,17].slice(),true);if(wY.N6(S)==25){R.TypeParameters.push(wY.wO(S));wY.VR(S,[53,54,17].slice(),true)}
m4=wY.N6(S)==53;if(m4)wY.aJ(S,54,true);switch(wY.N6(S)){case 54:R=wY.pQ(S);$As(R,Zn).Nullable=m4;break;case 17:if((FB).toLowerCase()=="constructor"){R=wY.Wg(S)}else R=wY.BO(S);break}
R.Name=FB}
if(S.NeedsSemicolon)wY.Hf(S,[23,24,16].slice());return R},Wg:function(S){var R=null;R=fw.Dk$($New(yE),$AsIntf(S,"cm"));R.Type=wY.mw(S);if(S.NeedsSemicolon)wY.Hf(S,[23,16].slice());return R},BL:function(S){var R=null;wY.Ot(S,92);R=fw.Dk$($New(yE),$AsIntf(S,"cm"));if(wY.ak(S,false)){wY.aJ(S,17,false)}
wY.Ot(S,17);wY.u2(S,[112,110,111,22,18].slice(),true);while(wY.N6(S)!=18){R.ParameterList.push(wY.Tg(S));if(wY.N6(S)==24)wY.u2(S,[22].slice(),false)}
wY.Ot(S,18);wY.aJ(S,54,true);R.Type=wY.jZ(S);return R},Ff:function(S){var R=null;wY.Ot(S,92);R=fw.Dk$($New(j3),$AsIntf(S,"cm"));wY.aJ(S,17,true);while(wY.u2(S,[22].slice(),false)){R.ParameterList.push(wY.jH(S));wY.Hf(S,[24,18,23].slice());if(wY.N6(S)==18)break}
wY.Hf(S,[18,23].slice());if(wY.VR(S,[54,34].slice(),false))R.ResultType=wY.cH(S);return R},cp:function(S){while(wY.VR(S,[82,122,107,125,89,1].slice(),true)){{var $t5=wY.N6(S);if($t5==82){continue}
else if($t5==122){S.V4.push(wY.a8(S))}
else if($t5==107){S.Qm.push(wY.WI(S))}
else if($t5==125){S.d5.push(wY.A3(S))}
else if($t5==89){S.Eg.push(wY.z7(S))}
else if($t5==1){break}}}},n8:function(S){var R=null;wY.Ot(S,81);R=fw.Dk$($New(VZ),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.aJ(S,15,true);wY.ak(S,true);do{R.Items.push(wY.Tc(S))}while(!(!wY.ak(S,false)));wY.Ot(S,16);return R},Tc:function(S){var R=null;wY.UY(S,[]);R=fw.Dk$($New(iT),$AsIntf(S,"cm"));R.Name=wY.Pc(S);if(wY.aJ(S,56,false)){wY.aJ(S,8,true);R.Value=wY.Pc(S);wY.yC(S)}
wY.Ot(S,24);return R},am:function(S){var R=null;wY.Ot(S,82);R=fw.Dk$($New(y8),$AsIntf(S,"cm"));wY.u2(S,[77].slice(),true);R.ou=wY.N6(S)==82||(wY.Pc(S)).toLowerCase()=="default";if(R.ou)wY.ak(S,true);R.Name=wY.Pc(S);wY.aJ(S,23,true);return R},pQ:function(S){var R=null;R=fw.Dk$($New(Zn),$AsIntf(S,"cm"));R.Type=wY.cH(S);if(S.NeedsSemicolon)wY.UY(S,[23,16,24].slice());return R},YI:function(S){var R=null;wY.Ot(S,87);R=fw.Dk$($New(Z2),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.aJ(S,17,true);R.Type=wY.mw(S);return R},jH:function(S){var R=null;var Lh=false;wY.UY(S,[22].slice());Lh=wY.N6(S)==22;if(Lh)wY.ak(S,true);R=fw.Dk$($New(ri),$AsIntf(S,"cm"));R.Name=wY.Pc(S);wY.VR(S,[53,54,18].slice(),true);R.IsOptional=wY.N6(S)==53;if(R.IsOptional)wY.VR(S,[54].slice(),true);if(wY.N6(S)==54)R.Type=wY.cH(S);return R},mw:function(S){var R=null;wY.Ot(S,17);R=fw.Dk$($New(nR),$AsIntf(S,"cm"));while(wY.u2(S,[22].slice(),false)){R.ParameterList.push(wY.jH(S));wY.Hf(S,[24,18,23].slice());if(wY.N6(S)==18)break}
wY.Hf(S,[18,23].slice());if(wY.VR(S,[54,34].slice(),false))R.ResultType=wY.cH(S);return R},u2:function(S,F8,Ex){var R=false;wY.yC(S);R=S.XN.isIdentifier()||F8.indexOf(wY.N6(S))>=0;if((!R)&&Ex)wY.as(S,0);return R},ak:function(S,wf){var R=false;wY.yC(S);R=S.XN.isIdentifier();if((!R)&&wf)wY.as(S,69);return R},AU:function(S){var R="";wY.UY(S,[9].slice());R=wY.Pc(S);while(wY.aJ(S,21,false)){wY.ak(S,true);R+="."+wY.Pc(S)}
return R},z7:function(S){var R=null;wY.Ot(S,89);R=fw.Dk$($New(Ji),$AsIntf(S,"cm"));wY.u2(S,[37,9].slice(),true);switch(wY.N6(S)){case 37:R.Name="*";wY.aJ(S,116,true);wY.ak(S,true);wY.aJ(S,133,true);wY.aJ(S,9,true);break;case 9:R.Name=S.XN.getTokenValue();break;default:R.Name=wY.Pc(S);wY.aJ(S,56,true);wY.ak(S,true)}
wY.aJ(S,23,true);return R},WQ:function(S){var R=null;wY.Ot(S,19);R=fw.Dk$($New(Io),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.aJ(S,54,true);wY.VR(S,[130,128].slice(),true);R.IsStringIndex=wY.N6(S)==130;wY.aJ(S,20,true);wY.aJ(S,54,true);R.Type=wY.jZ(S);return R},WI:function(S){var R=null;wY.Ot(S,107);R=fw.Dk$($New(Ps),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.VR(S,[25,83,15].slice(),true);if(wY.N6(S)==25){do{R.TypeParameters.push(wY.wO(S))}while(!(wY.N6(S)!=24));wY.VR(S,[83,15].slice(),true)}
if(wY.N6(S)==83){wY.ak(S,true);R.Extends.push(wY.mB(S));while(wY.N6(S)==24){wY.ak(S,true);R.Extends.push(wY.mB(S))}}
wY.Ot(S,15);R.Type=wY.Ul(S);wY.Ot(S,16);return R},BO:function(S){var R=null;R=fw.Dk$($New(aR),$AsIntf(S,"cm"));R.Type=wY.mw(S);if(S.NeedsSemicolon)wY.Hf(S,[23,16].slice());return R},A3:function(S){var R=null;var Za=[],Za=[73,82,81,89,125,87,107,102,23,16].slice();wY.Ot(S,125);R=fw.Dk$($New(fj),$AsIntf(S,"cm"));wY.u2(S,[9].slice(),true);R.Name=wY.AU(S);wY.Ot(S,15);wY.VR(S,Za,true);while(wY.N6(S)!=16){switch(wY.N6(S)){case 73:R.Classes.push(wY.PN(S));break;case 82:R.Exports.push(wY.am(S));break;case 81:wY.n8(S);break;case 87:R.Functions.push(wY.YI(S));break;case 89:wY.z7(S);break;case 125:R.Modules.push(wY.A3(S));break;case 107:R.Interfaces.push(wY.WI(S));break;case 102:R.Variables.push(wY.Vw(S));break}
wY.VR(S,Za,true)}
wY.Ot(S,16);return R},Ul:function(S){var R=null;var ph=[],ph=[9,8,92,17,78,19,16].slice();wY.Ot(S,15);R=fw.Dk$($New(mt),$AsIntf(S,"cm"));wY.u2(S,ph,true);while(wY.N6(S)!=16){R.Members.push(wY.MI(S));if(([23,24].indexOf(wY.N6(S))>=0))wY.u2(S,ph,true)}
wY.Ot(S,16);return R},Tg:function(S){var R=null;wY.UY(S,[112,110,111,22].slice());R=fw.Dk$($New(VU),$AsIntf(S,"cm"));R.Name=wY.Pc(S);R.IsRest=wY.N6(S)==22;if(R.IsRest){wY.ak(S,true);R.Name=wY.Pc(S);if(wY.aJ(S,54,false))R.Type=wY.jZ(S);wY.Ot(S,18);return R}
wY.UY(S,[112,110,111].slice());switch(wY.N6(S)){case 112:R.AccessibilityModifier=0;wY.ak(S,false);break;case 110:R.AccessibilityModifier=1;wY.ak(S,false);break;case 111:R.AccessibilityModifier=2;wY.ak(S,false);break}
wY.UY(S,[]);wY.VR(S,[53,54,56,24,18].slice(),true);R.IsOptional=wY.N6(S)==53;if(R.IsOptional)wY.VR(S,[54,56,24,18].slice(),true);if(wY.N6(S)==54)R.Type=wY.cH(S);wY.Hf(S,[56,24,18].slice());if(wY.N6(S)==56){wY.ak(S,true);R.DefaultValue=wY.Pc(S)}
wY.Hf(S,[24,18].slice());return R},eZ:function(S){var R=null;var yN=[],yN=[69,9,117,128,130,120,103,101,15,17,19].slice();var bF=null;wY.Hf(S,yN);switch(wY.N6(S)){case 17:R=wY.cH(S);wY.Ot(S,18);wY.yC(S);break;case 69:R=tU.CJ($New(tU),$AsIntf(S,"cm"),wY.AU(S));if(wY.N6(S)==25){do{$As(R,tU).Arguments.push(wY.Wp(S))}while(!(wY.N6(S)!=24));wY.Ot(S,27);wY.yC(S)}
break;case 9:R=tU.CJ($New(tU),$AsIntf(S,"cm"),S.XN.getTokenValue());wY.yC(S);break;case 117:R=fw.Dk$($New(Up),$AsIntf(S,"cm"));wY.yC(S);break;case 128:R=fw.Dk$($New(Bf),$AsIntf(S,"cm"));wY.yC(S);break;case 103:R=null;wY.yC(S);break;case 101:R=fw.Dk$($New(IV),$AsIntf(S,"cm"));$As(R,IV).Type=wY.cH(S);break;case 130:R=fw.Dk$($New(ff),$AsIntf(S,"cm"));wY.yC(S);break;case 120:R=fw.Dk$($New(zB),$AsIntf(S,"cm"));wY.yC(S);break;case 15:R=wY.Ul(S);wY.yC(S);break;case 19:R=wY.Zj(S);wY.yC(S);break}
while(wY.N6(S)==19){bF=R;R=fw.Dk$($New(Cg),$AsIntf(S,"cm"));$As(R,Cg).Type=bF;wY.aJ(S,20,true);wY.yC(S)}
return R},VR:function(S,sh,Vz){var R=false;R=sh.indexOf(wY.yC(S))>=0;if((!R)&&Vz)wY.as(S,0);return R},aJ:function(S,yu,rk){var R=false;R=wY.yC(S)==yu;if((!R)&&rk)wY.as(S,yu);return R},yC:function(S){var R=0;R=S.XN.scan();return R},Zj:function(S){var R=null;wY.Ot(S,19);R=fw.Dk$($New(MV),$AsIntf(S,"cm"));do{R.Types.push(wY.cH(S))}while(!(wY.N6(S)==20));wY.Ot(S,20);return R},cH:function(S){var R=null;var rF=[],rF=[69,9,117,128,130,120,103,101,92,15,17,19].slice();var UX=null;wY.VR(S,rF,true);if(wY.N6(S)==17)return wY.mw(S);if(wY.N6(S)==92)return wY.Ff(S);R=wY.eZ(S);while(wY.N6(S)==47){if(!$Is(R,J4)){UX=R;R=fw.Dk$($New(J4),$AsIntf(S,"cm"));$As(R,J4).Types.push(UX)}
wY.VR(S,rF,true);$As(R,J4).Types.push(wY.eZ(S))}
return R},ek:function(S){var R=null;wY.Ot(S,132);R=fw.Dk$($New(Xj),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.VR(S,[25,56].slice(),true);if(wY.N6(S)==25){R.TypeParameters.push(wY.wO(S));wY.aJ(S,56,true)}
R.Type=wY.cH(S);wY.Ot(S,23);return R},jZ:function(S){var R=null;wY.Ot(S,54);R=wY.cH(S);return R},Wp:function(S){var R=null;wY.Hf(S,[25,24].slice());R=fw.Dk$($New(WB),$AsIntf(S,"cm"));R.Type=wY.cH(S);wY.Hf(S,[27,24].slice());return R},MI:function(S){var R=null;var RE=[],Gy="",G1=false;wY.UY(S,[9,8,110,92,78,17,19].slice());if(wY.N6(S)==92)return wY.BL(S);if(wY.N6(S)==17)return wY.tL(S);if(wY.N6(S)==19)return wY.WQ(S);if(S.XN.isIdentifier()||([9,8,78].indexOf(S.XN.getToken())>=0)){Gy=wY.Pc(S);wY.VR(S,[25,53,54,17].slice(),true);if(wY.N6(S)==25){do{RE.push(wY.Wp(S))}while(!(wY.N6(S)!=24));wY.VR(S,[53,54,17].slice(),true)}
G1=wY.N6(S)==53;if(G1)wY.VR(S,[54,17].slice(),true);switch(wY.N6(S)){case 54:R=wY.pQ(S);$As(R,Zn).Nullable=G1;break;case 17:R=wY.BO(S);break}
R.TypeArguments=RE;R.Name=Gy}
return R},wO:function(S){var R=null;wY.Hf(S,[25,24].slice());R=fw.Dk$($New(Yu),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.VR(S,[83,27,24].slice(),true);if(wY.N6(S)==83){R.ExtendsType=wY.cH(S);wY.Hf(S,[27,24].slice())}
return R},mB:function(S){var R=null;wY.UY(S,[]);R=fw.Dk$($New(hn),$AsIntf(S,"cm"));R.Name=wY.AU(S);if(wY.N6(S)==25){R.Arguments.push(wY.Wp(S));wY.yC(S)}
return R},Vw:function(S){var R=null;wY.Ot(S,102);R=fw.Dk$($New(Zz),$AsIntf(S,"cm"));wY.ak(S,true);R.Name=wY.Pc(S);wY.aJ(S,54,true);R.Type=wY.cH(S);return R},Vp:function(S,aN){var R="";S.XN=j.createScanner(0,true,0,aN);S.yY=j.createSourceFile("main",aN,0);try{wY.cp$(S)}catch($e){var DU=$W($e);console.error(DU.FMessage)}
R=wY.F1$(S);return R},Destroy:TObject.Destroy,F1$:function($){return $.ClassType.F1($)},cp$:function($){return $.ClassType.cp($)}};wY.$Intf={cm:[]}
function is(uD){var R="";var bu=[];if(uD.length==0)return"Unknown";bu=(uD).split("\\");R=bu[(bu.length-1)];bu=(uD).split("\/");R=bu[(bu.length-1)];R=StrReplace(R,"-","_");R=$StrSet(R,1,(R.charAt(0)).toUpperCase());return R};var Tw=["Warning","Error","Message"];function Copy$b(s,d){d.u=s.u;d.q=s.q;return d}
function Clone$b($){return{u:$.u,q:$.q}}
var UV=["vPublic","vProtected","vPrivate"];var fw={$ClassName:"TCustomDeclaration",$Parent:TObject,$Init:function($){TObject.$Init($);$.Ek=null},IG:function(S){++gv},Dk:function(S,KZ){S.Ek=KZ;return S},Rd:function(S){--gv},vG:function(S){var R="";R=DupeString("  ",gv);return R},Destroy:TObject.Destroy,Dk$:function($){return $.ClassType.Dk.apply($.ClassType,arguments)},nH$:function($){return $.ClassType.nH($)}};var c4={$ClassName:"TCustomType",$Parent:fw,$Init:function($){fw.$Init($)},Destroy:TObject.Destroy,Dk:fw.Dk,nH:fw.nH};var hl={$ClassName:"TCustomNamedType",$Parent:c4,$Init:function($){c4.$Init($)},nH:function(S){var R="";R="J"+hl.Gl$(S);return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)},Gl$:function($){return $.ClassType.Gl($)}};var RN={$ClassName:"TPredefinedType",$Parent:hl,$Init:function($){hl.$Init($)},nH:function(S){var R="";R=hl.Gl$(S);return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)},Gl:hl.Gl};var Up={$ClassName:"TVariantType",$Parent:RN,$Init:function($){RN.$Init($)},Gl:function(S){var R="";R="Variant";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH:RN.nH,Gl$:function($){return $.ClassType.Gl($)}};var EU={$ClassName:"TNamedDeclaration",$Parent:fw,$Init:function($){fw.$Init($);$.Name=""},Destroy:TObject.Destroy,Dk:fw.Dk,nH:fw.nH};var Zz={$ClassName:"TVariableDeclaration",$Parent:EU,$Init:function($){EU.$Init($);$.Type=null},nH:function(S){var R="";console.log("not implemented: TVariableDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var J4={$ClassName:"TUnionType",$Parent:c4,$Init:function($){c4.$Init($);$.Types=[]},nH:function(S){var R="";var df=0;R="Variant {";var $t6;for(df=0,$t6=(S.Types.length-1);df<$t6;df++){R+=fw.nH$(S.Types[df])+" or "}
R+=fw.nH$(S.Types[(S.Types.length-1)])+"}";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var hn={$ClassName:"TTypeReference",$Parent:fw,$Init:function($){fw.$Init($);$.Name="";$.Arguments=[]},nH:function(S){var R="";var Nq=0;R="J"+S.Name;if(S.Arguments.length>0){R+=" {"+fw.nH$(S.Arguments[0]);var $t7;for(Nq=0+1,$t7=S.Arguments.length;Nq<$t7;Nq++){R+=", "+fw.nH$(S.Arguments[Nq])}
R+="} "}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var Yu={$ClassName:"TTypeParameter",$Parent:fw,$Init:function($){fw.$Init($);$.Name="";$.ExtendsType=null},nH:function(S){var R="";R=S.Name;if(S.ExtendsType)R+=" extends "+fw.nH$(S.ExtendsType);return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var IV={$ClassName:"TTypeOfType",$Parent:hl,$Init:function($){hl.$Init($);$.Type=null},Gl:function(S){var R="";R="type of";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH:hl.nH,Gl$:function($){return $.ClassType.Gl($)}};var WB={$ClassName:"TTypeArgument",$Parent:fw,$Init:function($){fw.$Init($);$.Type=null},nH:function(S){var R="";R=fw.nH$(S.Type);return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var Xj={$ClassName:"TTypeAlias",$Parent:EU,$Init:function($){EU.$Init($);$.Type=null;$.TypeParameters=[]},nH:function(S){var R="";R=S.Name+" = "+fw.nH$(S.Type);return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var MV={$ClassName:"TTupleType",$Parent:c4,$Init:function($){c4.$Init($);$.Types=[]},nH:function(S){var R="";R="TupletType";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var ff={$ClassName:"TStringType",$Parent:RN,$Init:function($){RN.$Init($)},Gl:function(S){var R="";R="String";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH:RN.nH,Gl$:function($){return $.ClassType.Gl($)}};var VU={$ClassName:"TParameter",$Parent:EU,$Init:function($){EU.$Init($);$.DefaultValue="";$.IsRest=$.IsOptional=false;$.AccessibilityModifier=0;$.Type=null},nH:function(S){var R="";R=S.Name+": "+fw.nH$(S.Type);if(S.DefaultValue!="")R+=" = "+S.DefaultValue;if(S.IsRest)R+=" {...}";return R},JS:function(S,aB){var R="";R=hw(S.Name);if(!aB){R+=": ";if(S.Type){R+=fw.nH$(S.Type)}else R+="Variant"}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var mt={$ClassName:"TObjectType",$Parent:c4,$Init:function($){c4.$Init($);$.Members=[]},nH:function(S){var R="";var BZ=0;var yf=null;var UP=[];fw.IG(S.ClassType);UP=S.Members;var $t8;for(BZ=0,$t8=UP.length;BZ<$t8;BZ++){yf=UP[BZ];R+=fw.nH$(yf)}
fw.Rd(S.ClassType);R+=fw.vG(S.ClassType)+"end;";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var CC={$ClassName:"TNamespaceDeclaration",$Parent:EU,$Init:function($){EU.$Init($)},Destroy:TObject.Destroy,Dk:fw.Dk,nH:fw.nH};var tU={$ClassName:"TNamedType",$Parent:hl,$Init:function($){hl.$Init($);$.Arguments=[];$.E1=""},CJ:function(S,Eq,Z4){fw.Dk(S,Eq);S.E1=Z4;return S},nH:function(S){var R="";var pr=0;var M2=null;R=hl.nH(S);if(S.Arguments.length>0){var FM=[];R+="{<";FM=S.Arguments;var $t9;for(pr=0,$t9=FM.length;pr<$t9;pr++){M2=FM[pr];R+=fw.nH$(M2)}
R+=">}"}
return R},Gl:function(S){var R="";R=S.E1;return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)},Gl$:function($){return $.ClassType.Gl($)}};var fj={$ClassName:"TModuleDeclaration",$Parent:EU,$Init:function($){EU.$Init($);$.Modules=[];$.Variables=[];$.Exports=[];$.Functions=[];$.Interfaces=[];$.Classes=[]},nH:function(S){var R="";var r8=0;var ql=null,Jm=0;var xn=null,q8=0;var zm=null;if(S.Classes.length+S.Interfaces.length>0){var v2=[],sj=[];R+="type"+"\r\n";fw.IG(S.ClassType);sj=S.Classes;var $tA;for(r8=0,$tA=sj.length;r8<$tA;r8++){ql=sj[r8];R=R+fw.nH$(ql)}
v2=S.Interfaces;var $tB;for(Jm=0,$tB=v2.length;Jm<$tB;Jm++){xn=v2[Jm];R=R+fw.nH$(xn)}
fw.Rd(S.ClassType)}
if(S.Variables.length>0){var fC=[];R+="var"+"\r\n";fw.IG(S.ClassType);fC=S.Variables;var $tC;for(q8=0,$tC=fC.length;q8<$tC;q8++){zm=fC[q8];R=R+fw.nH$(zm)}
fw.Rd(S.ClassType)}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var wU={$ClassName:"TCustomTypeMember",$Parent:EU,$Init:function($){EU.$Init($);$.TypeParameters=[];$.Visibility=0;$.IsStatic=false;$.TypeArguments=[]},Dk:function(S,wy){fw.Dk(S,wy);S.Visibility=0;return S},Destroy:TObject.Destroy,Dk$:function($){return $.ClassType.Dk.apply($.ClassType,arguments)},nH:fw.nH};var aR={$ClassName:"TMethodDeclaration",$Parent:wU,$Init:function($){wU.$Init($);$.Type=null},nH:function(S){var R="";var ol="";var hr="";var Af=0,JH=0;var Gx=null,sT=0;var ND=[];Af=0;ND=S.Type.ParameterList;var $tD;for(JH=0,$tD=ND.length;JH<$tD;JH++){Gx=ND[JH];if(Gx.IsOptional)++Af}
ol=fw.vG(S.ClassType);ol+=(S.Type.ResultType)?"function":"procedure";ol+=" "+S.Name;hr=";"+((Af>0)?" overload;":"");hr+="\r\n";R="";var $tE;for(sT=0,$tE=Af;sT<=$tE;sT++){R+=ol+nR.Gm(S.Type,sT)+hr}
return R},Destroy:TObject.Destroy,Dk:wU.Dk,nH$:function($){return $.ClassType.nH($)}};var Ps={$ClassName:"TInterfaceDeclaration",$Parent:fw,$Init:function($){fw.$Init($);$.TypeParameters=[];$.Name="";$.Extends=[];$.Type=null},nH:function(S){var R="";var lW=0;var dB=null,xz=0;R+=fw.vG(S.ClassType)+"J"+S.Name;if(S.TypeParameters.length>0){var WD=[];R+="{<";WD=S.TypeParameters;var $tF;for(lW=0,$tF=WD.length;lW<$tF;lW++){dB=WD[lW];R+=fw.nH$(dB)}
R+=">}"}
R+=" = class external";if(S.Extends.length>0){R+="(";R+=fw.nH$(S.Extends[0]);var $tG;for(xz=0+1,$tG=S.Extends.length;xz<$tG;xz++){R+=", "+fw.nH$(S.Extends[xz])}
R+=")"}
R+="\r\n";R+=fw.nH$(S.Type);R+="\r\n"+"\r\n";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var Io={$ClassName:"TIndexDeclaration",$Parent:wU,$Init:function($){wU.$Init($);$.IsStringIndex=false;$.Type=null},nH:function(S){var R="";R=fw.vG(S.ClassType)+"\/\/ ";R+="property Item["+S.Name+": ";R+=(S.IsStringIndex)?"String":"Integer";R+="]: "+fw.nH$(S.Type)+";"+"\r\n";return R},Destroy:TObject.Destroy,Dk:wU.Dk,nH$:function($){return $.ClassType.nH($)}};var Ji={$ClassName:"TImportDeclaration",$Parent:EU,$Init:function($){EU.$Init($)},nH:function(S){var R="";console.log("not implemented: TImportDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var nR={$ClassName:"TFunctionType",$Parent:hl,$Init:function($){hl.$Init($);$.ParameterList=[];$.ResultType=null},nH:function(S){var R="";var Lj=0;if(S.ParameterList.length>0){R="("+ri.U8(S.ParameterList[0],false);var $tH;for(Lj=0+1,$tH=S.ParameterList.length;Lj<$tH;Lj++){R+="; "+ri.U8(S.ParameterList[Lj],false)}
R+=")"}
if(S.ResultType)R+=": "+fw.nH$(S.ResultType);return R},Gm:function(S,L4){var R="";var LD=false;var kh=0,Kw=0;kh=0;if(S.ParameterList.length>0){if(!(S.ParameterList[0].IsOptional&&L4==0)){kh+=(S.ParameterList[0].IsOptional?1:0);LD=1<S.ParameterList.length&&fw.nH$(S.ParameterList[0].Type)==fw.nH$(S.ParameterList[1].Type)&&((!S.ParameterList[0].IsOptional)||kh<L4);R="("+ri.U8(S.ParameterList[0],LD);var $tI;for(Kw=0+1,$tI=S.ParameterList.length;Kw<$tI;Kw++){if(S.ParameterList[Kw].IsOptional&&kh>=L4)break;kh+=(S.ParameterList[Kw].IsOptional?1:0);R+=(LD)?", ":"; ";LD=Kw+1<S.ParameterList.length&&fw.nH$(S.ParameterList[Kw].Type)==fw.nH$(S.ParameterList[Kw+1].Type)&&((!S.ParameterList[Kw].IsOptional)||kh<L4);R+=ri.U8(S.ParameterList[Kw],LD)}
R+=")"}}
if(S.ResultType)R+=": "+fw.nH$(S.ResultType);return R},Gl:function(S){var R="";R="function";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)},Gl$:function($){return $.ClassType.Gl($)}};var ri={$ClassName:"TFunctionParameter",$Parent:EU,$Init:function($){EU.$Init($);$.Type=null;$.IsOptional=false},nH:function(S){var R="";R=hw(S.Name)+": ";if(S.Type){R+=fw.nH$(S.Type)}else R+="Variant";return R},U8:function(S,xH){var R="";R=hw(S.Name);if(!xH){R+=": ";if(S.Type){R+=fw.nH$(S.Type)}else R+="Variant"}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var Z2={$ClassName:"TFunctionDeclaration",$Parent:EU,$Init:function($){EU.$Init($);$.Type=null},nH:function(S){var R="";var my="";var Go="";var SI=0,fl=0;var Yp=null,xD=0;var SF=[];SI=0;SF=S.Type.ParameterList;var $tJ;for(fl=0,$tJ=SF.length;fl<$tJ;fl++){Yp=SF[fl];if(Yp.IsOptional)++SI}
my=fw.vG(S.ClassType);my+=(S.Type.ResultType)?"function":"procedure";my+=" "+S.Name;Go=";"+((SI>0)?" overload;":"");Go+="\r\n";R="";var $tK;for(xD=0,$tK=SI;xD<=$tK;xD++){R+=my+nR.Gm(S.Type,xD)+Go}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var Bf={$ClassName:"TFloatType",$Parent:RN,$Init:function($){RN.$Init($)},Gl:function(S){var R="";R="Float";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH:RN.nH,Gl$:function($){return $.ClassType.Gl($)}};var Zn={$ClassName:"TFieldDeclaration",$Parent:wU,$Init:function($){wU.$Init($);$.Nullable=false;$.Type=null},nH:function(S){var R="";var K4=0;var fB=null;R=fw.vG(S.ClassType)+hw(S.Name);if(S.TypeArguments.length>0){var rH=[];R+="{<";rH=S.TypeArguments;var $tL;for(K4=0,$tL=rH.length;K4<$tL;K4++){fB=rH[K4];R+=fw.nH$(fB)}
R+=">}"}
R+=": "+fw.nH$(S.Type)+";";if(S.Nullable)R+=" \/\/ nullable";R+="\r\n";return R},Destroy:TObject.Destroy,Dk:wU.Dk,nH$:function($){return $.ClassType.nH($)}};var y8={$ClassName:"TExportDeclaration",$Parent:EU,$Init:function($){EU.$Init($);$.ou=false},nH:function(S){var R="";R="";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var iT={$ClassName:"TEnumerationItem",$Parent:fw,$Init:function($){fw.$Init($);$.Name=$.Value=""},nH:function(S){var R="";R=S.Name;return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var VZ={$ClassName:"TEnumerationDeclaration",$Parent:EU,$Init:function($){EU.$Init($);$.Items=[]},nH:function(S){var R="";var KX=0;var PA=null;var rC=[];R+=fw.vG(S.ClassType)+"T"+S.Name+" = Variant;"+"\r\n";R+=fw.vG(S.ClassType)+"T"+S.Name+"Helper = strict helper for T"+S.Name+"\r\n";fw.IG(S.ClassType);rC=S.Items;var $tM;for(KX=0,$tM=rC.length;KX<$tM;KX++){PA=rC[KX];R+=fw.vG(S.ClassType)+"const "+hw(fw.nH$(PA));if(PA.Value!=""){try{R+=" = "+(parseInt(PA.Value,10)).toString()+";"+"\r\n"}catch($e){R+=" = '"+PA.Value+"';"+"\r\n"}}else R+=" = '"+PA.Name+"';"+"\r\n"}
fw.Rd(S.ClassType);R+=fw.vG(S.ClassType)+"end;"+"\r\n";R+="\r\n";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var xv={$ClassName:"TDefinitionDeclaration",$Parent:EU,$Init:function($){EU.$Init($)},nH:function(S){var R="";console.log("not implemented: TDefinitionDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var j3={$ClassName:"TConstructorType",$Parent:hl,$Init:function($){hl.$Init($);$.ResultType=null;$.ParameterList=[]},nH:function(S){var R="";var wL=0;if(S.ParameterList.length>0){R="("+ri.U8(S.ParameterList[0],false);var $tN;for(wL=0+1,$tN=S.ParameterList.length;wL<$tN;wL++){R+="; "+ri.U8(S.ParameterList[wL],false)}
R+=")"}
if(S.ResultType)R+=": "+fw.nH$(S.ResultType);return R},Gl:function(S){var R="";R="constructor";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)},Gl$:function($){return $.ClassType.Gl($)}};var yE={$ClassName:"TConstructorDeclaration",$Parent:wU,$Init:function($){wU.$Init($);$.ParameterList=[];$.Type=null},nH:function(S){var R="";R=fw.vG(S.ClassType)+"constructor Create";if(S.Type)R+=fw.nH$(S.Type);R+=";"+"\r\n";return R},Destroy:TObject.Destroy,Dk:wU.Dk,nH$:function($){return $.ClassType.nH($)}};var VS={$ClassName:"TClassDeclaration",$Parent:Ps,$Init:function($){Ps.$Init($);$.Implements=[];$.Members=[]},nH:function(S){var R="";var Fc=0;var OU=0;var zr=null;var Ig=[];R+=fw.vG(S.ClassType)+"J"+S.Name+" = class external '"+S.Name+"'";if(S.Extends.length>0){R+="(";R+=fw.nH$(S.Extends[0]);var $tO;for(Fc=0+1,$tO=S.Extends.length;Fc<$tO;Fc++){R+=", "+fw.nH$(S.Extends[Fc])}
R+=")"}
R+="\r\n";fw.IG(S.ClassType);Ig=S.Members;var $tP;for(OU=0,$tP=Ig.length;OU<$tP;OU++){zr=Ig[OU];R+=fw.nH$(zr)}
fw.Rd(S.ClassType);R+=fw.vG(S.ClassType)+"end;"+"\r\n"+"\r\n";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var jA={$ClassName:"TCallSignature",$Parent:fw,$Init:function($){fw.$Init($);$.ParameterList=[];$.Type=null;$.TypeParameters=[]},nH:function(S){var R="";var k4=0;var dK=null,uw=0;R="";if(S.TypeParameters.length>0){var H4=[];R+="{<";H4=S.TypeParameters;var $tQ;for(k4=0,$tQ=H4.length;k4<$tQ;k4++){dK=H4[k4];R+=fw.nH$(dK)}
R+=">}"}
if(S.ParameterList.length>0){R+="(";var $tR;for(uw=0,$tR=(S.ParameterList.length-1);uw<$tR;uw++){R+=VU.JS(S.ParameterList[uw],false)+"; "}
R+=VU.JS(S.ParameterList[(S.ParameterList.length-1)],false)+")"}
if(S.Type)R+=": "+fw.nH$(S.Type);return R},aj:function(S,of){var R="";var XK=false;var Gu=0,Wd=0;Gu=0;if(S.ParameterList.length>0){if(!(S.ParameterList[0].IsOptional&&of==0)){Gu+=(S.ParameterList[0].IsOptional?1:0);XK=S.ParameterList.length>=2&&d6(S.ParameterList[0],S.ParameterList[1])&&((!S.ParameterList[0].IsOptional)||Gu<of);R="("+VU.JS(S.ParameterList[0],XK);var $tS;for(Wd=0+1,$tS=S.ParameterList.length;Wd<$tS;Wd++){if(S.ParameterList[Wd].IsOptional&&Gu>=of)break;Gu+=(S.ParameterList[Wd].IsOptional?1:0);R+=(XK)?", ":"; ";XK=Wd+1<S.ParameterList.length&&d6(S.ParameterList[Wd],S.ParameterList[Wd+1])&&((!S.ParameterList[Wd].IsOptional)||Gu<of);R+=VU.JS(S.ParameterList[Wd],XK)}
R+=")"}}
if(S.Type)R+=": "+fw.nH$(S.Type);return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var ME={$ClassName:"TCallbackDeclaration",$Parent:wU,$Init:function($){wU.$Init($);$.Type=null},nH:function(S){var R="";R=fw.vG(S.ClassType)+"callback "+S.Name;if(S.Type)R+=nR.Gm(S.Type,S.Type.ParameterList.length);R+=";"+"\r\n";return R},Destroy:TObject.Destroy,Dk:wU.Dk,nH$:function($){return $.ClassType.nH($)}};var zB={$ClassName:"TBooleanType",$Parent:RN,$Init:function($){RN.$Init($)},Gl:function(S){var R="";R="Boolean";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH:RN.nH,Gl$:function($){return $.ClassType.Gl($)}};var Cg={$ClassName:"TArrayType",$Parent:c4,$Init:function($){c4.$Init($);$.Type=null},nH:function(S){var R="";R="array of "+fw.nH$(S.Type);return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var FW={$ClassName:"TAmbientVariableDeclaration",$Parent:fw,$Init:function($){fw.$Init($);$.IsConst=false;$.AmbientBindingList=[]},nH:function(S){var R="";var fJ=0;var Iz=null;var Rz=[];Rz=S.AmbientBindingList;var $tT;for(fJ=0,$tT=Rz.length;fJ<$tT;fJ++){Iz=Rz[fJ];R+=fw.vG(S.ClassType)+fw.nH$(Iz)}
R+=";"+"\r\n";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var uS={$ClassName:"TAmbientBodyElement",$Parent:fw,$Init:function($){fw.$Init($)},Destroy:TObject.Destroy,Dk:fw.Dk,nH:fw.nH};var z6={$ClassName:"TAmbientPropertyMemberDeclaration",$Parent:uS,$Init:function($){uS.$Init($);$.Visibility=0;$.IsStatic=false;$.Name=""},Destroy:TObject.Destroy,Dk:fw.Dk,nH:fw.nH};var yB={$ClassName:"TAmbientPropertyMemberDeclarationProperty",$Parent:z6,$Init:function($){z6.$Init($);$.Type=null},nH:function(S){var R="";R=fw.vG(S.ClassType);if(S.IsStatic)R+="class var ";R+=hw(S.Name);R+=": "+((S.Type)?fw.nH$(S.Type):"Variant");R+=";"+"\r\n";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var xq={$ClassName:"TAmbientPropertyMemberDeclarationMethod",$Parent:z6,$Init:function($){z6.$Init($);$.CallSignature=null},nH:function(S){var R="";var ps="";var h1="";var bw=0,ej=0;var GG=null,PC=0;var Qs=[];bw=0;Qs=S.CallSignature.ParameterList;var $tU;for(ej=0,$tU=Qs.length;ej<$tU;ej++){GG=Qs[ej];if(GG.IsOptional)++bw}
ps=fw.vG(S.ClassType);ps+=(S.CallSignature.Type)?"function":"procedure";ps+=" "+hw(S.Name);h1=";"+((bw>0)?" overload;":"");h1+="\r\n";R="";var $tV;for(PC=0,$tV=bw;PC<=$tV;PC++){R+=ps+jA.aj(S.CallSignature,PC)+h1}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var zw={$ClassName:"TAmbientModuleDeclaration",$Parent:fw,$Init:function($){fw.$Init($);$.Interfaces=[];$.Modules=[];$.Classes=[];$.Functions=[];$.TypeAliases=[];$.IdentifierPath="";$.Enums=[];$.Variables=[]},nH:function(S){var R="";var YR=0,UC=0;var sE=null,MU=0;var ZW=null,Bp=0;var Kf=null,bp=0;var yx=null,pd=0;var aq=null,Kb=0;var SN=null,z9=0;var As=null,Eb=0;var bO=null,Mm=0;var Jv=null;var Gr=[],SM=[];R="\/\/"+S.IdentifierPath+"\r\n"+"\r\n";YR=0;SM=S.Variables;var $tW;for(UC=0,$tW=SM.length;UC<$tW;UC++){sE=SM[UC];if(sE.IsConst)++YR}
if(YR>0){var zK=[];R+="const"+"\r\n";fw.IG(S.ClassType);zK=S.Variables;var $tX;for(MU=0,$tX=zK.length;MU<$tX;MU++){ZW=zK[MU];if(ZW.IsConst)R=R+fw.nH$(ZW)}
fw.Rd(S.ClassType);R+="\r\n"}
if(S.Enums.length+S.Classes.length+S.Interfaces.length>0){var Ms=[],JN=[],U2=[],Wu=[];R+="type"+"\r\n";fw.IG(S.ClassType);JN=S.Enums;var $tY;for(Bp=0,$tY=JN.length;Bp<$tY;Bp++){Kf=JN[Bp];R+=fw.nH$(Kf)}
Ms=S.Classes;var $tZ;for(bp=0,$tZ=Ms.length;bp<$tZ;bp++){yx=Ms[bp];R+=fw.nH$(yx)}
Wu=S.Interfaces;var $ta;for(pd=0,$ta=Wu.length;pd<$ta;pd++){aq=Wu[pd];R+=fw.nH$(aq)}
U2=S.TypeAliases;var $tb;for(Kb=0,$tb=U2.length;Kb<$tb;Kb++){SN=U2[Kb];R+=fw.nH$(SN)}
fw.Rd(S.ClassType)}
Gr=S.Modules;var $tc;for(z9=0,$tc=Gr.length;z9<$tc;z9++){As=Gr[z9];R+=fw.nH$(As)}
if(S.Functions.length>0){var Nv=[];Nv=S.Functions;var $td;for(Eb=0,$td=Nv.length;Eb<$td;Eb++){bO=Nv[Eb];R+=fw.nH$(bO)}
R+="\r\n"}
if(S.Variables.length-YR>0){var JZ=[];R+="var"+"\r\n";fw.IG(S.ClassType);JZ=S.Variables;var $te;for(Mm=0,$te=JZ.length;Mm<$te;Mm++){Jv=JZ[Mm];if(!Jv.IsConst)R=R+fw.nH$(Jv)}
fw.Rd(S.ClassType);R+="\r\n"}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var UB={$ClassName:"TAmbientFunctionDeclaration",$Parent:EU,$Init:function($){EU.$Init($);$.CallSignature=null},nH:function(S){var R="";var fZ="";var w4="";var RP=0,bv=0;var jO=null,p9=0;var op=[];RP=0;op=S.CallSignature.ParameterList;var $tf;for(bv=0,$tf=op.length;bv<$tf;bv++){jO=op[bv];if(jO.IsOptional)++RP}
fZ=fw.vG(S.ClassType);fZ+=(S.CallSignature.Type)?"function":"procedure";fZ+=" "+S.Name;w4=";"+((RP>0)?" overload;":"");w4+="\r\n";R="";var $tg;for(p9=0,$tg=RP;p9<=$tg;p9++){R+=fZ+jA.aj(S.CallSignature,p9)+w4}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var ZM={$ClassName:"TAmbientDeclaration",$Parent:EU,$Init:function($){EU.$Init($);$.Variables=[];$.Namespaces=[];$.Modules=[];$.Classes=[];$.Functions=[];$.Enums=[]},nH:function(S){var R="";var ti=0;var rE=null,eP=0;var vf=null,AI=0;var qb=null,l4=0;var GP=null;var Qw=[],Ib=[],M4=[];M4=S.Functions;var $th;for(ti=0,$th=M4.length;ti<$th;ti++){rE=M4[ti];R+=fw.nH$(rE)}
Ib=S.Modules;var $ti;for(eP=0,$ti=Ib.length;eP<$ti;eP++){vf=Ib[eP];R+=fw.nH$(vf)}
if(S.Classes.length>0){var pb=[];R+="type"+"\r\n";fw.IG(S.ClassType);pb=S.Classes;var $tj;for(AI=0,$tj=pb.length;AI<$tj;AI++){qb=pb[AI];R=R+fw.nH$(qb)}
fw.Rd(S.ClassType)}
if(S.Variables.length>0){Qw=S.Variables;var $tk;for(l4=0,$tk=Qw.length;l4<$tk;l4++){GP=Qw[l4];R=R+fw.nH$(GP)}}
return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var cJ={$ClassName:"TAmbientConstructorDeclaration",$Parent:uS,$Init:function($){uS.$Init($);$.ParameterList=[]},nH:function(S){var R="";var O4=0;R=fw.vG(S.ClassType)+"constructor Create";if(S.ParameterList.length>0){R+="(";var $tl;for(O4=0,$tl=(S.ParameterList.length-1);O4<$tl;O4++){R+=ri.U8(S.ParameterList[O4],false)+"; "}
R+=ri.U8(S.ParameterList[(S.ParameterList.length-1)],false)+")";R+=")"}
R+=";"+"\r\n";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var sF={$ClassName:"TAmbientClassDeclaration",$Parent:fw,$Init:function($){fw.$Init($);$.Members=[];$.Name="";$.Extends=[];$.Implements=[]},nH:function(S){var R="";var C9=0;var aP=0,Xw=0;var D2=null,E7=0;var R1=[];R+=fw.vG(S.ClassType)+"J"+S.Name+" = class external '"+S.Name+"'";if(S.Extends.length>0){R+="(";R+=fw.nH$(S.Extends[0]);var $tm;for(C9=0+1,$tm=S.Extends.length;C9<$tm;C9++){R+=", "+fw.nH$(S.Extends[C9])}
R+=")"}
R+="\r\n";aP=0;fw.IG(S.ClassType);R1=S.Members;var $tn;for(Xw=0,$tn=R1.length;Xw<$tn;Xw++){D2=R1[Xw];E7=($Is(D2,z6))?$As(D2,z6).Visibility:0;if(aP!=E7){fw.Rd(S.ClassType);R+=fw.vG(S.ClassType);switch(E7){case 0:R+="public"+"\r\n";break;case 1:R+="protected"+"\r\n";break;case 2:R+="private"+"\r\n";break}
fw.IG(S.ClassType);aP=E7}
R+=fw.nH$(D2)}
fw.Rd(S.ClassType);R+=fw.vG(S.ClassType)+"end;"+"\r\n"+"\r\n";return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var Wm={$ClassName:"TAmbientBinding",$Parent:EU,$Init:function($){EU.$Init($);$.Type=null},nH:function(S){var R="";R=S.Name+": "+fw.nH$(S.Type);return R},Destroy:TObject.Destroy,Dk:fw.Dk,nH$:function($){return $.ClassType.nH($)}};var FT=["amPublic","amPrivate","amProtected"];function d6(x9,Fp){var R=false;R=(!(x9.Type!==null)!=!(x9.Type!==null));if(R&&(x9.Type!==null))R=fw.nH$(x9.Type)==fw.nH$(Fp.Type);return R};function hw(Cj){var R="";R=Cj;if((["type","export","label","public","protected","private","abstract","default","const","constructor","property","function","class","interface","string","end","uses","div","object"].indexOf((Cj).toLowerCase())>=0))R="&"+R;if((["length","include","exclude"].indexOf((Cj).toLowerCase())>=0))R="_"+R;return R};var j=null;var j=require("typescript");var gv=0;var P=[],RG="",XB="",vU=null;var vU=r7();P=process.argv;P.splice(0,2);if(P.length==0){return"Usage: ts2pas inputfile [outputfile]"}
RG=P[0];XB=P[0]+".pas";if(P.length==2)XB=P[1];JD(RG,XB);
