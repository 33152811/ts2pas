#! /usr/bin/env node
/**
* ts2pas
* https://github.com/CWBudde/TS2Pas
*
* Copyright (c) 2016 Christian-W. Budde
* Licensed under the MIT license.
*/


var TObject={$ClassName:"TObject",$Parent:null,ClassName:function(s){return s.$ClassName},ClassType:function(s){return s},ClassParent:function(s){return s.$Parent},$Init:function(){},Create:function(s){return s},Destroy:function(s){for(var prop in s)if(s.hasOwnProperty(prop))delete s.prop},Destroy$:function(s){return s.ClassType.Destroy(s)},Free:function(s){if(s!==null)s.ClassType.Destroy(s)}}
function StrReplace(s,o,n){return o?s.replace(new RegExp(StrRegExp(o),"g"),n):s}
function StrRegExp(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}
function StrBefore(s,d){if(!d)return s;var p=s.indexOf(d);return(p<0)?s:s.substr(0,p)}
var Exception={$ClassName:"Exception",$Parent:TObject,$Init:function(){var FMessage=""},Create:function(s,Msg){s.FMessage=Msg;return s}}
function stringRepeat(s,n){if(n<1)return'';var r='';while(n>0){if(n&1)r+=s;n>>=1,s+=s};return r};function DupeString(s,n){return stringRepeat(s,n)}
function $W(e){return e.ClassType?e:Exception.Create($New(Exception),e.constructor.name+", "+e.message)}
function $StrSet(s,i,v,z){if(i<1)throw Exception.Create($New(Exception),"Lower bound exceeded! Index "+i.toString()+z);if(i>s.length)throw Exception.Create($New(Exception),"Upper bound exceeded! Index "+i.toString()+z);return s.substring(0,i-1)+v+s.substring(i)}
function $New(c){var i={ClassType:c};c.$Init(i);return i}
function $Is(o,c){if(o===null)return false;return $Inh(o.ClassType,c)};function $Inh(s,c){if(s===null)return false;while((s)&&(s!==c))s=s.$Parent;return(s)?true:false};function $Extend(base,sub,props){function F(){};F.prototype=base.prototype;sub.prototype=new F();sub.prototype.constructor=sub;for(var n in props){if(props.hasOwnProperty(n)){sub.prototype[n]=props[n]}}}
function $AsIntf(o,i){if(o===null)return null;var r=o.ClassType.$Intf[i].map(function(e){return function(){var arg=Array.prototype.slice.call(arguments);arg.splice(0,0,o);return e.apply(o,arg)}});r.O=o;return r};function $As(o,c){if((o===null)||$Is(o,c))return o;throw Exception.Create($New(Exception),"Cannot cast instance of type \""+o.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"")}
function JError(){}
$Extend(Object,JError,{});function ML(L2){if(L2==StrBefore(L2,".d.ts"))L2+=".d.ts";gE.readFile(L2,function(EJ,yX){var fs="",eZ=null;fs=yX.toString("utf8");eZ=m.createSourceFile(L2,fs,2,true);Xk(eZ)})};function Wu(Bc,ZZ){var k1="";k1=StrBefore(Bc,".d.ts");if(Bc==k1)Bc+=".d.ts";gE.readFile(Bc,function(SJ,fu){var vI="",iJ=null,un="";if(!fu)return;vI=fu.toString("utf8");iJ=JU.VD($New(JU));iJ.Name=k1;un=JU.FE(iJ,vI);gE.writeFile(ZZ,un,function(ze){});iJ=null})};function OV(UX){Wu(UX,StrBefore(UX,".d.ts")+".pas")};function Xk(R7){vb(R7)};function vb(Vr){var R=undefined;switch(Vr.kind){case 9:console.log(Vr.text);break;case 69:console.log(Vr.text);break;case 151:console.log(Vr.text);break;case 122:console.log("declare");break;case 135:console.log(Vr.left);break;default:console.log(Vr.kind)}
m.forEachChild(Vr,vb);return R};function Copy$Dh(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$Dh($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$SZ(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$SZ($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$kz(s,d){d.persistent=s.persistent;return d}
function Clone$kz($){return{persistent:$.persistent}}
function Copy$UD(s,d){d.curr=s.curr;d.prev=s.prev;return d}
function Clone$UD($){return{curr:$.curr,prev:$.prev}}
function Copy$Dw(s,d){d.curr=s.curr;d.prev=s.prev;return d}
function Clone$Dw($){return{curr:$.curr,prev:$.prev}}
function Copy$TQ(s,d){d.persistent=s.persistent;d.interval=s.interval;return d}
function Clone$TQ($){return{persistent:$.persistent,interval:$.interval}}
function Copy$EL(s,d){d.encoding=s.encoding;d.flag=s.flag;return d}
function Clone$EL($){return{encoding:$.encoding,flag:$.flag}}
function Copy$ws(s,d){d.encoding=s.encoding;d.flag=s.flag;return d}
function Clone$ws($){return{encoding:$.encoding,flag:$.flag}}
function Copy$GZ(s,d){d.flags=s.flags;d.encoding=s.encoding;d.string_=s.string_;return d}
function Clone$GZ($){return{flags:$.flags,encoding:$.encoding,string_:$.string_}}
function Copy$H1(s,d){d.bufferSize=s.bufferSize;d.encoding=s.encoding;d.fd=s.fd;d.mode=s.mode;d.flags=s.flags;return d}
function Clone$H1($){return{bufferSize:$.bufferSize,encoding:$.encoding,fd:$.fd,mode:$.mode,flags:$.flags}}
function Copy$Dc(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$Dc($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$xy(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$xy($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function zj(){var R=null;R=require("fs");return R};function Wp(){var R=null;R=require("stream");return R};function HN(){var R=null;R=require("events");return R};var JU={$ClassName:"TTranslator",$Parent:TObject,$Init:function($){TObject.$Init($);$.NeedsSemicolon=false;$.Name="";$.bI=[];$.Wz=[];$.Ti=[];$.FQ=[];$.sC=$.n9=null},LJ:function(S){return S.sC.getTokenText()},e1:function(S){return S.sC.getToken()},cU:function(S,Rz){if(!(S.sC.isIdentifier()||Rz.indexOf(JU.e1(S))>=0))JU.Sy(S,0)},DZ:function(S,qy){if(!(qy.indexOf(JU.e1(S))>=0))JU.Sy(S,0)},OA:function(S,E9){if(JU.e1(S)!=E9)JU.Sy(S,E9)},rx:function(S){var R="";var kU=0;var lz=null,Up=0;var tt=null,mf=0;var W9=null,BF=0;var V3=null;var St=[],U1=[],xp=[];R="unit "+ym(S.Name)+";"+"\r\n"+"\r\n";R+="interface"+"\r\n"+"\r\n";xp=S.Wz;var $t1;for(kU=0,$t1=xp.length;kU<$t1;kU++){lz=xp[kU];R=R+IW.KF$(lz)}
U1=S.FQ;var $t2;for(Up=0,$t2=U1.length;Up<$t2;Up++){tt=U1[Up];R=R+IW.KF$(tt)}
if(S.Ti.length>0){var ZK=[];R+="type"+"\r\n";IW.IK(IW);ZK=S.Ti;var $t3;for(mf=0,$t3=ZK.length;mf<$t3;mf++){W9=ZK[mf];R=R+IW.KF$(W9)}
IW.Tq(IW)}
St=S.bI;var $t4;for(BF=0,$t4=St.length;BF<$t4;BF++){V3=St[BF];R=R+IW.KF$(V3)}
return R},VD:function(S){S.NeedsSemicolon=false;return S},Sy:function(S,OS){var HD=null,Ze="";HD=m.getLineAndCharacterOfPosition(S.n9,S.sC.getTokenPos());Ze=("Unknown token \""+JU.LJ(S).toString()+"\" in this context ("+(HD.line+1).toString()+":"+(HD.character+1).toString()+")");if(OS>0)Ze+=("; Expected ("+OS.toString()+")");console.trace("");throw Exception.Create($New(Exception),Ze)},jP:function(S){var R=null;JU.cU(S,[]);R=IW.zL$($New(pw),$AsIntf(S,"jm"));R.Name=JU.LJ(S);if(JU.VR(S,54,false))R.Type=JU.ic(S);if(S.NeedsSemicolon)JU.DZ(S,[23,24].slice());return R},ei:function(S,l8){do{l8.push(JU.jP(S));if(JU.e1(S)==23)break;if(JU.e1(S)!=24)break;if(!JU.HF(S,false))break}while(!(JU.e1(S)==23||(!S.sC.isIdentifier())||(!S.NeedsSemicolon)&&(!S.sC.isIdentifier())))},x3:function(S){var R=null;var tZ=0,ec=false;JU.cU(S,[121,110,111,112,113].slice());if(JU.e1(S)==121)return JU.ry(S);tZ=0;switch(JU.e1(S)){case 112:tZ=0;JU.rh(S,[113].slice(),true);break;case 111:tZ=1;JU.rh(S,[113].slice(),true);break;case 110:tZ=2;JU.rh(S,[113].slice(),true);break}
ec=JU.e1(S)==113;if(ec)JU.HF(S,true);R=JU.vy(S);$As(R,dW).IsStatic=ec;$As(R,dW).Visibility=tZ;if(S.NeedsSemicolon)JU.DZ(S,[23,16].slice());return R},I5:function(S){var R=null;var YF=[],YF=[121,110,111,112,113,16,23].slice();JU.OA(S,73);R=IW.zL$($New(sQ),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.aQ(S,[83,106,15].slice(),true);if(JU.e1(S)==83){JU.HF(S,true);R.Extends.push(JU.b9(S))}
if(JU.e1(S)==106){JU.HF(S,true);R.Implements.push(JU.xT(S));while(JU.e1(S)==24){JU.HF(S,true);R.Implements.push(JU.xT(S))}}
JU.OA(S,15);JU.rh(S,YF,false);while(JU.e1(S)!=16){R.Members.push(JU.x3(S));if(JU.e1(S)==23)JU.rh(S,YF,false)}
JU.OA(S,16);return R},ry:function(S){var R=null;JU.OA(S,121);JU.VR(S,17,true);R=IW.zL$($New(Pq),$AsIntf(S,"jm"));while(JU.HF(S,false)){R.ParameterList.push(JU.Ji(S));JU.DZ(S,[24,18,23].slice());if(JU.e1(S)==18)break}
JU.DZ(S,[18,23].slice());if(JU.e1(S)!=23)JU.VR(S,23,true);return R},KQ:function(S){var R=null;JU.OA(S,122);R=IW.zL$($New(D9),$AsIntf(S,"jm"));JU.aQ(S,[102,108,74,87,73,81,125,126].slice(),true);switch(JU.e1(S)){case 102:case 108:case 74:R.Variables.push(JU.kY(S));break;case 87:R.Functions.push(JU.ou(S));break;case 73:R.Classes.push(JU.I5(S));break;case 81:R.Enums.push(JU.pO(S));break;case 125:R.Modules.push(JU.HE(S));break;case 126:R.Namespaces.push(JU.OC(S));break}
return R},pO:function(S){var R=null;R=JU.uK(S);return R},ou:function(S){var R=null;JU.OA(S,87);R=IW.zL$($New(d4),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.aQ(S,[17,25].slice(),true);R.CallSignature=JU.D6(S);if(S.NeedsSemicolon)JU.DZ(S,[23].slice());return R},HE:function(S){var R=null;var zR=[],zR=[82,102,108,74,132,87,73,107,81,125,89,16,23].slice();var ZF=false,eD=null;JU.OA(S,125);R=IW.zL$($New(nt),$AsIntf(S,"jm"));JU.rh(S,[9].slice(),true);R.IdentifierPath=JU.xT(S);JU.OA(S,15);JU.aQ(S,zR,true);while(JU.e1(S)!=16){ZF=JU.e1(S)==82;if(ZF){JU.aQ(S,zR.concat([77,56]),true);if(JU.e1(S)==77){ZF=false;JU.HF(S,false);JU.VR(S,23,false);JU.aQ(S,zR,true)}
if(JU.e1(S)==56){ZF=false;JU.HF(S,false);JU.VR(S,23,false);JU.aQ(S,zR,true)}}
switch(JU.e1(S)){case 102:case 108:R.Variables.push(JU.kY(S));break;case 74:JU.rh(S,[81].slice(),false);if(JU.e1(S)==81){R.Enums.push(JU.pO(S))}else{eD=IW.zL$($New(RB),$AsIntf(S,"jm"));eD.IsConst=true;JU.ei(S,eD.AmbientBindingList);R.Variables.push(eD)}
JU.aQ(S,zR,true);break;case 132:R.TypeAliases.push(JU.rl(S));JU.aQ(S,zR,true);break;case 87:R.Functions.push(JU.ou(S));break;case 73:R.Classes.push(JU.Wd(S));JU.aQ(S,zR,true);break;case 125:R.Modules.push(JU.HE(S));JU.aQ(S,zR,true);break;case 107:R.Interfaces.push(JU.SK(S));JU.aQ(S,zR,true);break;case 89:JU.ND(S);if(!S.NeedsSemicolon)JU.aQ(S,zR,true);break;case 81:JU.uK(S);JU.aQ(S,zR,true);break}
if(JU.e1(S)==23)JU.aQ(S,zR,true)}
JU.OA(S,16);return R},OC:function(S){var R=null;console.log("not implemented: ReadAmbientNamespaceDeclaration");return R},vy:function(S){var R=null;var aV="";JU.cU(S,[]);aV=JU.LJ(S);JU.aQ(S,[54,17,23].slice(),true);if(JU.e1(S)==17){R=JU.Ko(S)}else R=JU.V2(S);R.Name=aV;if(S.NeedsSemicolon)JU.cU(S,[23,16,24].slice());return R},Ko:function(S){var R=null;JU.OA(S,17);R=IW.zL$($New(LF),$AsIntf(S,"jm"));R.CallSignature=JU.D6(S);JU.DZ(S,[18,23].slice());if(JU.e1(S)!=23)JU.VR(S,23,true);return R},V2:function(S){var R=null;R=IW.zL$($New(dw),$AsIntf(S,"jm"));if(JU.e1(S)==54)R.Type=JU.zK(S);return R},kY:function(S){var R=null;JU.DZ(S,[102,108,74].slice());R=IW.zL$($New(RB),$AsIntf(S,"jm"));R.IsConst=JU.e1(S)==74;JU.HF(S,true);JU.ei(S,R.AmbientBindingList);return R},D6:function(S){var R=null;JU.DZ(S,[17,25].slice());R=IW.zL$($New(pe),$AsIntf(S,"jm"));if(JU.e1(S)==25){do{R.TypeParameters.push(JU.mi(S))}while(!(JU.e1(S)!=24));JU.VR(S,17,true)}
JU.OA(S,17);JU.rh(S,[112,110,111,22,18].slice(),true);while(JU.e1(S)!=18){R.ParameterList.push(JU.it(S));if(JU.e1(S)==24)JU.rh(S,[22].slice(),false)}
JU.DZ(S,[18].slice());JU.aQ(S,[54,23].slice(),true);if(JU.e1(S)==54)R.Type=JU.zK(S);return R},Wd:function(S){var R=null;var EZ=[],EZ=[83,106,15,25].slice();JU.OA(S,73);R=IW.zL$($New(KC),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.aQ(S,EZ,true);if(JU.e1(S)==25){EZ.push(25);do{R.TypeParameters.push(JU.mi(S))}while(!(JU.e1(S)!=24));JU.OA(S,27);JU.aQ(S,EZ,true)}
if(JU.e1(S)==83){JU.HF(S,true);R.Extends.push(JU.b9(S))}
if(JU.e1(S)==106){JU.HF(S,true);R.Implements.push(JU.b9(S));while(JU.e1(S)==24){JU.HF(S,true);R.Implements.push(JU.b9(S))}}
JU.OA(S,15);JU.EF(S,R);return R},tH:function(S){var R=null;var Rd=[],ZY=[],ZY=[72,75,76,77,78,82,85,88,105].slice();var aF="",Wa=false;JU.cU(S,[92,9,19].concat(ZY));if(JU.e1(S)==19)return JU.Mo(S);aF=JU.LJ(S);JU.aQ(S,[25,53,54,17,23].slice(),true);if(JU.e1(S)==25){do{Rd.push(JU.mi(S))}while(!(JU.e1(S)!=24));JU.aQ(S,[53,54,17,23].slice(),true)}
Wa=JU.e1(S)==53;if(Wa)JU.aQ(S,[54,23].slice(),true);switch(JU.e1(S)){case 54:case 23:R=JU.Pn(S);$As(R,eV).Nullable=Wa;break;case 17:if((aF).toLowerCase()=="constructor"){R=JU.Mt(S)}else R=JU.Vc(S);break}
R.Name=aF;R.TypeParameters=Rd;if(S.NeedsSemicolon)JU.DZ(S,[23,24,16].slice());return R},EF:function(S,Kc){var Du=[],Du=[92,9,82,16,23,19].slice();var ps=0,lO=false,cy=null;JU.OA(S,15);JU.rh(S,Du,false);while(JU.e1(S)!=16){ps=0;switch(JU.e1(S)){case 112:ps=0;JU.rh(S,[92].slice(),true);break;case 111:ps=1;JU.rh(S,[92].slice(),true);break;case 110:ps=2;JU.rh(S,[92].slice(),true);break}
lO=JU.e1(S)==113;if(lO)JU.rh(S,[92,17].slice(),true);cy=JU.tH(S);cy.Visibility=ps;cy.IsStatic=lO;Kc.Members.push(cy);if(JU.e1(S)==23)JU.rh(S,Du,false)}},Mt:function(S){var R=null;R=IW.zL$($New(y7),$AsIntf(S,"jm"));R.Type=JU.Vy(S);if(S.NeedsSemicolon)JU.DZ(S,[23,16].slice());return R},Xr:function(S){var R=null;JU.OA(S,92);R=IW.zL$($New(y7),$AsIntf(S,"jm"));if(JU.HF(S,false)){JU.VR(S,17,false)}
JU.OA(S,17);JU.rh(S,[112,110,111,22,18].slice(),true);while(JU.e1(S)!=18){R.ParameterList.push(JU.it(S));if(JU.e1(S)==24)JU.rh(S,[22].slice(),false)}
JU.OA(S,18);JU.VR(S,54,true);R.Type=JU.ic(S);return R},Xi:function(S){var R=null;JU.OA(S,92);R=IW.zL$($New(w6),$AsIntf(S,"jm"));JU.VR(S,17,true);while(JU.rh(S,[22].slice(),false)){R.ParameterList.push(JU.Ji(S));JU.DZ(S,[24,18,23].slice());if(JU.e1(S)==18)break}
JU.DZ(S,[18,23].slice());if(JU.aQ(S,[54,34].slice(),false))R.ResultType=JU.zK(S);return R},mR:function(S){var NW=[],NW=[82,122,107,125,89,1].slice();JU.aQ(S,NW,true);while(JU.e1(S)!=1){switch(JU.e1(S)){case 82:JU.aQ(S,NW,true);continue;break;case 122:S.bI.push(JU.KQ(S));break;case 107:S.Ti.push(JU.SK(S));break;case 125:S.FQ.push(JU.rP(S));break;case 89:S.Wz.push(JU.ND(S));break}
if(([16,23].indexOf(JU.e1(S))>=0))JU.aQ(S,NW,true)}},uK:function(S){var R=null;var ip=[],ip=[81,77,78,89,96].slice();JU.OA(S,81);R=IW.zL$($New(T9),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.VR(S,15,true);JU.rh(S,[16].concat(ip),true);if(JU.e1(S)!=16){do{R.Items.push(JU.Ri(S));if(JU.e1(S)==16)break}while(!(!JU.rh(S,ip,false)))}
JU.OA(S,16);return R},Ri:function(S){var R=null;var Ei=[],Ei=[81,77,78,89,96].slice();JU.cU(S,Ei);R=IW.zL$($New(ha),$AsIntf(S,"jm"));R.Name=JU.LJ(S);if(JU.VR(S,56,false)){JU.VR(S,8,true);R.Value=JU.LJ(S);JU.wY(S)}
JU.DZ(S,[24,16].slice());return R},PN:function(S){var R=null;JU.OA(S,82);R=IW.zL$($New(KG),$AsIntf(S,"jm"));JU.rh(S,[77].slice(),true);R.V4=JU.e1(S)==82||(JU.LJ(S)).toLowerCase()=="default";if(R.V4)JU.HF(S,true);R.Name=JU.LJ(S);JU.VR(S,23,true);return R},S7:function(S){var R=null;JU.OA(S,87);R=IW.zL$($New(X9),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.aQ(S,[17].slice(),true);R.Type=JU.Vy(S);return R},Ji:function(S){var R=null;var AM=false;var hN=[],hN=[53,24,54,18].slice();JU.cU(S,[22].slice());AM=JU.e1(S)==22;if(AM)JU.HF(S,true);R=IW.zL$($New(Q5),$AsIntf(S,"jm"));R.Name=JU.LJ(S);JU.aQ(S,hN,true);R.IsOptional=JU.e1(S)==53;hN.push(53);if(R.IsOptional)JU.aQ(S,hN,true);if(JU.e1(S)==54)R.Type=JU.zK(S);return R},Vy:function(S){var R=null;JU.OA(S,17);R=IW.zL$($New(rt),$AsIntf(S,"jm"));while(JU.rh(S,[22].slice(),false)){R.ParameterList.push(JU.Ji(S));JU.DZ(S,[24,18,23].slice());if(JU.e1(S)==18)break}
JU.DZ(S,[18,23].slice());if(JU.aQ(S,[54,34].slice(),false))R.ResultType=JU.zK(S);return R},rh:function(S,MQ,Jt){var R=false;JU.wY(S);R=S.sC.isIdentifier()||MQ.indexOf(JU.e1(S))>=0;if((!R)&&Jt)JU.Sy(S,0);return R},HF:function(S,hu){var R=false;JU.wY(S);R=S.sC.isIdentifier();if((!R)&&hu)JU.Sy(S,69);return R},xT:function(S){var R="";JU.cU(S,[9].slice());R=JU.LJ(S);while(JU.VR(S,21,false)){JU.HF(S,true);R+="."+JU.LJ(S)}
return R},ND:function(S){var R=null;JU.OA(S,89);R=IW.zL$($New(aP),$AsIntf(S,"jm"));JU.rh(S,[37,9].slice(),true);switch(JU.e1(S)){case 37:R.Name="*";JU.VR(S,116,true);JU.HF(S,true);JU.VR(S,133,true);JU.VR(S,9,true);break;case 9:R.Name=S.sC.getTokenValue();break;default:R.Name=JU.LJ(S);JU.VR(S,56,true);JU.HF(S,true)}
JU.VR(S,23,true);return R},Mo:function(S){var R=null;JU.OA(S,19);R=IW.zL$($New(nx),$AsIntf(S,"jm"));R.IndexSignature=JU.TH(S);if(S.NeedsSemicolon)JU.cU(S,[23,16,24].slice());return R},TH:function(S){var R=null;JU.OA(S,19);R=IW.zL$($New(T1),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.VR(S,54,true);JU.aQ(S,[130,128].slice(),true);R.IsStringIndex=JU.e1(S)==130;JU.VR(S,20,true);JU.VR(S,54,true);R.Type=JU.ic(S);return R},SK:function(S){var R=null;JU.OA(S,107);R=IW.zL$($New(pE),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.aQ(S,[25,83,15].slice(),true);if(JU.e1(S)==25){do{R.TypeParameters.push(JU.mi(S))}while(!(JU.e1(S)!=24));JU.aQ(S,[83,15].slice(),true)}
if(JU.e1(S)==83){JU.HF(S,true);R.Extends.push(JU.b9(S));while(JU.e1(S)==24){JU.HF(S,true);R.Extends.push(JU.b9(S))}}
JU.OA(S,15);R.Type=JU.T8(S);JU.OA(S,16);return R},Vc:function(S){var R=null;R=IW.zL$($New(el),$AsIntf(S,"jm"));R.Type=JU.Vy(S);if(S.NeedsSemicolon)JU.DZ(S,[23,16].slice());return R},rP:function(S){var R=null;var me=[],me=[73,82,81,89,125,87,107,102,23,16].slice();JU.OA(S,125);R=IW.zL$($New(kh),$AsIntf(S,"jm"));JU.rh(S,[9].slice(),true);R.Name=JU.xT(S);JU.OA(S,15);JU.aQ(S,me,true);while(JU.e1(S)!=16){switch(JU.e1(S)){case 73:R.Classes.push(JU.Wd(S));break;case 82:R.Exports.push(JU.PN(S));break;case 81:JU.uK(S);break;case 87:R.Functions.push(JU.S7(S));break;case 89:JU.ND(S);break;case 125:R.Modules.push(JU.rP(S));break;case 107:R.Interfaces.push(JU.SK(S));break;case 102:R.Variables.push(JU.rm(S));break}
JU.aQ(S,me,true)}
JU.OA(S,16);return R},T8:function(S){var R=null;var OK=[],OK=[9,8,92,25,17,19,16].slice();var vm=[],vm=[72,73,75,77,78,82,85,86,90].slice();JU.OA(S,15);R=IW.zL$($New(X6),$AsIntf(S,"jm"));JU.rh(S,OK.concat(vm),true);while(JU.e1(S)!=16){R.Members.push(JU.fk(S));if(([23,24].indexOf(JU.e1(S))>=0))JU.rh(S,OK.concat(vm),true)}
JU.OA(S,16);return R},it:function(S){var R=null;JU.cU(S,[112,110,111,22].slice());R=IW.zL$($New(AY),$AsIntf(S,"jm"));R.Name=JU.LJ(S);R.IsRest=JU.e1(S)==22;if(R.IsRest){JU.HF(S,true);R.Name=JU.LJ(S);if(JU.VR(S,54,false))R.Type=JU.ic(S);JU.OA(S,18);return R}
JU.cU(S,[112,110,111].slice());switch(JU.e1(S)){case 112:R.AccessibilityModifier=0;JU.HF(S,false);break;case 110:R.AccessibilityModifier=1;JU.HF(S,false);break;case 111:R.AccessibilityModifier=2;JU.HF(S,false);break}
JU.cU(S,[]);JU.aQ(S,[53,54,56,24,18].slice(),true);R.IsOptional=JU.e1(S)==53;if(R.IsOptional)JU.aQ(S,[54,56,24,18].slice(),true);if(JU.e1(S)==54)R.Type=JU.zK(S);JU.DZ(S,[56,24,18].slice());if(JU.e1(S)==56){JU.HF(S,true);R.DefaultValue=JU.LJ(S)}
JU.DZ(S,[24,18].slice());return R},cG:function(S){var R=null;var cP=[],cP=[69,9,117,128,130,120,103,101,15,17,19].slice();var Nf=null;JU.DZ(S,cP);switch(JU.e1(S)){case 17:R=JU.zK(S);JU.OA(S,18);JU.wY(S);break;case 69:R=r5.Ys($New(r5),$AsIntf(S,"jm"),JU.xT(S));if(JU.e1(S)==25){do{$As(R,r5).Arguments.push(JU.Yq(S))}while(!(JU.e1(S)!=24));JU.OA(S,27);JU.wY(S)}
break;case 9:R=r5.Ys($New(r5),$AsIntf(S,"jm"),S.sC.getTokenValue());JU.wY(S);break;case 117:R=IW.zL$($New(d5),$AsIntf(S,"jm"));JU.wY(S);break;case 128:R=IW.zL$($New(kl),$AsIntf(S,"jm"));JU.wY(S);break;case 103:R=null;JU.wY(S);break;case 101:R=IW.zL$($New(o8),$AsIntf(S,"jm"));$As(R,o8).Type=JU.zK(S);break;case 130:R=IW.zL$($New(jj),$AsIntf(S,"jm"));JU.wY(S);break;case 120:R=IW.zL$($New(pk),$AsIntf(S,"jm"));JU.wY(S);break;case 15:R=JU.T8(S);JU.wY(S);break;case 19:R=JU.j9(S);JU.wY(S);break}
while(JU.e1(S)==19){Nf=R;R=IW.zL$($New(Np),$AsIntf(S,"jm"));$As(R,Np).Type=Nf;JU.VR(S,20,true);JU.wY(S)}
return R},Pn:function(S){var R=null;JU.DZ(S,[54,23].slice());R=IW.zL$($New(eV),$AsIntf(S,"jm"));if(JU.e1(S)==23)return R;R.Type=JU.zK(S);if(S.NeedsSemicolon)JU.cU(S,[23,16,24].slice());return R},aQ:function(S,y2,DC){var R=false;R=y2.indexOf(JU.wY(S))>=0;if((!R)&&DC)JU.Sy(S,0);return R},VR:function(S,oS,Wy){var R=false;R=JU.wY(S)==oS;if((!R)&&Wy)JU.Sy(S,oS);return R},wY:function(S){var R=0;R=S.sC.scan();return R},j9:function(S){var R=null;JU.OA(S,19);R=IW.zL$($New(gC),$AsIntf(S,"jm"));do{R.Types.push(JU.zK(S))}while(!(JU.e1(S)==20));JU.OA(S,20);return R},zK:function(S){var R=null;var yk=[],yk=[69,9,117,128,130,120,103,101,92,15,17,19].slice();var oY=null;JU.aQ(S,yk,true);if(JU.e1(S)==17)return JU.Vy(S);if(JU.e1(S)==92)return JU.Xi(S);R=JU.cG(S);while(JU.e1(S)==47){if(!$Is(R,so)){oY=R;R=IW.zL$($New(so),$AsIntf(S,"jm"));$As(R,so).Types.push(oY)}
JU.aQ(S,yk,true);$As(R,so).Types.push(JU.cG(S))}
return R},rl:function(S){var R=null;JU.OA(S,132);R=IW.zL$($New(nW),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.aQ(S,[25,56].slice(),true);if(JU.e1(S)==25){R.TypeParameters.push(JU.mi(S));JU.VR(S,56,true)}
R.Type=JU.zK(S);JU.OA(S,23);return R},ic:function(S){var R=null;JU.OA(S,54);R=JU.zK(S);return R},Yq:function(S){var R=null;JU.DZ(S,[25,24].slice());R=IW.zL$($New(nl),$AsIntf(S,"jm"));R.Type=JU.zK(S);JU.DZ(S,[27,24].slice());return R},fk:function(S){var R=null;var rU=[],MA=[],MA=[9,8,110,92,25,17,19].slice();var tC=[],tC=[72,73,75,77,78,82,85,86,90].slice();var xU="",GQ=false;JU.cU(S,MA.concat(tC));if(JU.e1(S)==92)return JU.Xr(S);if(([17,25].indexOf(JU.e1(S))>=0))return JU.D6(S);if(JU.e1(S)==19)return JU.TH(S);if(S.sC.isIdentifier()||[9,8].concat(tC).indexOf(S.sC.getToken())>=0){xU=JU.LJ(S);JU.aQ(S,[25,53,54,17].slice(),true);GQ=JU.e1(S)==53;if(GQ)JU.aQ(S,[54,17,25].slice(),true);if(JU.e1(S)==25){do{rU.push(JU.Yq(S))}while(!(JU.e1(S)!=24));JU.aQ(S,[54,17].slice(),true)}
switch(JU.e1(S)){case 54:R=JU.Pn(S);$As(R,eV).Nullable=GQ;break;case 17:R=JU.Vc(S);break}
R.TypeArguments=rU;R.Name=xU}
return R},mi:function(S){var R=null;JU.DZ(S,[25,24].slice());R=IW.zL$($New(G6),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.aQ(S,[83,27,24].slice(),true);if(JU.e1(S)==83){R.ExtendsType=JU.zK(S);JU.DZ(S,[27,24].slice())}
return R},b9:function(S){var R=null;JU.cU(S,[]);R=IW.zL$($New(ut),$AsIntf(S,"jm"));R.Name=JU.xT(S);if(JU.e1(S)==25){do{R.Arguments.push(JU.Yq(S))}while(!(JU.e1(S)!=24));JU.wY(S)}
return R},rm:function(S){var R=null;JU.OA(S,102);R=IW.zL$($New(Fj),$AsIntf(S,"jm"));JU.HF(S,true);R.Name=JU.LJ(S);JU.VR(S,54,true);R.Type=JU.zK(S);return R},FE:function(S,vF){var R="";S.sC=m.createScanner(0,true,0,vF);S.n9=m.createSourceFile("main",vF,0);try{JU.mR$(S)}catch($e){var hG=$W($e);console.error(hG.FMessage)}
R=JU.rx$(S);return R},Destroy:TObject.Destroy,rx$:function($){return $.ClassType.rx($)},mR$:function($){return $.ClassType.mR($)}};JU.$Intf={jm:[]}
function ym(Zl){var R="";var DM=[];if(Zl.length==0)return"Unknown";DM=(Zl).split("\\");R=DM[(DM.length-1)];DM=(Zl).split("\/");R=DM[(DM.length-1)];R=StrReplace(R,"-","_");R=$StrSet(R,1,(R.charAt(0)).toUpperCase());return R};var e7=["Warning","Error","Message"];function Copy$z(s,d){d.u=s.u;d.X=s.X;return d}
function Clone$z($){return{u:$.u,X:$.X}}
var lM=["vPublic","vProtected","vPrivate"];var IW={$ClassName:"TCustomDeclaration",$Parent:TObject,$Init:function($){TObject.$Init($);$.qS=null},IK:function(S){++Bs},zL:function(S,rp){S.qS=rp;return S},Tq:function(S){--Bs},C4:function(S){var R="";R=DupeString("  ",Bs);return R},Destroy:TObject.Destroy,zL$:function($){return $.ClassType.zL.apply($.ClassType,arguments)},KF$:function($){return $.ClassType.KF($)}};var OJ={$ClassName:"TCustomType",$Parent:IW,$Init:function($){IW.$Init($)},Destroy:TObject.Destroy,zL:IW.zL,KF:IW.KF};var Xv={$ClassName:"TCustomNamedType",$Parent:OJ,$Init:function($){OJ.$Init($)},KF:function(S){var R="";R="J"+Xv.u1$(S);return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)},u1$:function($){return $.ClassType.u1($)}};var rB={$ClassName:"TPredefinedType",$Parent:Xv,$Init:function($){Xv.$Init($)},KF:function(S){var R="";R=Xv.u1$(S);return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)},u1:Xv.u1};var d5={$ClassName:"TVariantType",$Parent:rB,$Init:function($){rB.$Init($)},u1:function(S){var R="";R="Variant";return R},Destroy:TObject.Destroy,zL:IW.zL,KF:rB.KF,u1$:function($){return $.ClassType.u1($)}};var qV={$ClassName:"TNamedDeclaration",$Parent:IW,$Init:function($){IW.$Init($);$.Name=""},Destroy:TObject.Destroy,zL:IW.zL,KF:IW.KF};var Fj={$ClassName:"TVariableDeclaration",$Parent:qV,$Init:function($){qV.$Init($);$.Type=null},KF:function(S){var R="";console.log("not implemented: TVariableDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var so={$ClassName:"TUnionType",$Parent:OJ,$Init:function($){OJ.$Init($);$.Types=[]},KF:function(S){var R="";var GK=0;var mv=null;R="Variant {";var $t5;for(GK=0,$t5=(S.Types.length-1);GK<$t5;GK++){R+=IW.KF$(S.Types[GK])+" or "}
mv=S.Types[(S.Types.length-1)];R+=(mv)?IW.KF$(mv):"void";R+="}";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var ut={$ClassName:"TTypeReference",$Parent:IW,$Init:function($){IW.$Init($);$.Name="";$.Arguments=[]},KF:function(S){var R="";var gb=0;R="J"+S.Name;if(S.Arguments.length>0){R+=" {"+IW.KF$(S.Arguments[0]);var $t6;for(gb=0+1,$t6=S.Arguments.length;gb<$t6;gb++){R+=", "+IW.KF$(S.Arguments[gb])}
R+="} "}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var G6={$ClassName:"TTypeParameter",$Parent:IW,$Init:function($){IW.$Init($);$.Name="";$.ExtendsType=null},KF:function(S){var R="";R=S.Name;if(S.ExtendsType)R+=" extends "+IW.KF$(S.ExtendsType);return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var o8={$ClassName:"TTypeOfType",$Parent:Xv,$Init:function($){Xv.$Init($);$.Type=null},u1:function(S){var R="";R="type of";return R},Destroy:TObject.Destroy,zL:IW.zL,KF:Xv.KF,u1$:function($){return $.ClassType.u1($)}};var nl={$ClassName:"TTypeArgument",$Parent:IW,$Init:function($){IW.$Init($);$.Type=null},KF:function(S){var R="";if(S.Type){R=IW.KF$(S.Type)}else R="Variant";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var nW={$ClassName:"TTypeAlias",$Parent:qV,$Init:function($){qV.$Init($);$.Type=null;$.TypeParameters=[]},KF:function(S){var R="";R=S.Name+" = "+IW.KF$(S.Type);return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var gC={$ClassName:"TTupleType",$Parent:OJ,$Init:function($){OJ.$Init($);$.Types=[]},KF:function(S){var R="";R="TupletType";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var jj={$ClassName:"TStringType",$Parent:rB,$Init:function($){rB.$Init($)},u1:function(S){var R="";R="String";return R},Destroy:TObject.Destroy,zL:IW.zL,KF:rB.KF,u1$:function($){return $.ClassType.u1($)}};var tb={$ClassName:"TCustomTypeMember",$Parent:qV,$Init:function($){qV.$Init($);$.TypeParameters=[];$.Visibility=0;$.IsStatic=false;$.TypeArguments=[]},zL:function(S,gw){IW.zL(S,gw);S.Visibility=0;return S},Destroy:TObject.Destroy,zL$:function($){return $.ClassType.zL.apply($.ClassType,arguments)},KF:IW.KF};var VN={$ClassName:"TClassTypeMember",$Parent:tb,$Init:function($){tb.$Init($);$.Visibility=0;$.IsStatic=false},Destroy:TObject.Destroy,zL:tb.zL,KF:IW.KF};var eV={$ClassName:"TPropertyMemberDeclaration",$Parent:VN,$Init:function($){VN.$Init($);$.Nullable=false;$.Type=null},KF:function(S){var R="";var Ds=0;var ss=null;R=IW.C4(S.ClassType)+Vv(S.Name);if(S.TypeArguments.length>0){var Rx=[];R+="{<";Rx=S.TypeArguments;var $t7;for(Ds=0,$t7=Rx.length;Ds<$t7;Ds++){ss=Rx[Ds];R+=IW.KF$(ss)}
R+=">}"}
R+=": ";R+=(S.Type)?IW.KF$(S.Type):"Variant";R+=";";if(S.Nullable)R+=" \/\/ nullable";R+="\r\n";return R},Destroy:TObject.Destroy,zL:tb.zL,KF$:function($){return $.ClassType.KF($)}};var AY={$ClassName:"TParameter",$Parent:qV,$Init:function($){qV.$Init($);$.DefaultValue="";$.IsRest=$.IsOptional=false;$.AccessibilityModifier=0;$.Type=null},KF:function(S){var R="";R=S.Name+": "+IW.KF$(S.Type);if(S.DefaultValue!="")R+=" = "+S.DefaultValue;if(S.IsRest)R+=" {...}";return R},Qn:function(S,jB){var R="";R=Vv(S.Name);if(!jB){R+=": ";if(S.Type){R+=IW.KF$(S.Type)}else R+="Variant"}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var X6={$ClassName:"TObjectType",$Parent:OJ,$Init:function($){OJ.$Init($);$.Members=[]},KF:function(S){var R="";var Y5=0;var Hg=null;var Oa=[];IW.IK(S.ClassType);Oa=S.Members;var $t8;for(Y5=0,$t8=Oa.length;Y5<$t8;Y5++){Hg=Oa[Y5];R+=IW.KF$(Hg)}
IW.Tq(S.ClassType);R+=IW.C4(S.ClassType)+"end;";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var We={$ClassName:"TNamespaceDeclaration",$Parent:qV,$Init:function($){qV.$Init($)},Destroy:TObject.Destroy,zL:IW.zL,KF:IW.KF};var r5={$ClassName:"TNamedType",$Parent:Xv,$Init:function($){Xv.$Init($);$.Arguments=[];$.Ci=""},Ys:function(S,gW,sI){IW.zL(S,gW);S.Ci=sI;return S},KF:function(S){var R="";var hA=0;var h3=null;R=Xv.KF(S);if(S.Arguments.length>0){var AL=[];R+="{<";AL=S.Arguments;var $t9;for(hA=0,$t9=AL.length;hA<$t9;hA++){h3=AL[hA];R+=IW.KF$(h3)}
R+=">}"}
return R},u1:function(S){var R="";R=S.Ci;return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)},u1$:function($){return $.ClassType.u1($)}};var kh={$ClassName:"TModuleDeclaration",$Parent:qV,$Init:function($){qV.$Init($);$.Modules=[];$.Variables=[];$.Exports=[];$.Functions=[];$.Interfaces=[];$.Classes=[]},KF:function(S){var R="";var ly=0;var iV=null,PQ=0;var XP=null,Yk=0;var Tc=null;R="";if(S.Classes.length+S.Interfaces.length>0){var MK=[],pD=[];R+="type"+"\r\n";IW.IK(S.ClassType);pD=S.Classes;var $tA;for(ly=0,$tA=pD.length;ly<$tA;ly++){iV=pD[ly];R=R+IW.KF$(iV)}
MK=S.Interfaces;var $tB;for(PQ=0,$tB=MK.length;PQ<$tB;PQ++){XP=MK[PQ];R=R+IW.KF$(XP)}
IW.Tq(S.ClassType)}
if(S.Variables.length>0){var AR=[];R+="var"+"\r\n";IW.IK(S.ClassType);AR=S.Variables;var $tC;for(Yk=0,$tC=AR.length;Yk<$tC;Yk++){Tc=AR[Yk];R=R+IW.KF$(Tc)}
IW.Tq(S.ClassType)}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var el={$ClassName:"TMethodDeclaration",$Parent:VN,$Init:function($){VN.$Init($);$.Type=null},KF:function(S){var R="";var VG="";var eM="";var jv=0,U4=0;var Lz=null,Ph=0;var Ga=[];jv=0;Ga=S.Type.ParameterList;var $tD;for(U4=0,$tD=Ga.length;U4<$tD;U4++){Lz=Ga[U4];if(Lz.IsOptional)++jv}
VG=IW.C4(S.ClassType);VG+=(S.Type.ResultType)?"function":"procedure";VG+=" "+S.Name;eM=";"+((jv>0)?" overload;":"");eM+="\r\n";R="";var $tE;for(Ph=0,$tE=jv;Ph<=$tE;Ph++){R+=VG+rt.Yv(S.Type,Ph)+eM}
return R},Destroy:TObject.Destroy,zL:tb.zL,KF$:function($){return $.ClassType.KF($)}};var pE={$ClassName:"TInterfaceDeclaration",$Parent:IW,$Init:function($){IW.$Init($);$.TypeParameters=[];$.Name="";$.Extends=[];$.Type=null},KF:function(S){var R="";var Ke=0;var sT=null,cO=0;R+=IW.C4(S.ClassType)+"J"+S.Name;if(S.TypeParameters.length>0){var wC=[];R+="{<";wC=S.TypeParameters;var $tF;for(Ke=0,$tF=wC.length;Ke<$tF;Ke++){sT=wC[Ke];R+=IW.KF$(sT)}
R+=">}"}
R+=" = class external";if(S.Extends.length>0){R+="(";R+=IW.KF$(S.Extends[0]);var $tG;for(cO=0+1,$tG=S.Extends.length;cO<$tG;cO++){R+=", "+IW.KF$(S.Extends[cO])}
R+=")"}
R+="\r\n";R+=IW.KF$(S.Type);R+="\r\n"+"\r\n";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var T1={$ClassName:"TIndexSignature",$Parent:tb,$Init:function($){tb.$Init($);$.IsStringIndex=false;$.Type=null},KF:function(S){var R="";R=IW.C4(S.ClassType)+"\/\/ ";R+="property Item["+S.Name+": ";R+=(S.IsStringIndex)?"String":"Integer";R+="]: "+IW.KF$(S.Type)+";"+"\r\n";return R},Destroy:TObject.Destroy,zL:tb.zL,KF$:function($){return $.ClassType.KF($)}};var nx={$ClassName:"TIndexMemberDeclaration",$Parent:VN,$Init:function($){VN.$Init($);$.IndexSignature=null},KF:function(S){var R="";R=IW.KF$(S.IndexSignature)+";"+"\r\n";return R},Destroy:TObject.Destroy,zL:tb.zL,KF$:function($){return $.ClassType.KF($)}};var aP={$ClassName:"TImportDeclaration",$Parent:qV,$Init:function($){qV.$Init($)},KF:function(S){var R="";console.log("not implemented: TImportDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var rt={$ClassName:"TFunctionType",$Parent:Xv,$Init:function($){Xv.$Init($);$.ParameterList=[];$.ResultType=null},KF:function(S){var R="";var GC=0;if(S.ParameterList.length>0){R="("+Q5.Lh(S.ParameterList[0],false);var $tH;for(GC=0+1,$tH=S.ParameterList.length;GC<$tH;GC++){R+="; "+Q5.Lh(S.ParameterList[GC],false)}
R+=")"}
if(S.ResultType)R+=": "+IW.KF$(S.ResultType);return R},Yv:function(S,vP){var R="";var DJ=false;var Ls=0,Mz=0;Ls=0;if(S.ParameterList.length>0){if(!(S.ParameterList[0].IsOptional&&vP==0)){Ls+=(S.ParameterList[0].IsOptional?1:0);DJ=S.ParameterList.length>=2&&cF(S.ParameterList[0],S.ParameterList[1])&&((!S.ParameterList[0].IsOptional)||Ls<vP);R="("+Q5.Lh(S.ParameterList[0],DJ);var $tI;for(Mz=0+1,$tI=S.ParameterList.length;Mz<$tI;Mz++){if(S.ParameterList[Mz].IsOptional&&Ls>=vP)break;Ls+=(S.ParameterList[Mz].IsOptional?1:0);R+=(DJ)?", ":"; ";DJ=Mz+1<S.ParameterList.length&&cF(S.ParameterList[0],S.ParameterList[1])&&((!S.ParameterList[Mz].IsOptional)||Ls<vP);R+=Q5.Lh(S.ParameterList[Mz],DJ)}
R+=")"}}
if(S.ResultType)R+=": "+IW.KF$(S.ResultType);return R},u1:function(S){var R="";R="function";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)},u1$:function($){return $.ClassType.u1($)}};var Q5={$ClassName:"TFunctionParameter",$Parent:qV,$Init:function($){qV.$Init($);$.Type=null;$.IsOptional=false},KF:function(S){var R="";R=Vv(S.Name)+": ";if(S.Type){R+=IW.KF$(S.Type)}else R+="Variant";return R},Lh:function(S,Jv){var R="";R=Vv(S.Name);if(!Jv){R+=": ";if(S.Type){R+=IW.KF$(S.Type)}else R+="Variant"}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var X9={$ClassName:"TFunctionDeclaration",$Parent:qV,$Init:function($){qV.$Init($);$.Type=null},KF:function(S){var R="";var GV="";var XL="";var c3=0,kP=0;var KI=null,nI=0;var h4=[];c3=0;h4=S.Type.ParameterList;var $tJ;for(kP=0,$tJ=h4.length;kP<$tJ;kP++){KI=h4[kP];if(KI.IsOptional)++c3}
GV=IW.C4(S.ClassType);GV+=(S.Type.ResultType)?"function":"procedure";GV+=" "+S.Name;XL=";"+((c3>0)?" overload;":"");XL+="\r\n";R="";var $tK;for(nI=0,$tK=c3;nI<=$tK;nI++){R+=GV+rt.Yv(S.Type,nI)+XL}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var kl={$ClassName:"TFloatType",$Parent:rB,$Init:function($){rB.$Init($)},u1:function(S){var R="";R="Float";return R},Destroy:TObject.Destroy,zL:IW.zL,KF:rB.KF,u1$:function($){return $.ClassType.u1($)}};var KG={$ClassName:"TExportDeclaration",$Parent:qV,$Init:function($){qV.$Init($);$.V4=false},KF:function(S){var R="";R="";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var ha={$ClassName:"TEnumerationItem",$Parent:IW,$Init:function($){IW.$Init($);$.Name=$.Value=""},KF:function(S){var R="";R=S.Name;return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var T9={$ClassName:"TEnumerationDeclaration",$Parent:qV,$Init:function($){qV.$Init($);$.Items=[]},KF:function(S){var R="";var Hw=0;var Sp=null;var Pw=[];R+=IW.C4(S.ClassType)+"T"+S.Name+" = Variant;"+"\r\n";R+=IW.C4(S.ClassType)+"T"+S.Name+"Helper = strict helper for T"+S.Name+"\r\n";IW.IK(S.ClassType);Pw=S.Items;var $tL;for(Hw=0,$tL=Pw.length;Hw<$tL;Hw++){Sp=Pw[Hw];R+=IW.C4(S.ClassType)+"const "+Vv(IW.KF$(Sp));if(Sp.Value!=""){try{R+=" = "+(parseInt(Sp.Value,10)).toString()+";"+"\r\n"}catch($e){R+=" = '"+Sp.Value+"';"+"\r\n"}}else R+=" = '"+Sp.Name+"';"+"\r\n"}
IW.Tq(S.ClassType);R+=IW.C4(S.ClassType)+"end;"+"\r\n";R+="\r\n";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var mS={$ClassName:"TDefinitionDeclaration",$Parent:qV,$Init:function($){qV.$Init($)},KF:function(S){var R="";console.log("not implemented: TDefinitionDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var w6={$ClassName:"TConstructorType",$Parent:Xv,$Init:function($){Xv.$Init($);$.ResultType=null;$.ParameterList=[]},KF:function(S){var R="";var Hl=0;if(S.ParameterList.length>0){R="("+Q5.Lh(S.ParameterList[0],false);var $tM;for(Hl=0+1,$tM=S.ParameterList.length;Hl<$tM;Hl++){R+="; "+Q5.Lh(S.ParameterList[Hl],false)}
R+=")"}
if(S.ResultType)R+=": "+IW.KF$(S.ResultType);return R},u1:function(S){var R="";R="constructor";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)},u1$:function($){return $.ClassType.u1($)}};var y7={$ClassName:"TConstructorDeclaration",$Parent:VN,$Init:function($){VN.$Init($);$.ParameterList=[];$.Type=null},KF:function(S){var R="";R=IW.C4(S.ClassType)+"constructor Create";if(S.Type)R+=IW.KF$(S.Type);R+=";"+"\r\n";return R},Destroy:TObject.Destroy,zL:tb.zL,KF$:function($){return $.ClassType.KF($)}};var KC={$ClassName:"TClassDeclaration",$Parent:pE,$Init:function($){pE.$Init($);$.Implements=[];$.Members=[]},KF:function(S){var R="";var Ym=0;var EW=0;var WX=null;var BN=[];R+=IW.C4(S.ClassType)+"J"+S.Name+" = class external '"+S.Name+"'";if(S.Extends.length>0){R+="(";R+=IW.KF$(S.Extends[0]);var $tN;for(Ym=0+1,$tN=S.Extends.length;Ym<$tN;Ym++){R+=", "+IW.KF$(S.Extends[Ym])}
R+=")"}
R+="\r\n";IW.IK(S.ClassType);BN=S.Members;var $tO;for(EW=0,$tO=BN.length;EW<$tO;EW++){WX=BN[EW];R+=IW.KF$(WX)}
IW.Tq(S.ClassType);R+=IW.C4(S.ClassType)+"end;"+"\r\n"+"\r\n";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var pe={$ClassName:"TCallSignature",$Parent:tb,$Init:function($){tb.$Init($);$.ParameterList=[];$.Type=null;$.TypeParameters=[]},KF:function(S){var R="";var ke=0;var Kz=null,BY=0;R="";if(S.TypeParameters.length>0){var aR=[];R+="{<";aR=S.TypeParameters;var $tP;for(ke=0,$tP=aR.length;ke<$tP;ke++){Kz=aR[ke];R+=IW.KF$(Kz)}
R+=">}"}
if(S.ParameterList.length>0){R+="(";var $tQ;for(BY=0,$tQ=(S.ParameterList.length-1);BY<$tQ;BY++){R+=AY.Qn(S.ParameterList[BY],false)+"; "}
R+=AY.Qn(S.ParameterList[(S.ParameterList.length-1)],false)+")"}
if(S.Type)R+=": "+IW.KF$(S.Type);return R},To:function(S,DS){var R="";var nu=false;var vL=0,M4=0;vL=0;if(S.ParameterList.length>0){if(!(S.ParameterList[0].IsOptional&&DS==0)){vL+=(S.ParameterList[0].IsOptional?1:0);nu=S.ParameterList.length>=2&&TV(S.ParameterList[0],S.ParameterList[1])&&((!S.ParameterList[0].IsOptional)||vL<DS);R="("+AY.Qn(S.ParameterList[0],nu);var $tR;for(M4=0+1,$tR=S.ParameterList.length;M4<$tR;M4++){if(S.ParameterList[M4].IsOptional&&vL>=DS)break;vL+=(S.ParameterList[M4].IsOptional?1:0);R+=(nu)?", ":"; ";nu=M4+1<S.ParameterList.length&&TV(S.ParameterList[M4],S.ParameterList[M4+1])&&((!S.ParameterList[M4].IsOptional)||vL<DS);R+=AY.Qn(S.ParameterList[M4],nu)}
R+=")"}}
if(S.Type)R+=": "+IW.KF$(S.Type);return R},Destroy:TObject.Destroy,zL:tb.zL,KF$:function($){return $.ClassType.KF($)}};var pk={$ClassName:"TBooleanType",$Parent:rB,$Init:function($){rB.$Init($)},u1:function(S){var R="";R="Boolean";return R},Destroy:TObject.Destroy,zL:IW.zL,KF:rB.KF,u1$:function($){return $.ClassType.u1($)}};var Np={$ClassName:"TArrayType",$Parent:OJ,$Init:function($){OJ.$Init($);$.Type=null},KF:function(S){var R="";R="array of "+IW.KF$(S.Type);return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var RB={$ClassName:"TAmbientVariableDeclaration",$Parent:IW,$Init:function($){IW.$Init($);$.IsConst=false;$.AmbientBindingList=[]},KF:function(S){var R="";var Z5=0;var LA=null;var jH=[];jH=S.AmbientBindingList;var $tS;for(Z5=0,$tS=jH.length;Z5<$tS;Z5++){LA=jH[Z5];R+=IW.C4(S.ClassType)+IW.KF$(LA)}
R+=";"+"\r\n";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var UC={$ClassName:"TAmbientBodyElement",$Parent:IW,$Init:function($){IW.$Init($)},Destroy:TObject.Destroy,zL:IW.zL,KF:IW.KF};var dW={$ClassName:"TAmbientPropertyMemberDeclaration",$Parent:UC,$Init:function($){UC.$Init($);$.Visibility=0;$.IsStatic=false;$.Name=""},Destroy:TObject.Destroy,zL:IW.zL,KF:IW.KF};var dw={$ClassName:"TAmbientPropertyMemberDeclarationProperty",$Parent:dW,$Init:function($){dW.$Init($);$.Type=null},KF:function(S){var R="";R=IW.C4(S.ClassType);if(S.IsStatic)R+="class var ";R+=Vv(S.Name);R+=": "+((S.Type)?IW.KF$(S.Type):"Variant");R+=";"+"\r\n";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var LF={$ClassName:"TAmbientPropertyMemberDeclarationMethod",$Parent:dW,$Init:function($){dW.$Init($);$.CallSignature=null},KF:function(S){var R="";var u4="";var DD="";var kd=0,ZO=0;var pj=null,b2=0;var i5=[];kd=0;i5=S.CallSignature.ParameterList;var $tT;for(ZO=0,$tT=i5.length;ZO<$tT;ZO++){pj=i5[ZO];if(pj.IsOptional)++kd}
u4=IW.C4(S.ClassType);u4+=(S.CallSignature.Type)?"function":"procedure";u4+=" "+Vv(S.Name);DD=";"+((kd>0)?" overload;":"");DD+="\r\n";R="";var $tU;for(b2=0,$tU=kd;b2<=$tU;b2++){R+=u4+pe.To(S.CallSignature,b2)+DD}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var nt={$ClassName:"TAmbientModuleDeclaration",$Parent:IW,$Init:function($){IW.$Init($);$.Interfaces=[];$.Modules=[];$.Classes=[];$.Functions=[];$.TypeAliases=[];$.IdentifierPath="";$.Enums=[];$.Variables=[]},KF:function(S){var R="";var iQ=0,rF=0;var Lm=null,E7=0;var WO=null,je=0;var oe=null,TK=0;var Mq=null,wj=0;var S2=null,EET=0;var B1=null,Jq=0;var tO=null,yV=0;var OL=null,Pv=0;var MO=null;var hP=[],nM=[];R="\/\/"+S.IdentifierPath+"\r\n"+"\r\n";iQ=0;nM=S.Variables;var $tV;for(rF=0,$tV=nM.length;rF<$tV;rF++){Lm=nM[rF];if(Lm.IsConst)++iQ}
if(iQ>0){var X3=[];R+="const"+"\r\n";IW.IK(S.ClassType);X3=S.Variables;var $tW;for(E7=0,$tW=X3.length;E7<$tW;E7++){WO=X3[E7];if(WO.IsConst)R=R+IW.KF$(WO)}
IW.Tq(S.ClassType);R+="\r\n"}
if(S.Enums.length+S.Classes.length+S.Interfaces.length>0){var Uu=[],qJ=[],nr=[],TD=[];R+="type"+"\r\n";IW.IK(S.ClassType);qJ=S.Enums;var $tX;for(je=0,$tX=qJ.length;je<$tX;je++){oe=qJ[je];R+=IW.KF$(oe)}
Uu=S.Classes;var $tY;for(TK=0,$tY=Uu.length;TK<$tY;TK++){Mq=Uu[TK];R+=IW.KF$(Mq)}
TD=S.Interfaces;var $tZ;for(wj=0,$tZ=TD.length;wj<$tZ;wj++){S2=TD[wj];R+=IW.KF$(S2)}
nr=S.TypeAliases;var $ta;for(EET=0,$ta=nr.length;EET<$ta;EET++){B1=nr[EET];R+=IW.KF$(B1)}
IW.Tq(S.ClassType)}
hP=S.Modules;var $tb;for(Jq=0,$tb=hP.length;Jq<$tb;Jq++){tO=hP[Jq];R+=IW.KF$(tO)}
if(S.Functions.length>0){var us=[];us=S.Functions;var $tc;for(yV=0,$tc=us.length;yV<$tc;yV++){OL=us[yV];R+=IW.KF$(OL)}
R+="\r\n"}
if(S.Variables.length-iQ>0){var f6=[];R+="var"+"\r\n";IW.IK(S.ClassType);f6=S.Variables;var $td;for(Pv=0,$td=f6.length;Pv<$td;Pv++){MO=f6[Pv];if(!MO.IsConst)R=R+IW.KF$(MO)}
IW.Tq(S.ClassType);R+="\r\n"}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var d4={$ClassName:"TAmbientFunctionDeclaration",$Parent:qV,$Init:function($){qV.$Init($);$.CallSignature=null},KF:function(S){var R="";var zs="";var AX="";var s6=0,Ps=0;var CZ=null,en=0;var MC=[];s6=0;MC=S.CallSignature.ParameterList;var $te;for(Ps=0,$te=MC.length;Ps<$te;Ps++){CZ=MC[Ps];if(CZ.IsOptional)++s6}
zs=IW.C4(S.ClassType);zs+=(S.CallSignature.Type)?"function":"procedure";zs+=" "+S.Name;AX=";"+((s6>0)?" overload;":"");AX+="\r\n";R="";var $tf;for(en=0,$tf=s6;en<=$tf;en++){R+=zs+pe.To(S.CallSignature,en)+AX}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var D9={$ClassName:"TAmbientDeclaration",$Parent:qV,$Init:function($){qV.$Init($);$.Variables=[];$.Namespaces=[];$.Modules=[];$.Classes=[];$.Functions=[];$.Enums=[]},KF:function(S){var R="";var Ya=0;var KH=null,hq=0;var eI=null,YN=0;var I7=null,cJ=0;var w3=null;var CI=[],JL=[],SX=[];SX=S.Functions;var $tg;for(Ya=0,$tg=SX.length;Ya<$tg;Ya++){KH=SX[Ya];R+=IW.KF$(KH)}
JL=S.Modules;var $th;for(hq=0,$th=JL.length;hq<$th;hq++){eI=JL[hq];R+=IW.KF$(eI)}
if(S.Classes.length>0){var qm=[];R+="type"+"\r\n";IW.IK(S.ClassType);qm=S.Classes;var $ti;for(YN=0,$ti=qm.length;YN<$ti;YN++){I7=qm[YN];R=R+IW.KF$(I7)}
IW.Tq(S.ClassType)}
if(S.Variables.length>0){CI=S.Variables;var $tj;for(cJ=0,$tj=CI.length;cJ<$tj;cJ++){w3=CI[cJ];R=R+IW.KF$(w3)}}
return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var Pq={$ClassName:"TAmbientConstructorDeclaration",$Parent:UC,$Init:function($){UC.$Init($);$.ParameterList=[]},KF:function(S){var R="";var yW=0;R=IW.C4(S.ClassType)+"constructor Create";if(S.ParameterList.length>0){R+="(";var $tk;for(yW=0,$tk=(S.ParameterList.length-1);yW<$tk;yW++){R+=Q5.Lh(S.ParameterList[yW],false)+"; "}
R+=Q5.Lh(S.ParameterList[(S.ParameterList.length-1)],false)+")";R+=")"}
R+=";"+"\r\n";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var sQ={$ClassName:"TAmbientClassDeclaration",$Parent:IW,$Init:function($){IW.$Init($);$.Members=[];$.Name="";$.Extends=[];$.Implements=[]},KF:function(S){var R="";var No=0;var ZW=0,LP=0;var oz=null,FL=0;var lh=[];R+=IW.C4(S.ClassType)+"J"+S.Name+" = class external '"+S.Name+"'";if(S.Extends.length>0){R+="(";R+=IW.KF$(S.Extends[0]);var $tl;for(No=0+1,$tl=S.Extends.length;No<$tl;No++){R+=", "+IW.KF$(S.Extends[No])}
R+=")"}
R+="\r\n";ZW=0;IW.IK(S.ClassType);lh=S.Members;var $tm;for(LP=0,$tm=lh.length;LP<$tm;LP++){oz=lh[LP];FL=($Is(oz,dW))?$As(oz,dW).Visibility:0;if(ZW!=FL){IW.Tq(S.ClassType);R+=IW.C4(S.ClassType);switch(FL){case 0:R+="public"+"\r\n";break;case 1:R+="protected"+"\r\n";break;case 2:R+="private"+"\r\n";break}
IW.IK(S.ClassType);ZW=FL}
R+=IW.KF$(oz)}
IW.Tq(S.ClassType);R+=IW.C4(S.ClassType)+"end;"+"\r\n"+"\r\n";return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var pw={$ClassName:"TAmbientBinding",$Parent:qV,$Init:function($){qV.$Init($);$.Type=null},KF:function(S){var R="";R=S.Name+": "+IW.KF$(S.Type);return R},Destroy:TObject.Destroy,zL:IW.zL,KF$:function($){return $.ClassType.KF($)}};var KO=["amPublic","amPrivate","amProtected"];function TV(n5,Ql){var R=false;R=(!(n5.Type!==null)!=!(n5.Type!==null));if(R&&(n5.Type!==null))R=IW.KF$(n5.Type)==IW.KF$(Ql.Type);return R};function cF(pF,tX){var R=false;R=(!(pF.Type!==null)!=!(pF.Type!==null));if(R&&(pF.Type!==null))R=IW.KF$(pF.Type)==IW.KF$(tX.Type);return R};function Vv(Rv){var R="";R=Rv;if((["type","export","label","public","protected","private","abstract","default","const","constructor","property","function","class","interface","string","end","uses","div","object"].indexOf((Rv).toLowerCase())>=0))R="&"+R;if((["length","include","exclude"].indexOf((Rv).toLowerCase())>=0))R="_"+R;return R};var m=null;var m=require("typescript");var Bs=0;var d=[],MX="",oH="",gE=null;var gE=zj();d=process.argv;d.splice(0,2);if(d.length==0){return"Usage: ts2pas inputfile [outputfile]"}
MX=d[0];oH=d[0]+".pas";if(d.length==2)oH=d[1];Wu(MX,oH);
