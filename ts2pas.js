#! /usr/bin/env node
/**
* ts2pas
* https://github.com/CWBudde/TS2Pas
*
* Copyright (c) 2016 Christian-W. Budde
* Licensed under the MIT license.
*/

var TObject={$ClassName:"TObject",$Parent:null,ClassName:function(s){return s.$ClassName},ClassType:function(s){return s},ClassParent:function(s){return s.$Parent},$Init:function(){},Create:function(s){return s},Destroy:function(s){for(var prop in s)if(s.hasOwnProperty(prop))delete s.prop},Destroy$:function(s){return s.ClassType.Destroy(s)},Free:function(s){if(s!==null)s.ClassType.Destroy(s)}}
var Exception={$ClassName:"Exception",$Parent:TObject,$Init:function(){var FMessage=""},Create:function(s,Msg){s.FMessage=Msg;return s}}
function stringRepeat(s,n){if(n<1)return'';var r='';while(n>0){if(n&1)r+=s;n>>=1,s+=s};return r};function DupeString(s,n){return stringRepeat(s,n)}
function $W(e){return e.ClassType?e:Exception.Create($New(Exception),e.constructor.name+", "+e.message)}
function $New(c){var i={ClassType:c};c.$Init(i);return i}
function $Is(o,c){if(o===null)return false;return $Inh(o.ClassType,c)};function $Inh(s,c){if(s===null)return false;while((s)&&(s!==c))s=s.$Parent;return(s)?true:false};function $Extend(base,sub,props){function F(){};F.prototype=base.prototype;sub.prototype=new F();sub.prototype.constructor=sub;for(var n in props){if(props.hasOwnProperty(n)){sub.prototype[n]=props[n]}}}
function $AsIntf(o,i){if(o===null)return null;var r=o.ClassType.$Intf[i].map(function(e){return function(){var arg=Array.prototype.slice.call(arguments);arg.splice(0,0,o);return e.apply(o,arg)}});r.O=o;return r};function $As(o,c){if((o===null)||$Is(o,c))return o;throw Exception.Create($New(Exception),"Cannot cast instance of type \""+o.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"")}
function JError(){}
$Extend(Object,JError,{});function LW(q6){bF(q6,(q6).split(".")[0]+".pas")};function bF(De,AJ){if(De==(De).split(".")[0])De+=".d.ts";BK.readFile(De,function(h9,We){var rJ="",uC=null,N8="";rJ=We.toString("utf8");uC=F.Y($New(F));uC.Name=(De).split(".")[0];N8=F.t(uC,rJ);BK.writeFile(AJ,N8,function(jn){});uC=null})};function Copy$ih(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$ih($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$dh(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$dh($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$X5(s,d){d.persistent=s.persistent;return d}
function Clone$X5($){return{persistent:$.persistent}}
function Copy$Ob(s,d){d.curr=s.curr;d.prev=s.prev;return d}
function Clone$Ob($){return{curr:$.curr,prev:$.prev}}
function Copy$Wn(s,d){d.curr=s.curr;d.prev=s.prev;return d}
function Clone$Wn($){return{curr:$.curr,prev:$.prev}}
function Copy$zU(s,d){d.persistent=s.persistent;d.interval=s.interval;return d}
function Clone$zU($){return{persistent:$.persistent,interval:$.interval}}
function Copy$Rj(s,d){d.encoding=s.encoding;d.flag=s.flag;return d}
function Clone$Rj($){return{encoding:$.encoding,flag:$.flag}}
function Copy$e2(s,d){d.encoding=s.encoding;d.flag=s.flag;return d}
function Clone$e2($){return{encoding:$.encoding,flag:$.flag}}
function Copy$gd(s,d){d.flags=s.flags;d.encoding=s.encoding;d.string_=s.string_;return d}
function Clone$gd($){return{flags:$.flags,encoding:$.encoding,string_:$.string_}}
function Copy$Kf(s,d){d.bufferSize=s.bufferSize;d.encoding=s.encoding;d.fd=s.fd;d.mode=s.mode;d.flags=s.flags;return d}
function Clone$Kf($){return{bufferSize:$.bufferSize,encoding:$.encoding,fd:$.fd,mode:$.mode,flags:$.flags}}
function Copy$P7(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$P7($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$wy(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$wy($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function TV(){var R=null;R=require("fs");return R};function l3(){var R=null;R=require("stream");return R};function Bk(){var R=null;R=require("events");return R};var F={$ClassName:"TTranslator",$Parent:TObject,$Init:function($){TObject.$Init($);$.NeedsSemicolon=false;$.Name="";$.HT=[];$.SI=[];$.Nj=[];$.gS=$.T9=null},mC:function(S){return S.gS.getTokenText()},BS:function(S){return S.gS.getToken()},Q:function(S,kX){if(!(S.gS.isIdentifier()||kX.indexOf(F.BS(S))>=0))F.i(S,0)},n9:function(S,ia){if(!(ia.indexOf(F.BS(S))>=0))F.i(S,0)},yO:function(S,GY){if(F.BS(S)!=GY)F.i(S,GY)},Vj:function(S){var R="";var rk=0;var Df=null,Ak=0;var dT=null,Wz=0;var a3=null;var jr=[],kP=[],pY=[];R="unit "+S.Name+";"+"\r\n"+"\r\n";R+="interface"+"\r\n"+"\r\n";pY=S.Nj;var $t1;for(rk=0,$t1=pY.length;rk<$t1;rk++){Df=pY[rk];R=R+Vm.nK$(Df)}
kP=S.SI;var $t2;for(Ak=0,$t2=kP.length;Ak<$t2;Ak++){dT=kP[Ak];R=R+Vm.nK$(dT)}
jr=S.HT;var $t3;for(Wz=0,$t3=jr.length;Wz<$t3;Wz++){a3=jr[Wz];R=R+Vm.nK$(a3)}
return R},Y:function(S){S.NeedsSemicolon=false;return S},i:function(S,Wx){var vD=null,QJ="";vD=Hf.getLineAndCharacterOfPosition(S.T9,S.gS.getTokenPos());QJ=("Unknown token \""+F.mC(S).toString()+"\" in this context ("+(vD.line+1).toString()+":"+(vD.character+1).toString()+")");if(Wx>0)QJ+=("; Expected ("+Wx.toString()+")");console.trace("");throw Exception.Create($New(Exception),QJ)},cJ:function(S){var R=null;F.W(S,true);R=Vm.ee$($New(B5),$AsIntf(S,"NB"));R.Name=F.mC(S);if(F.v(S,54,false))R.Type=F.h(S);if(S.NeedsSemicolon)F.n9(S,[23,24].slice());return R},K:function(S){var R=null;var R9=[],yL=0,TP=false,UB=null;F.yO(S,73);R=Vm.ee$($New(UM),$AsIntf(S,"NB"));F.W(S,true);R.Name=F.mC(S);F.b(S,[83,106,15].slice(),true);if(F.BS(S)==83){F.W(S,true);R.Extends.push(F.f(S))}
if(F.BS(S)==106){F.W(S,true);R.Implements.push(F.V(S));while(F.BS(S)==24){F.W(S,true);R.Implements.push(F.V(S))}}
F.yO(S,15);R9.push(92,9,82,16,23);F.I(S,R9,false);while(F.BS(S)!=16){yL=0;switch(F.BS(S)){case 112:yL=0;F.I(S,[92].slice(),true);break;case 111:yL=1;F.I(S,[92].slice(),true);break;case 110:yL=2;F.I(S,[92].slice(),true);break}
TP=F.BS(S)==113;if(TP)F.I(S,[92,17].slice(),true);UB=F.n(S);UB.Visibility=yL;UB.IsStatic=TP;R.Members.push(UB);if(F.BS(S)==23)F.I(S,R9,false)}
F.yO(S,16);return R},n:function(S){var R=null;var B2="",OJ=false;F.Q(S,[92,17,9,82].slice());if(F.BS(S)==17){R=F.J(S)}else{B2=S.gS.getTokenValue();F.b(S,[25,53,54,17].slice(),true);if(F.BS(S)==25){F.z(S);F.b(S,[53,54,17].slice(),true)}
OJ=F.BS(S)==53;if(OJ)F.v(S,54,true);switch(F.BS(S)){case 54:R=F.j(S);$As(R,db).Nullable=OJ;break;case 17:if((B2).toLowerCase()=="constructor"){R=F.c(S)}else R=F.L(S);break}
R.Name=B2}
if(S.NeedsSemicolon)F.n9(S,[23,24,16].slice());return R},p:function(S){var R=null;F.yO(S,122);R=Vm.ee$($New(Yb),$AsIntf(S,"NB"));F.b(S,[102,108,74,87,73,81,125,126].slice(),true);switch(F.BS(S)){case 102:case 108:case 74:R.Variables.push(F.O(S));break;case 87:R.Functions.push(F.ch(S));break;case 73:R.Classes.push(F.K(S));break;case 81:R.Enums.push(F.G(S));break;case 125:R.Modules.push(F.U(S));break;case 126:R.Namespaces.push(F.v7(S));break}
return R},G:function(S){var R=null;return R},ch:function(S){var R=null;F.yO(S,87);R=Vm.ee$($New(Qu),$AsIntf(S,"NB"));F.W(S,true);R.Name=F.mC(S);R.CallSignature=F.D(S);if(S.NeedsSemicolon)F.n9(S,[23].slice());return R},U:function(S){var R=null;var Dm=[],Dm=[82,102,87,73,107,81,125,89,16,23].slice();var UQ=false;F.yO(S,125);R=Vm.ee$($New(tB),$AsIntf(S,"NB"));F.I(S,[9].slice(),true);R.IdentifierPath=F.V(S);F.yO(S,15);F.b(S,Dm,true);while(F.BS(S)!=16){UQ=F.BS(S)==82;if(UQ){F.b(S,Dm.concat([77,56]),true);if(F.BS(S)==77){UQ=false;F.W(S,false);F.v(S,23,false);F.b(S,Dm,true)}
if(F.BS(S)==56){UQ=false;F.W(S,false);F.v(S,23,false);F.b(S,Dm,true)}}
switch(F.BS(S)){case 102:R.Variables.push(F.O(S));break;case 87:R.Functions.push(F.ch(S));break;case 73:R.Classes.push(F.K(S));F.b(S,Dm,true);break;case 125:R.Modules.push(F.U(S));F.b(S,Dm,true);break;case 107:R.Interfaces.push(F.l(S));F.b(S,Dm,true);break;case 89:F.y(S);if(!S.NeedsSemicolon)F.b(S,Dm,true);break}
if(F.BS(S)==23)F.b(S,Dm,true)}
F.yO(S,16);return R},v7:function(S){var R=null;return R},O:function(S){var R=null;F.n9(S,[102,108,74].slice());R=Vm.ee$($New(cM),$AsIntf(S,"NB"));R.IsConst=F.BS(S)==74;do{R.AmbientBindingList.push(F.cJ(S))}while(!(F.BS(S)==23||(!S.NeedsSemicolon)&&(!S.gS.isIdentifier())));return R},J:function(S){var R=null;R=Vm.ee$($New(yE),$AsIntf(S,"NB"));R.Type=F.r(S);F.n9(S,[23,16].slice());return R},D:function(S){var R=null;R=Vm.ee$($New(SS),$AsIntf(S,"NB"));F.b(S,[17,25].slice(),true);if(F.BS(S)==25){F.z(S);F.v(S,17,true)}
F.yO(S,17);F.I(S,[112,110,111,22,18].slice(),true);while(F.BS(S)!=18){R.ParameterList.push(F.B(S));if(F.BS(S)==24)F.I(S,[22].slice(),false)}
F.n9(S,[18].slice());F.b(S,[54,23].slice(),true);if(F.BS(S)==54)R.Type=F.M(S);return R},ri:function(S){var R=null;var ts=[],SL=0,ns=false,c1=null;F.yO(S,73);R=Vm.ee$($New(wV),$AsIntf(S,"NB"));F.W(S,true);R.Name=F.mC(S);console.log("Read class: "+R.Name);F.b(S,[83,106,15].slice(),true);if(F.BS(S)==83){F.W(S,true);R.Extends.push(F.f(S))}
if(F.BS(S)==106){F.W(S,true);R.Implements.push(F.V(S));while(F.BS(S)==24){F.W(S,true);R.Implements.push(F.V(S))}}
F.yO(S,15);F.yO(S,15);ts.push(92,9,82,16,23);F.I(S,ts,false);while(F.BS(S)!=16){SL=0;switch(F.BS(S)){case 112:SL=0;F.I(S,[92].slice(),true);break;case 111:SL=1;F.I(S,[92].slice(),true);break;case 110:SL=2;F.I(S,[92].slice(),true);break}
ns=F.BS(S)==113;if(ns)F.I(S,[92,17].slice(),true);c1=F.n(S);c1.Visibility=SL;c1.IsStatic=ns;R.Members.push(c1);if(F.BS(S)==23)F.I(S,ts,false)}
return R},m:function(S){var R=null;var N9="",eV=false;F.Q(S,[92,17,9,82].slice());if(F.BS(S)==17){R=F.J(S)}else{N9=F.mC(S);F.b(S,[25,53,54,17].slice(),true);if(F.BS(S)==25){F.z(S);F.b(S,[53,54,17].slice(),true)}
eV=F.BS(S)==53;if(eV)F.v(S,54,true);switch(F.BS(S)){case 54:R=F.j(S);$As(R,db).Nullable=eV;break;case 17:if((N9).toLowerCase()=="constructor"){R=F.c(S)}else R=F.L(S);break}
R.Name=N9}
if(S.NeedsSemicolon)F.n9(S,[23,24,16].slice());return R},c:function(S){var R=null;R=Vm.ee$($New(pX),$AsIntf(S,"NB"));R.Type=F.r(S);if(S.NeedsSemicolon)F.n9(S,[23,16].slice());return R},dJ:function(S){var R=null;F.yO(S,92);R=Vm.ee$($New(pX),$AsIntf(S,"NB"));if(F.W(S,false)){F.v(S,17,false)}
F.yO(S,17);F.I(S,[112,110,111,22,18].slice(),true);while(F.BS(S)!=18){R.ParameterList.push(F.B(S));if(F.BS(S)==24)F.I(S,[22].slice(),false)}
F.yO(S,18);F.v(S,54,true);R.Type=F.h(S);return R},E:function(S){while(F.b(S,[82,122,107,125,89,1].slice(),true)){{var $t4=F.BS(S);if($t4==82){continue}
else if($t4==122){S.HT.push(F.p(S))}
else if($t4==107){S.SI.push(F.l(S))}
else if($t4==125){S.Nj.push(F.a(S))}
else if($t4==89){F.y(S)}
else if($t4==1){break}}}},w:function(S){var R=null;F.yO(S,81);R=Vm.ee$($New(p8),$AsIntf(S,"NB"));F.W(S,true);R.Name=F.mC(S);F.v(S,15,true);F.W(S,true);do{R.Items.push(F.Z(S))}while(!(!F.W(S,false)));F.yO(S,16);return R},Z:function(S){var R=null;F.Q(S,[]);R=Vm.ee$($New(PR),$AsIntf(S,"NB"));R.Name=F.mC(S);if(F.v(S,56,false)){F.v(S,8,true);R.Value=F.mC(S);F.s(S)}
F.yO(S,24);return R},e:function(S){var R=null;F.yO(S,82);R=Vm.ee$($New(fs),$AsIntf(S,"NB"));F.I(S,[77].slice(),true);R.fU=F.BS(S)==82||(F.mC(S)).toLowerCase()=="default";if(R.fU)F.W(S,true);R.Name=F.mC(S);F.v(S,23,true);return R},j:function(S){var R=null;R=Vm.ee$($New(db),$AsIntf(S,"NB"));R.Type=F.M(S);if(S.NeedsSemicolon)F.Q(S,[23,16,24].slice());return R},x:function(S){var R=null;F.yO(S,87);R=Vm.ee$($New(TY),$AsIntf(S,"NB"));F.W(S,true);R.Name=F.mC(S);F.v(S,17,true);R.Type=F.r(S);return R},g:function(S){var R=null;var TW=false;F.Q(S,[22].slice());TW=F.BS(S)==22;if(TW)F.W(S,true);R=Vm.ee$($New(V2),$AsIntf(S,"NB"));R.Name=F.mC(S);F.b(S,[53,54,18].slice(),true);R.Nullable=F.BS(S)==53;if(R.Nullable)F.b(S,[54].slice(),true);if(F.BS(S)==54)R.Type=F.M(S);return R},r:function(S){var R=null;F.yO(S,17);R=Vm.ee$($New(Fq),$AsIntf(S,"NB"));while(F.I(S,[22].slice(),false)){R.Parameters.push(F.g(S));F.n9(S,[24,18,23].slice());if(F.BS(S)==18)break}
F.n9(S,[18,23].slice());if(F.b(S,[54,34].slice(),false))R.ResultType=F.M(S);return R},I:function(S,gL,l2){var R=false;F.s(S);R=S.gS.isIdentifier()||gL.indexOf(F.BS(S))>=0;if((!R)&&l2)F.i(S,0);return R},W:function(S,OK){var R=false;F.s(S);R=S.gS.isIdentifier();if((!R)&&OK)F.i(S,69);return R},V:function(S){var R="";F.Q(S,[9].slice());R=F.mC(S);while(F.v(S,21,false)){F.W(S,true);R+="."+F.mC(S)}
return R},y:function(S){var R=null;F.yO(S,89);R=Vm.ee$($New(DI),$AsIntf(S,"NB"));F.I(S,[37].slice(),true);if(F.BS(S)==37){F.v(S,116,true);F.W(S,true);F.v(S,133,true);F.v(S,9,true)}else{F.v(S,56,true);F.W(S,true)}
if(S.NeedsSemicolon)F.v(S,23,true);return R},k:function(S){var R=null;F.yO(S,19);R=Vm.ee$($New(dw),$AsIntf(S,"NB"));F.W(S,true);F.v(S,54,true);F.b(S,[130,128].slice(),true);R.IsStringIndex=F.BS(S)==130;F.v(S,20,true);F.v(S,54,true);R.Type=F.h(S);return R},l:function(S){var R=null;F.yO(S,107);R=Vm.ee$($New(Fw),$AsIntf(S,"NB"));F.W(S,true);R.Name=F.mC(S);F.b(S,[25,83,15].slice(),true);if(F.BS(S)==25){F.z(S);F.b(S,[83,15].slice(),true)}
while(F.BS(S)==83){F.W(S,true);R.Extends.push(F.f(S));while(F.BS(S)==24){F.W(S,true);R.Extends.push(F.f(S))}}
F.yO(S,15);R.Type=F.X(S);F.yO(S,16);return R},L:function(S){var R=null;R=Vm.ee$($New(NV),$AsIntf(S,"NB"));R.Type=F.r(S);if(S.NeedsSemicolon)F.n9(S,[23,16].slice());return R},a:function(S){var R=null;var P4=[],P4=[73,82,81,89,125,87,107,102,23].slice();F.yO(S,125);R=Vm.ee$($New(vS),$AsIntf(S,"NB"));F.I(S,[9].slice(),true);R.Name=F.V(S);F.yO(S,15);F.b(S,P4,true);while(F.BS(S)!=16){switch(F.BS(S)){case 73:R.Classes.push(F.K(S));break;case 82:R.Exports.push(F.e(S));break;case 81:F.w(S);break;case 87:R.Functions.push(F.x(S));break;case 89:F.y(S);break;case 125:R.Modules.push(F.a(S));break;case 107:R.Interfaces.push(F.l(S));break;case 102:R.Variables.push(F.N(S));break}
F.b(S,P4,true)}
F.yO(S,16);return R},X:function(S){var R=null;var sz=[],sz=[9,8,92,17,78,19,16].slice();F.yO(S,15);R=Vm.ee$($New(ms),$AsIntf(S,"NB"));F.I(S,sz,true);while(F.BS(S)!=16){R.Members.push(F.u(S));if(([23,24].indexOf(F.BS(S))>=0))F.I(S,sz,true)}
F.yO(S,16);return R},B:function(S){var R=null;F.Q(S,[112,110,111,22].slice());R=Vm.ee$($New(Dt),$AsIntf(S,"NB"));R.Name=F.mC(S);R.IsRest=F.BS(S)==22;if(R.IsRest){F.W(S,true);R.Name=F.mC(S);if(F.v(S,54,false))R.Type=F.h(S);F.yO(S,18);return R}
F.Q(S,[112,110,111].slice());switch(F.BS(S)){case 112:R.AccessibilityModifier=0;F.W(S,false);break;case 110:R.AccessibilityModifier=1;F.W(S,false);break;case 111:R.AccessibilityModifier=2;F.W(S,false);break}
F.Q(S,[]);F.b(S,[53,54,56,24,18].slice(),true);R.IsOptional=F.BS(S)==53;if(R.IsOptional)F.b(S,[54,56,24,18].slice(),true);if(F.BS(S)==54)R.Type=F.M(S);F.n9(S,[56,24,18].slice());if(F.BS(S)==56){F.W(S,true);R.DefaultValue=F.mC(S)}
F.n9(S,[24,18].slice());return R},C:function(S){var R=null;var dn=[],dn=[69,9,117,15,128,130,120,103,101,17].slice();var ii=null;F.n9(S,dn);switch(F.BS(S)){case 17:R=F.M(S);F.yO(S,18);F.s(S);break;case 69:R=Te.Qm($New(Te),$AsIntf(S,"NB"),F.V(S));if(F.BS(S)==25){$As(R,Te).Arguments.push(F.H(S));F.s(S)}
break;case 9:R=Te.Qm($New(Te),$AsIntf(S,"NB"),S.gS.getTokenValue());F.s(S);break;case 117:R=Vm.ee$($New(zv),$AsIntf(S,"NB"));F.s(S);break;case 128:R=Vm.ee$($New(v4),$AsIntf(S,"NB"));F.s(S);break;case 103:R=null;F.s(S);break;case 101:R=Vm.ee$($New(wh),$AsIntf(S,"NB"));$As(R,wh).Type=F.M(S);break;case 130:R=Vm.ee$($New(dU),$AsIntf(S,"NB"));F.s(S);break;case 120:R=Vm.ee$($New(pB),$AsIntf(S,"NB"));F.s(S);break;case 15:R=F.X(S);F.s(S);break}
while(F.BS(S)==19){ii=R;R=Vm.ee$($New(Ep),$AsIntf(S,"NB"));$As(R,Ep).Type=ii;F.v(S,20,true);F.s(S)}
return R},b:function(S,b4,sy){var R=false;R=b4.indexOf(F.s(S))>=0;if((!R)&&sy)F.i(S,0);return R},v:function(S,Jt,aQ){var R=false;R=F.s(S)==Jt;if((!R)&&aQ)F.i(S,Jt);return R},s:function(S){var R=0;R=S.gS.scan();return R},M:function(S){var R=null;var Wp=[],XX=null;Wp.push(69,9,117,15,128,130,120,103,101,17);F.b(S,Wp,true);if(F.BS(S)==17)return F.r(S);R=F.C(S);while(F.BS(S)==47){if(!$Is(R,Hl)){XX=R;R=Vm.ee$($New(Hl),$AsIntf(S,"NB"));$As(R,Hl).Types.push(XX)}
F.b(S,Wp,true);$As(R,Hl).Types.push(F.C(S))}
return R},h:function(S){var R=null;F.yO(S,54);R=F.M(S);return R},H:function(S){var R=null;F.yO(S,25);R=Vm.ee$($New(fY),$AsIntf(S,"NB"));R.Type=F.M(S);F.yO(S,27);return R},u:function(S){var R=null;var IN="",YS=false;F.Q(S,[9,8,110,92,78,17,19].slice());if(F.BS(S)==92)return F.dJ(S);if(F.BS(S)==17)return F.J(S);if(F.BS(S)==19)return F.k(S);if(S.gS.isIdentifier()||([9,8,78].indexOf(S.gS.getToken())>=0)){IN=F.mC(S);F.b(S,[53,54,17].slice(),true);YS=F.BS(S)==53;if(YS)F.v(S,54,true);switch(F.BS(S)){case 54:R=F.j(S);$As(R,db).Nullable=YS;break;case 17:R=F.L(S);break}
R.Name=IN}
return R},z:function(S){var R=null;F.yO(S,25);R=Vm.ee$($New(Ne),$AsIntf(S,"NB"));F.W(S,true);R.Name=F.mC(S);F.b(S,[83,27].slice(),true);if(F.BS(S)==83){R.ExtendsType=F.M(S);F.yO(S,27)}
return R},f:function(S){var R=null;F.Q(S,[]);R=Vm.ee$($New(nQ),$AsIntf(S,"NB"));R.Name=F.V(S);return R},N:function(S){var R=null;F.yO(S,102);R=Vm.ee$($New(jX),$AsIntf(S,"NB"));F.W(S,true);R.Name=F.mC(S);F.v(S,54,true);R.Type=F.M(S);return R},t:function(S,QV){var R="";S.gS=Hf.createScanner(0,true,0,QV);S.T9=Hf.createSourceFile("main",QV,0);try{F.E$(S)}catch($e){var yB=$W($e);console.error(yB.FMessage)}
R=F.Vj$(S);return R},Destroy:TObject.Destroy,Vj$:function($){return $.ClassType.Vj($)},E$:function($){return $.ClassType.E($)}};F.$Intf={NB:[]}
var bG={1:"Export",2:"Ambient",4:"Public",8:"Private",16:"Protected",32:"Static",64:"Abstract",128:"Async",256:"Default",512:"MultiLine",1024:"Synthetic",2048:"DeclarationFile",4096:"Let",8192:"Const",16384:"OctalLiteral",32768:"Namespace",65536:"ExportContext",131072:"ContainsThis"};var nY={1:"None",2:"IntrinsicNamedElement",4:"IntrinsicIndexedElement",8:"ClassElement",16:"UnknownElement"};var fr=["Warning","Error","Message"];var Ib=["vPublic","vProtected","vPrivate"];var Vm={$ClassName:"TCustomDeclaration",$Parent:TObject,$Init:function($){TObject.$Init($);$.US=null},CS:function(S){++d},ee:function(S,aR){S.US=aR;return S},sb:function(S){--d},qe:function(S){var R="";R=DupeString("  ",d);return R},Destroy:TObject.Destroy,ee$:function($){return $.ClassType.ee.apply($.ClassType,arguments)},nK$:function($){return $.ClassType.nK($)}};var Y9={$ClassName:"TCustomType",$Parent:Vm,$Init:function($){Vm.$Init($)},Destroy:TObject.Destroy,ee:Vm.ee,nK:Vm.nK};var i6={$ClassName:"TCustomNamedType",$Parent:Y9,$Init:function($){Y9.$Init($)},nK:function(S){var R="";R="J"+i6.xk$(S);return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)},xk$:function($){return $.ClassType.xk($)}};var Nc={$ClassName:"TPredefinedType",$Parent:i6,$Init:function($){i6.$Init($)},nK:function(S){var R="";R=i6.xk$(S);return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)},xk:i6.xk};var zv={$ClassName:"TVariantType",$Parent:Nc,$Init:function($){Nc.$Init($)},xk:function(S){var R="";R="Variant";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK:Nc.nK,xk$:function($){return $.ClassType.xk($)}};var Se={$ClassName:"TNamedDeclaration",$Parent:Vm,$Init:function($){Vm.$Init($);$.Name=""},Destroy:TObject.Destroy,ee:Vm.ee,nK:Vm.nK};var jX={$ClassName:"TVariableDeclaration",$Parent:Se,$Init:function($){Se.$Init($);$.Type=null},nK:function(S){var R="";console.log("not implemented: TVariableDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var Hl={$ClassName:"TUnionType",$Parent:Y9,$Init:function($){Y9.$Init($);$.Types=[]},nK:function(S){var R="";var iU=0;var L5=null;var R1=[];R="Variant {";R1=S.Types;var $t5;for(iU=0,$t5=R1.length;iU<$t5;iU++){L5=R1[iU];R+=Vm.nK$(L5)}
return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var nQ={$ClassName:"TTypeReference",$Parent:Vm,$Init:function($){Vm.$Init($);$.Name="";$.Arguments=[]},nK:function(S){var R="";var tP=0;R=S.Name;if(S.Arguments.length>0){R+=" {"+Vm.nK$(S.Arguments[0]);var $t6;for(tP=0+1,$t6=S.Arguments.length;tP<$t6;tP++){R+=", "+Vm.nK$(S.Arguments[tP])}
R+="} "}
return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var Ne={$ClassName:"TTypeParameter",$Parent:Vm,$Init:function($){Vm.$Init($);$.Name="";$.ExtendsType=null},nK:function(S){var R="";console.log("not implemented: TTypeParameter.GetAsCode");return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var wh={$ClassName:"TTypeOfType",$Parent:i6,$Init:function($){i6.$Init($);$.Type=null},xk:function(S){var R="";R="type of";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK:i6.nK,xk$:function($){return $.ClassType.xk($)}};var fY={$ClassName:"TTypeArgument",$Parent:Vm,$Init:function($){Vm.$Init($);$.Name="";$.Type=null},nK:function(S){var R="";console.log("not implemented: TTypeArgument.GetAsCode");return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var dU={$ClassName:"TStringType",$Parent:Nc,$Init:function($){Nc.$Init($)},xk:function(S){var R="";R="String";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK:Nc.nK,xk$:function($){return $.ClassType.xk($)}};var Dt={$ClassName:"TParameter",$Parent:Se,$Init:function($){Se.$Init($);$.DefaultValue="";$.IsRest=$.IsOptional=false;$.Type=null;$.AccessibilityModifier=0},nK:function(S){var R="";R=S.Name+": "+Vm.nK$(S.Type);if(S.DefaultValue!="")R+=" = "+S.DefaultValue;return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var ms={$ClassName:"TObjectType",$Parent:Y9,$Init:function($){Y9.$Init($);$.Members=[]},nK:function(S){var R="";var ad=0;var y1=null;var fm=[];Vm.CS(S.ClassType);fm=S.Members;var $t7;for(ad=0,$t7=fm.length;ad<$t7;ad++){y1=fm[ad];R+=Vm.nK$(y1)}
Vm.sb(S.ClassType);R+=Vm.qe(S.ClassType)+"end;";R+="\r\n"+"\r\n";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var Ct={$ClassName:"TNamespaceDeclaration",$Parent:Se,$Init:function($){Se.$Init($)},Destroy:TObject.Destroy,ee:Vm.ee,nK:Vm.nK};var Te={$ClassName:"TNamedType",$Parent:i6,$Init:function($){i6.$Init($);$.Fh="";$.Arguments=[]},xk:function(S){var R="";R=S.Fh;return R},Qm:function(S,ot,OL){Vm.ee(S,ot);S.Fh=OL;return S},Destroy:TObject.Destroy,ee:Vm.ee,nK:i6.nK,xk$:function($){return $.ClassType.xk($)}};var vS={$ClassName:"TModuleDeclaration",$Parent:Se,$Init:function($){Se.$Init($);$.Modules=[];$.Variables=[];$.Exports=[];$.Functions=[];$.Interfaces=[];$.Classes=[]},nK:function(S){var R="";var Go=0;var LG=null,AC=0;var sf=null,FV=0;var u1=null;if(S.Classes.length>0){var DQ=[];R+="type"+"\r\n";Vm.CS(S.ClassType);DQ=S.Classes;var $t8;for(Go=0,$t8=DQ.length;Go<$t8;Go++){LG=DQ[Go];R=R+Vm.nK$(LG)}
Vm.sb(S.ClassType)}
if(S.Interfaces.length>0){var Yp=[];R+="type"+"\r\n";Vm.CS(S.ClassType);Yp=S.Interfaces;var $t9;for(AC=0,$t9=Yp.length;AC<$t9;AC++){sf=Yp[AC];R=R+Vm.nK$(sf)}
Vm.sb(S.ClassType)}
if(S.Variables.length>0){var i7=[];R+="var"+"\r\n";Vm.CS(S.ClassType);i7=S.Variables;var $tA;for(FV=0,$tA=i7.length;FV<$tA;FV++){u1=i7[FV];R=R+Vm.nK$(u1)}
Vm.sb(S.ClassType)}
return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var jO={$ClassName:"TCustomTypeMember",$Parent:Se,$Init:function($){Se.$Init($);$.Visibility=0;$.IsStatic=false},ee:function(S,Ox){Vm.ee(S,Ox);S.Visibility=0;return S},Destroy:TObject.Destroy,ee$:function($){return $.ClassType.ee.apply($.ClassType,arguments)},nK:Vm.nK};var NV={$ClassName:"TMethodDeclaration",$Parent:jO,$Init:function($){jO.$Init($);$.Type=null},nK:function(S){var R="";R=Vm.qe(S.ClassType)+"function "+S.Name;if(S.Type)R+=Vm.nK$(S.Type);R+=";"+"\r\n";return R},Destroy:TObject.Destroy,ee:jO.ee,nK$:function($){return $.ClassType.nK($)}};var Fw={$ClassName:"TInterfaceDeclaration",$Parent:Vm,$Init:function($){Vm.$Init($);$.Name="";$.Extends=[];$.Type=null},nK:function(S){var R="";var zN=0;R="type"+"\r\n";Vm.CS(S.ClassType);R+=Vm.qe(S.ClassType)+S.Name+" = class external";if(S.Extends.length>0){R+="(";R+=Vm.nK$(S.Extends[0]);var $tB;for(zN=0+1,$tB=S.Extends.length;zN<$tB;zN++){R+=", "+Vm.nK$(S.Extends[zN])}
R+=")"}
R+="\r\n";R+=Vm.nK$(S.Type);Vm.sb(S.ClassType);return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var dw={$ClassName:"TIndexDeclaration",$Parent:jO,$Init:function($){jO.$Init($);$.IsStringIndex=false;$.Type=null},nK:function(S){var R="";console.log("not implemented: TIndexDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,ee:jO.ee,nK$:function($){return $.ClassType.nK($)}};var DI={$ClassName:"TImportDeclaration",$Parent:Se,$Init:function($){Se.$Init($)},nK:function(S){var R="";console.log("not implemented: TImportDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var Fq={$ClassName:"TFunctionType",$Parent:i6,$Init:function($){i6.$Init($);$.ResultType=null;$.Parameters=[]},nK:function(S){var R="";var B7=0;if(S.Parameters.length>0){R="("+Vm.nK$(S.Parameters[0]);var $tC;for(B7=0+1,$tC=S.Parameters.length;B7<$tC;B7++){R+="; "+Vm.nK$(S.Parameters[B7])}
R+=")"}
if(S.ResultType)R+=": "+Vm.nK$(S.ResultType);return R},xk:function(S){var R="";R="function";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)},xk$:function($){return $.ClassType.xk($)}};var V2={$ClassName:"TFunctionParameter",$Parent:Se,$Init:function($){Se.$Init($);$.Type=null;$.Nullable=false},nK:function(S){var R="";R=Wm(S.Name)+": ";if(S.Type){R+=Vm.nK$(S.Type)}else R+="Variant";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var TY={$ClassName:"TFunctionDeclaration",$Parent:Se,$Init:function($){Se.$Init($);$.Type=null},nK:function(S){var R="";R=Vm.nK$(S.Type);return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var v4={$ClassName:"TFloatType",$Parent:Nc,$Init:function($){Nc.$Init($)},xk:function(S){var R="";R="Float";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK:Nc.nK,xk$:function($){return $.ClassType.xk($)}};var db={$ClassName:"TFieldDeclaration",$Parent:jO,$Init:function($){jO.$Init($);$.Nullable=false;$.Type=null},nK:function(S){var R="";R=Vm.qe(S.ClassType)+Wm(S.Name)+": "+Vm.nK$(S.Type)+";";if(S.Nullable)R+=" \/\/ nullable";R+="\r\n";return R},Destroy:TObject.Destroy,ee:jO.ee,nK$:function($){return $.ClassType.nK($)}};var fs={$ClassName:"TExportDeclaration",$Parent:Se,$Init:function($){Se.$Init($);$.fU=false},nK:function(S){var R="";R="";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var PR={$ClassName:"TEnumerationItem",$Parent:Vm,$Init:function($){Vm.$Init($);$.Name=$.Value=""},nK:function(S){var R="";console.log("not implemented: TEnumerationItem.GetAsCode");return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var p8={$ClassName:"TEnumerationDeclaration",$Parent:Se,$Init:function($){Se.$Init($);$.Items=[]},nK:function(S){var R="";console.log("not implemented: TEnumerationDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var OC={$ClassName:"TEnumDeclaration",$Parent:Se,$Init:function($){Se.$Init($)},Destroy:TObject.Destroy,ee:Vm.ee,nK:Vm.nK};var ji={$ClassName:"TDefinitionDeclaration",$Parent:Se,$Init:function($){Se.$Init($)},nK:function(S){var R="";console.log("not implemented: TDefinitionDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var pX={$ClassName:"TConstructorDeclaration",$Parent:jO,$Init:function($){jO.$Init($);$.TypeParameters="";$.ParameterList=[];$.Type=null},nK:function(S){var R="";R=Vm.qe(S.ClassType)+"constructor Create";if(S.Type)R+=Vm.nK$(S.Type);R+=";"+"\r\n";return R},Destroy:TObject.Destroy,ee:jO.ee,nK$:function($){return $.ClassType.nK($)}};var wV={$ClassName:"TClassDeclaration",$Parent:Fw,$Init:function($){Fw.$Init($);$.Implements=[];$.Members=[]},nK:function(S){var R="";var UW=0;var Kd=0;var u7=null;var Y6=[];R="type"+"\r\n";Vm.CS(S.ClassType);R+=Vm.qe(S.ClassType)+"J"+S.Name+" = class external '"+S.Name+"'";if(S.Extends.length>0){R+="(";R+=Vm.nK$(S.Extends[0]);var $tD;for(UW=0+1,$tD=S.Extends.length;UW<$tD;UW++){R+=", "+Vm.nK$(S.Extends[UW])}
R+=")"}
R+="\r\n";Vm.CS(S.ClassType);Y6=S.Members;var $tE;for(Kd=0,$tE=Y6.length;Kd<$tE;Kd++){u7=Y6[Kd];R+=Vm.nK$(u7)}
Vm.sb(S.ClassType);R+=Vm.qe(S.ClassType)+"end;"+"\r\n"+"\r\n";Vm.sb(S.ClassType);return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var SS={$ClassName:"TCallSignature",$Parent:Vm,$Init:function($){Vm.$Init($);$.TypeParameters="";$.ParameterList=[];$.Type=null},nK:function(S){var R="";var vf=0;var cx=null;var EE=[];R="(";EE=S.ParameterList;var $tF;for(vf=0,$tF=EE.length;vf<$tF;vf++){cx=EE[vf];R+=Vm.nK$(cx)}
R+=")";if(S.Type)R+=": "+Vm.nK$(S.Type);return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var yE={$ClassName:"TCallbackDeclaration",$Parent:jO,$Init:function($){jO.$Init($);$.Type=null},nK:function(S){var R="";R=Vm.qe(S.ClassType)+"callback "+S.Name;if(S.Type)R+=Vm.nK$(S.Type);R+=";"+"\r\n";return R},Destroy:TObject.Destroy,ee:jO.ee,nK$:function($){return $.ClassType.nK($)}};var pB={$ClassName:"TBooleanType",$Parent:Nc,$Init:function($){Nc.$Init($)},xk:function(S){var R="";R="Boolean";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK:Nc.nK,xk$:function($){return $.ClassType.xk($)}};var Ep={$ClassName:"TArrayType",$Parent:Y9,$Init:function($){Y9.$Init($);$.Type=null},nK:function(S){var R="";R="array of "+Vm.nK$(S.Type);return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var cM={$ClassName:"TAmbientVariableDeclaration",$Parent:Vm,$Init:function($){Vm.$Init($);$.IsConst=false;$.AmbientBindingList=[]},nK:function(S){var R="";var mv=0;var b7=null;var Yr=[];R=(S.IsConst)?"const":"var";R+=" ";Yr=S.AmbientBindingList;var $tG;for(mv=0,$tG=Yr.length;mv<$tG;mv++){b7=Yr[mv];R+=Vm.nK$(b7)}
R+=";"+"\r\n";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var tB={$ClassName:"TAmbientModuleDeclaration",$Parent:Vm,$Init:function($){Vm.$Init($);$.Interfaces=[];$.Modules=[];$.Classes=[];$.Functions=[];$.Variables=[];$.IdentifierPath=""},nK:function(S){var R="";var tU=0;var KN=null,h5=0;var Wy=null,nc=0;var oq=null,Cg=0;var aV=null,Dk=0;var k7=null;var wi=[],hc=[],r7=[],uA=[],DN=[];R="\/\/"+S.IdentifierPath+"\r\n"+"\r\n";hc=S.Variables;var $tH;for(tU=0,$tH=hc.length;tU<$tH;tU++){KN=hc[tU];R+=Vm.nK$(KN)}
wi=S.Functions;var $tI;for(h5=0,$tI=wi.length;h5<$tI;h5++){Wy=wi[h5];R+=Vm.nK$(Wy)}
uA=S.Classes;var $tJ;for(nc=0,$tJ=uA.length;nc<$tJ;nc++){oq=uA[nc];R+=Vm.nK$(oq)}
r7=S.Modules;var $tK;for(Cg=0,$tK=r7.length;Cg<$tK;Cg++){aV=r7[Cg];R+=Vm.nK$(aV)}
DN=S.Interfaces;var $tL;for(Dk=0,$tL=DN.length;Dk<$tL;Dk++){k7=DN[Dk];R+=String(module.AsCode)}
return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var Qu={$ClassName:"TAmbientFunctionDeclaration",$Parent:Se,$Init:function($){Se.$Init($);$.CallSignature=null},nK:function(S){var R="";R=(S.CallSignature.Type)?"function":"procedure";R+=" "+S.Name+Vm.nK$(S.CallSignature);R+=";"+"\r\n";return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var Yb={$ClassName:"TAmbientDeclaration",$Parent:Se,$Init:function($){Se.$Init($);$.Variables=[];$.Namespaces=[];$.Modules=[];$.Classes=[];$.Functions=[];$.Enums=[]},nK:function(S){var R="";var gw=0;var xo=null,GM=0;var bQ=null,Vr=0;var S1=null,r4=0;var CN=null;var n7=[],Ef=[],al=[];al=S.Functions;var $tM;for(gw=0,$tM=al.length;gw<$tM;gw++){xo=al[gw];R+=Vm.nK$(xo)}
Ef=S.Modules;var $tN;for(GM=0,$tN=Ef.length;GM<$tN;GM++){bQ=Ef[GM];R+=Vm.nK$(bQ)}
if(S.Classes.length>0){var rg=[];R+="type"+"\r\n";Vm.CS(S.ClassType);rg=S.Classes;var $tO;for(Vr=0,$tO=rg.length;Vr<$tO;Vr++){S1=rg[Vr];R=R+Vm.nK$(S1)}
Vm.sb(S.ClassType)}
if(S.Variables.length>0){n7=S.Variables;var $tP;for(r4=0,$tP=n7.length;r4<$tP;r4++){CN=n7[r4];R=R+Vm.nK$(CN)}}
return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var UM={$ClassName:"TAmbientClassDeclaration",$Parent:wV,$Init:function($){wV.$Init($)},Destroy:TObject.Destroy,ee:Vm.ee,nK:wV.nK};var B5={$ClassName:"TAmbientBinding",$Parent:Se,$Init:function($){Se.$Init($);$.Type=null},nK:function(S){var R="";R=S.Name+": "+Vm.nK$(S.Type);return R},Destroy:TObject.Destroy,ee:Vm.ee,nK$:function($){return $.ClassType.nK($)}};var jB=["amPublic","amPrivate","amProtected"];function Wm(YF){var R="";switch((YF).toLowerCase()){case"type":R="&type";break;case"export":R="&export";break;case"label":R="&label";break;default:R=YF}
return R};var Hf=null;var Hf=require("typescript");var d=0;var P=[],Fn="",i9="",BK=null;var BK=TV();P=process.argv;P.splice(0,2);if(P.length==0){return"Usage: ts2pas inputfile [outputfile]"}
Fn=P[0];i9=P[0]+".pas";if(P.length==2)i9=P[1];bF(Fn,i9);
