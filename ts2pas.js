#! /usr/bin/env node
/**
* ts2pas
* https://github.com/CWBudde/TS2Pas
*
* Copyright (c) 2016 Christian-W. Budde
* Licensed under the MIT license.
*/


var TObject={$ClassName:"TObject",$Parent:null,ClassName:function(s){return s.$ClassName},ClassType:function(s){return s},ClassParent:function(s){return s.$Parent},$Init:function(){},Create:function(s){return s},Destroy:function(s){for(var prop in s)if(s.hasOwnProperty(prop))delete s.prop},Destroy$:function(s){return s.ClassType.Destroy(s)},Free:function(s){if(s!==null)s.ClassType.Destroy(s)}}
function StrReplace(s,o,n){return o?s.replace(new RegExp(StrRegExp(o),"g"),n):s}
function StrRegExp(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}
function StrBefore(s,d){if(!d)return s;var p=s.indexOf(d);return(p<0)?s:s.substr(0,p)}
var Exception={$ClassName:"Exception",$Parent:TObject,$Init:function(){var FMessage=""},Create:function(s,Msg){s.FMessage=Msg;return s}}
function stringRepeat(s,n){if(n<1)return'';var r='';while(n>0){if(n&1)r+=s;n>>=1,s+=s};return r};function DupeString(s,n){return stringRepeat(s,n)}
function $W(e){return e.ClassType?e:Exception.Create($New(Exception),e.constructor.name+", "+e.message)}
function $StrSet(s,i,v,z){if(i<1)throw Exception.Create($New(Exception),"Lower bound exceeded! Index "+i.toString()+z);if(i>s.length)throw Exception.Create($New(Exception),"Upper bound exceeded! Index "+i.toString()+z);return s.substring(0,i-1)+v+s.substring(i)}
function $New(c){var i={ClassType:c};c.$Init(i);return i}
function $Is(o,c){if(o===null)return false;return $Inh(o.ClassType,c)};function $Inh(s,c){if(s===null)return false;while((s)&&(s!==c))s=s.$Parent;return(s)?true:false};function $Extend(base,sub,props){function F(){};F.prototype=base.prototype;sub.prototype=new F();sub.prototype.constructor=sub;for(var n in props){if(props.hasOwnProperty(n)){sub.prototype[n]=props[n]}}}
function $AsIntf(o,i){if(o===null)return null;var r=o.ClassType.$Intf[i].map(function(e){return function(){var arg=Array.prototype.slice.call(arguments);arg.splice(0,0,o);return e.apply(o,arg)}});r.O=o;return r};function $As(o,c){if((o===null)||$Is(o,c))return o;throw Exception.Create($New(Exception),"Cannot cast instance of type \""+o.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"")}
function JError(){}
$Extend(Object,JError,{});function y2(VZ){if(VZ==StrBefore(VZ,".d.ts"))VZ+=".d.ts";KH.readFile(VZ,function(uK,o5){var La="",aO=null;La=o5.toString("utf8");aO=Z.createSourceFile(VZ,La,2,true);AX(aO)})};function P2(dC,uh){var CH="";CH=StrBefore(dC,".d.ts");if(dC==CH)dC+=".d.ts";KH.readFile(dC,function(mb,Ls){var p5="",Qx=null,Mh="";if(!Ls)return;p5=Ls.toString("utf8");Qx=Qi.zF($New(Qi));Qx.Name=CH;Mh=Qi.Z2(Qx,p5);KH.writeFile(uh,Mh,function(Rg){});Qx=null})};function gc(C5){P2(C5,StrBefore(C5,".d.ts")+".pas")};function AX(QG){p9(QG)};function p9(Av){var R=undefined;switch(Av.kind){case 9:console.log(Av.text);break;case 69:console.log(Av.text);break;case 151:console.log(Av.text);break;case 122:console.log("declare");break;case 135:console.log(Av.left);break;default:console.log(Av.kind)}
Z.forEachChild(Av,p9);return R};function Copy$lQ(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$lQ($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$a4(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$a4($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$st(s,d){d.persistent=s.persistent;return d}
function Clone$st($){return{persistent:$.persistent}}
function Copy$Sh(s,d){d.curr=s.curr;d.prev=s.prev;return d}
function Clone$Sh($){return{curr:$.curr,prev:$.prev}}
function Copy$OV(s,d){d.curr=s.curr;d.prev=s.prev;return d}
function Clone$OV($){return{curr:$.curr,prev:$.prev}}
function Copy$xx(s,d){d.persistent=s.persistent;d.interval=s.interval;return d}
function Clone$xx($){return{persistent:$.persistent,interval:$.interval}}
function Copy$Fr(s,d){d.encoding=s.encoding;d.flag=s.flag;return d}
function Clone$Fr($){return{encoding:$.encoding,flag:$.flag}}
function Copy$fc(s,d){d.encoding=s.encoding;d.flag=s.flag;return d}
function Clone$fc($){return{encoding:$.encoding,flag:$.flag}}
function Copy$IB(s,d){d.flags=s.flags;d.encoding=s.encoding;d.string_=s.string_;return d}
function Clone$IB($){return{flags:$.flags,encoding:$.encoding,string_:$.string_}}
function Copy$i3(s,d){d.bufferSize=s.bufferSize;d.encoding=s.encoding;d.fd=s.fd;d.mode=s.mode;d.flags=s.flags;return d}
function Clone$i3($){return{bufferSize:$.bufferSize,encoding:$.encoding,fd:$.fd,mode:$.mode,flags:$.flags}}
function Copy$tp(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$tp($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function Copy$Lg(s,d){d.encoding=s.encoding;d.mode=s.mode;d.flag=s.flag;return d}
function Clone$Lg($){return{encoding:$.encoding,mode:$.mode,flag:$.flag}}
function gH(){var R=null;R=require("fs");return R};function Y7(){var R=null;R=require("stream");return R};function cj(){var R=null;R=require("events");return R};var Qi={$ClassName:"TTranslator",$Parent:TObject,$Init:function($){TObject.$Init($);$.NeedsSemicolon=false;$.Name="";$.V7=[];$.oB=[];$.SN=[];$.Oz=[];$.xf=$.fo=null},q3:function(S){return S.xf.getTokenText()},hH:function(S){return S.xf.getToken()},x4:function(S,et){if(!(S.xf.isIdentifier()||et.indexOf(Qi.hH(S))>=0))Qi.Pb(S,0)},hP:function(S,nR){if(!(nR.indexOf(Qi.hH(S))>=0))Qi.Pb(S,0)},PS:function(S,U3){if(Qi.hH(S)!=U3)Qi.Pb(S,U3)},Kd:function(S){var R="";var BF=0;var MR=null,z6=0;var kZ=null,Go=0;var zv=null,GK=0;var PM=null;var Am=[],pI=[],rF=[];R="unit "+Vc(S.Name)+";"+"\r\n"+"\r\n";R+="interface"+"\r\n"+"\r\n";rF=S.oB;var $t1;for(BF=0,$t1=rF.length;BF<$t1;BF++){MR=rF[BF];R=R+Rq.vo$(MR)}
pI=S.Oz;var $t2;for(z6=0,$t2=pI.length;z6<$t2;z6++){kZ=pI[z6];R=R+Rq.vo$(kZ)}
if(S.SN.length>0){var y5=[];R+="type"+"\r\n";Rq.J6(Rq);y5=S.SN;var $t3;for(Go=0,$t3=y5.length;Go<$t3;Go++){zv=y5[Go];R=R+Rq.vo$(zv)}
Rq.r7(Rq)}
Am=S.V7;var $t4;for(GK=0,$t4=Am.length;GK<$t4;GK++){PM=Am[GK];R=R+Rq.vo$(PM)}
return R},zF:function(S){S.NeedsSemicolon=false;return S},Pb:function(S,jz){var XX=null,Yz="";XX=Z.getLineAndCharacterOfPosition(S.fo,S.xf.getTokenPos());Yz=("Unknown token \""+Qi.q3(S).toString()+"\" in this context ("+(XX.line+1).toString()+":"+(XX.character+1).toString()+")");if(jz>0)Yz+=("; Expected ("+jz.toString()+")");console.trace("");throw Exception.Create($New(Exception),Yz)},tQ:function(S){var R=null;Qi.x4(S,[]);R=Rq.s7$($New(CY),$AsIntf(S,"Ot"));R.Name=Qi.q3(S);if(Qi.A6(S,54,false))R.Type=Qi.ed(S);if(S.NeedsSemicolon)Qi.hP(S,[23,24].slice());return R},EG:function(S,gY){do{gY.push(Qi.tQ(S));if(Qi.hH(S)==23)break;if(Qi.hH(S)!=24)break;if(!Qi.cp(S,false))break}while(!(Qi.hH(S)==23||(!S.xf.isIdentifier())||(!S.NeedsSemicolon)&&(!S.xf.isIdentifier())))},rs:function(S){var R=null;var MM=0,Vw=false;Qi.x4(S,[121,110,111,112,113].slice());if(Qi.hH(S)==121)return Qi.hm(S);MM=0;switch(Qi.hH(S)){case 112:MM=0;Qi.hG(S,[113].slice(),true);break;case 111:MM=1;Qi.hG(S,[113].slice(),true);break;case 110:MM=2;Qi.hG(S,[113].slice(),true);break}
Vw=Qi.hH(S)==113;if(Vw)Qi.cp(S,true);R=Qi.b7(S);$As(R,sr).IsStatic=Vw;$As(R,sr).Visibility=MM;if(S.NeedsSemicolon)Qi.hP(S,[23,16].slice());return R},G9:function(S){var R=null;var jW=[],jW=[121,110,111,112,113,16,23].slice();Qi.PS(S,73);R=Rq.s7$($New(dR),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.xJ(S,[83,106,15,25].slice(),true);if(Qi.hH(S)==83){Qi.cp(S,true);R.Extends.push(Qi.rU(S))}
if(Qi.hH(S)==106){Qi.cp(S,true);R.Implements.push(Qi.zf(S));while(Qi.hH(S)==24){Qi.cp(S,true);R.Implements.push(Qi.zf(S))}}
if(Qi.hH(S)==25){do{Qi.MJ(S)}while(!(Qi.hH(S)!=24));Qi.xJ(S,[15].slice(),true)}
Qi.PS(S,15);Qi.hG(S,jW,false);while(Qi.hH(S)!=16){R.Members.push(Qi.rs(S));if(Qi.hH(S)==23)Qi.hG(S,jW,false)}
Qi.PS(S,16);return R},hm:function(S){var R=null;Qi.PS(S,121);Qi.A6(S,17,true);R=Rq.s7$($New(Mm),$AsIntf(S,"Ot"));while(Qi.cp(S,false)){R.ParameterList.push(Qi.R6(S));Qi.hP(S,[24,18,23].slice());if(Qi.hH(S)==18)break}
Qi.hP(S,[18,23].slice());if(Qi.hH(S)!=23)Qi.A6(S,23,true);return R},kN:function(S){var R=null;Qi.PS(S,122);R=Rq.s7$($New(dw),$AsIntf(S,"Ot"));Qi.xJ(S,[102,108,74,87,73,81,125,126].slice(),true);switch(Qi.hH(S)){case 102:case 108:case 74:R.Variables.push(Qi.nK(S));break;case 87:R.Functions.push(Qi.GA(S));break;case 73:R.Classes.push(Qi.G9(S));break;case 81:R.Enums.push(Qi.DR(S));break;case 125:R.Modules.push(Qi.mv(S));break;case 126:R.Namespaces.push(Qi.rW(S));break}
return R},DR:function(S){var R=null;R=Qi.Ii(S);return R},GA:function(S){var R=null;Qi.PS(S,87);R=Rq.s7$($New(MS),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.xJ(S,[17,25].slice(),true);R.CallSignature=Qi.Qz(S);if(S.NeedsSemicolon)Qi.hP(S,[23].slice());return R},mv:function(S){var R=null;var UP=[],UP=[82,102,108,74,132,87,73,107,81,125,89,16,23].slice();var Qh=false,ge=null;Qi.PS(S,125);R=Rq.s7$($New(em),$AsIntf(S,"Ot"));Qi.hG(S,[9].slice(),true);R.IdentifierPath=Qi.zf(S);Qi.PS(S,15);Qi.xJ(S,UP,true);while(Qi.hH(S)!=16){Qh=Qi.hH(S)==82;if(Qh){Qi.xJ(S,UP.concat([77,56]),true);if(Qi.hH(S)==77){Qh=false;Qi.cp(S,false);Qi.A6(S,23,false);Qi.xJ(S,UP,true)}
if(Qi.hH(S)==56){Qh=false;Qi.cp(S,false);Qi.A6(S,23,false);Qi.xJ(S,UP,true)}}
switch(Qi.hH(S)){case 102:case 108:R.Variables.push(Qi.nK(S));break;case 74:Qi.hG(S,[81].slice(),false);if(Qi.hH(S)==81){R.Enums.push(Qi.DR(S))}else{ge=Rq.s7$($New(l2),$AsIntf(S,"Ot"));ge.IsConst=true;Qi.EG(S,ge.AmbientBindingList);R.Variables.push(ge)}
Qi.xJ(S,UP,true);break;case 132:R.TypeAliases.push(Qi.od(S));Qi.xJ(S,UP,true);break;case 87:R.Functions.push(Qi.GA(S));break;case 73:R.Classes.push(Qi.Pw(S));Qi.xJ(S,UP,true);break;case 125:R.Modules.push(Qi.mv(S));Qi.xJ(S,UP,true);break;case 107:R.Interfaces.push(Qi.t8(S));Qi.xJ(S,UP,true);break;case 89:Qi.qp(S);if(!S.NeedsSemicolon)Qi.xJ(S,UP,true);break;case 81:Qi.Ii(S);Qi.xJ(S,UP,true);break}
if(Qi.hH(S)==23)Qi.xJ(S,UP,true)}
Qi.PS(S,16);return R},rW:function(S){var R=null;console.log("not implemented: ReadAmbientNamespaceDeclaration");return R},b7:function(S){var R=null;var yh="";Qi.x4(S,[]);yh=Qi.q3(S);Qi.xJ(S,[54,17,23].slice(),true);if(Qi.hH(S)==17){R=Qi.S8(S)}else R=Qi.kW(S);R.Name=yh;if(S.NeedsSemicolon)Qi.x4(S,[23,16,24].slice());return R},S8:function(S){var R=null;Qi.PS(S,17);R=Rq.s7$($New(kM),$AsIntf(S,"Ot"));R.CallSignature=Qi.Qz(S);Qi.hP(S,[18,23].slice());if(Qi.hH(S)!=23)Qi.A6(S,23,true);return R},kW:function(S){var R=null;R=Rq.s7$($New(ye),$AsIntf(S,"Ot"));if(Qi.hH(S)==54)R.Type=Qi.NJ(S);return R},nK:function(S){var R=null;Qi.hP(S,[102,108,74].slice());R=Rq.s7$($New(l2),$AsIntf(S,"Ot"));R.IsConst=Qi.hH(S)==74;Qi.cp(S,true);Qi.EG(S,R.AmbientBindingList);return R},Qz:function(S){var R=null;Qi.hP(S,[17,25].slice());R=Rq.s7$($New(NR),$AsIntf(S,"Ot"));if(Qi.hH(S)==25){do{R.TypeParameters.push(Qi.MJ(S))}while(!(Qi.hH(S)!=24));Qi.A6(S,17,true)}
Qi.PS(S,17);Qi.hG(S,[112,110,111,22,18].slice(),true);while(Qi.hH(S)!=18){R.ParameterList.push(Qi.bw(S));if(Qi.hH(S)==24)Qi.hG(S,[22].slice(),false)}
Qi.hP(S,[18].slice());Qi.xJ(S,[54,23].slice(),true);if(Qi.hH(S)==54)R.Type=Qi.NJ(S);return R},Pw:function(S){var R=null;var f2=[],f2=[83,106,15,25].slice();Qi.PS(S,73);R=Rq.s7$($New(EF),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.xJ(S,f2,true);if(Qi.hH(S)==25){f2.push(25);do{R.TypeParameters.push(Qi.MJ(S))}while(!(Qi.hH(S)!=24));Qi.PS(S,27);Qi.xJ(S,f2,true)}
if(Qi.hH(S)==83){Qi.cp(S,true);R.Extends.push(Qi.rU(S))}
if(Qi.hH(S)==106){Qi.cp(S,true);R.Implements.push(Qi.rU(S));while(Qi.hH(S)==24){Qi.cp(S,true);R.Implements.push(Qi.rU(S))}}
Qi.PS(S,15);Qi.sP(S,R);return R},ub:function(S){var R=null;var cm=[],b1=[],b1=[72,75,76,77,78,82,85,88,105].slice();var Ig="",N9=false;Qi.x4(S,[92,9,19].concat(b1));if(Qi.hH(S)==19)return Qi.qy(S);Ig=Qi.q3(S);Qi.xJ(S,[25,53,54,17,23].slice(),true);if(Qi.hH(S)==25){do{cm.push(Qi.MJ(S))}while(!(Qi.hH(S)!=24));Qi.xJ(S,[53,54,17,23].slice(),true)}
N9=Qi.hH(S)==53;if(N9)Qi.xJ(S,[54,23].slice(),true);switch(Qi.hH(S)){case 54:case 23:R=Qi.oD(S);$As(R,zi).Nullable=N9;break;case 17:if((Ig).toLowerCase()=="constructor"){R=Qi.P6(S)}else R=Qi.A3(S);break}
R.Name=Ig;R.TypeParameters=cm;if(S.NeedsSemicolon)Qi.hP(S,[23,24,16].slice());return R},sP:function(S,mN){var HJ=[],HJ=[92,9,82,16,23,19].slice();var mt=0,vx=false,co=null;Qi.PS(S,15);Qi.hG(S,HJ,false);while(Qi.hH(S)!=16){mt=0;switch(Qi.hH(S)){case 112:mt=0;Qi.hG(S,[92].slice(),true);break;case 111:mt=1;Qi.hG(S,[92].slice(),true);break;case 110:mt=2;Qi.hG(S,[92].slice(),true);break}
vx=Qi.hH(S)==113;if(vx)Qi.hG(S,[92,17].slice(),true);co=Qi.ub(S);co.Visibility=mt;co.IsStatic=vx;mN.Members.push(co);if(Qi.hH(S)==23)Qi.hG(S,HJ,false)}},P6:function(S){var R=null;R=Rq.s7$($New(ai),$AsIntf(S,"Ot"));R.Type=Qi.Gu(S);if(S.NeedsSemicolon)Qi.hP(S,[23,16].slice());return R},vB:function(S){var R=null;Qi.PS(S,92);R=Rq.s7$($New(ai),$AsIntf(S,"Ot"));if(Qi.cp(S,false)){Qi.A6(S,17,false)}
Qi.PS(S,17);Qi.hG(S,[112,110,111,22,18].slice(),true);while(Qi.hH(S)!=18){R.ParameterList.push(Qi.bw(S));if(Qi.hH(S)==24)Qi.hG(S,[22].slice(),false)}
Qi.PS(S,18);Qi.A6(S,54,true);R.Type=Qi.ed(S);return R},HK:function(S){var R=null;Qi.PS(S,92);R=Rq.s7$($New(Lb),$AsIntf(S,"Ot"));Qi.A6(S,17,true);while(Qi.hG(S,[22].slice(),false)){R.ParameterList.push(Qi.R6(S));Qi.hP(S,[24,18,23].slice());if(Qi.hH(S)==18)break}
Qi.hP(S,[18,23].slice());if(Qi.xJ(S,[54,34].slice(),false))R.ResultType=Qi.NJ(S);return R},xg:function(S){var BZ=[],BZ=[82,122,107,125,89,1].slice();Qi.xJ(S,BZ,true);while(Qi.hH(S)!=1){switch(Qi.hH(S)){case 82:Qi.xJ(S,BZ,true);continue;break;case 122:S.V7.push(Qi.kN(S));break;case 107:S.SN.push(Qi.t8(S));break;case 125:S.Oz.push(Qi.vn(S));break;case 89:S.oB.push(Qi.qp(S));break}
if(([16,23].indexOf(Qi.hH(S))>=0))Qi.xJ(S,BZ,true)}},Ii:function(S){var R=null;var zC=[],zC=[81,77,78,89,96].slice();Qi.PS(S,81);R=Rq.s7$($New(TS),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.A6(S,15,true);Qi.hG(S,[16].concat(zC),true);if(Qi.hH(S)!=16){do{R.Items.push(Qi.Yx(S));if(Qi.hH(S)==16)break}while(!(!Qi.hG(S,zC,false)))}
Qi.PS(S,16);return R},Yx:function(S){var R=null;var qU=[],qU=[81,77,78,89,96].slice();Qi.x4(S,qU);R=Rq.s7$($New(hp),$AsIntf(S,"Ot"));R.Name=Qi.q3(S);if(Qi.A6(S,56,false)){Qi.A6(S,8,true);R.Value=Qi.q3(S);Qi.Pv(S)}
Qi.hP(S,[24,16].slice());return R},by:function(S){var R=null;Qi.PS(S,82);R=Rq.s7$($New(Cr),$AsIntf(S,"Ot"));Qi.hG(S,[77].slice(),true);R.Nv=Qi.hH(S)==82||(Qi.q3(S)).toLowerCase()=="default";if(R.Nv)Qi.cp(S,true);R.Name=Qi.q3(S);Qi.A6(S,23,true);return R},Gj:function(S){var R=null;Qi.PS(S,87);R=Rq.s7$($New(Y6),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.xJ(S,[17].slice(),true);R.Type=Qi.Gu(S);return R},R6:function(S){var R=null;var Lm=false;var fK=[],fK=[53,24,54,18].slice();Qi.x4(S,[22].slice());Lm=Qi.hH(S)==22;if(Lm)Qi.cp(S,true);R=Rq.s7$($New(Ry),$AsIntf(S,"Ot"));R.Name=Qi.q3(S);Qi.xJ(S,fK,true);R.IsOptional=Qi.hH(S)==53;fK.push(53);if(R.IsOptional)Qi.xJ(S,fK,true);if(Qi.hH(S)==54)R.Type=Qi.NJ(S);return R},Gu:function(S){var R=null;Qi.PS(S,17);R=Rq.s7$($New(JC),$AsIntf(S,"Ot"));while(Qi.hG(S,[22].slice(),false)){R.ParameterList.push(Qi.R6(S));Qi.hP(S,[24,18,23].slice());if(Qi.hH(S)==18)break}
Qi.hP(S,[18,23].slice());if(Qi.xJ(S,[54,34].slice(),false))R.ResultType=Qi.NJ(S);return R},hG:function(S,JW,Ct){var R=false;Qi.Pv(S);R=S.xf.isIdentifier()||JW.indexOf(Qi.hH(S))>=0;if((!R)&&Ct)Qi.Pb(S,0);return R},cp:function(S,e8){var R=false;Qi.Pv(S);R=S.xf.isIdentifier();if((!R)&&e8)Qi.Pb(S,69);return R},zf:function(S){var R="";Qi.x4(S,[9].slice());R=Qi.q3(S);while(Qi.A6(S,21,false)){Qi.cp(S,true);R+="."+Qi.q3(S)}
return R},qp:function(S){var R=null;Qi.PS(S,89);R=Rq.s7$($New(vs),$AsIntf(S,"Ot"));Qi.hG(S,[37,9].slice(),true);switch(Qi.hH(S)){case 37:R.Name="*";Qi.A6(S,116,true);Qi.cp(S,true);Qi.A6(S,133,true);Qi.A6(S,9,true);break;case 9:R.Name=S.xf.getTokenValue();break;default:R.Name=Qi.q3(S);Qi.A6(S,56,true);Qi.hG(S,[127].slice(),true);if(Qi.hH(S)==127){Qi.A6(S,17,false);Qi.A6(S,9,false);Qi.A6(S,18,false)}}
Qi.A6(S,23,true);return R},qy:function(S){var R=null;Qi.PS(S,19);R=Rq.s7$($New(w2),$AsIntf(S,"Ot"));R.IndexSignature=Qi.NX(S);if(S.NeedsSemicolon)Qi.x4(S,[23,16,24].slice());return R},NX:function(S){var R=null;Qi.PS(S,19);R=Rq.s7$($New(KE),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.A6(S,54,true);Qi.xJ(S,[130,128].slice(),true);R.IsStringIndex=Qi.hH(S)==130;Qi.A6(S,20,true);Qi.A6(S,54,true);R.Type=Qi.ed(S);return R},t8:function(S){var R=null;Qi.PS(S,107);R=Rq.s7$($New(gM),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.xJ(S,[25,83,15].slice(),true);if(Qi.hH(S)==25){do{R.TypeParameters.push(Qi.MJ(S))}while(!(Qi.hH(S)!=24));Qi.xJ(S,[83,15].slice(),true)}
if(Qi.hH(S)==83){Qi.cp(S,true);R.Extends.push(Qi.rU(S));while(Qi.hH(S)==24){Qi.cp(S,true);R.Extends.push(Qi.rU(S))}}
Qi.PS(S,15);R.Type=Qi.I6(S);Qi.PS(S,16);return R},A3:function(S){var R=null;R=Rq.s7$($New(Ne),$AsIntf(S,"Ot"));R.CallSignature=Qi.Qz(S);if(S.NeedsSemicolon)Qi.hP(S,[23,16].slice());return R},vn:function(S){var R=null;var Wf=[],Wf=[73,82,81,89,125,87,107,102,23,16].slice();Qi.PS(S,125);R=Rq.s7$($New(Vy),$AsIntf(S,"Ot"));Qi.hG(S,[9].slice(),true);R.Name=Qi.zf(S);Qi.PS(S,15);Qi.xJ(S,Wf,true);while(Qi.hH(S)!=16){switch(Qi.hH(S)){case 73:R.Classes.push(Qi.Pw(S));break;case 82:R.Exports.push(Qi.by(S));break;case 81:Qi.Ii(S);break;case 87:R.Functions.push(Qi.Gj(S));break;case 89:Qi.qp(S);break;case 125:R.Modules.push(Qi.vn(S));break;case 107:R.Interfaces.push(Qi.t8(S));break;case 102:R.Variables.push(Qi.GF(S));break}
Qi.xJ(S,Wf,true)}
Qi.PS(S,16);return R},I6:function(S){var R=null;var fp=[],fp=[9,8,92,25,17,19,16].slice();var Xe=[],Xe=[72,73,75,77,78,82,85,86,89,90].slice();Qi.PS(S,15);R=Rq.s7$($New(Oy),$AsIntf(S,"Ot"));Qi.hG(S,fp.concat(Xe),true);while(Qi.hH(S)!=16){R.Members.push(Qi.AQ(S));if(([23,24].indexOf(Qi.hH(S))>=0))Qi.hG(S,fp.concat(Xe),true)}
Qi.PS(S,16);return R},bw:function(S){var R=null;Qi.x4(S,[112,110,111,22].slice());R=Rq.s7$($New(zB),$AsIntf(S,"Ot"));R.Name=Qi.q3(S);R.IsRest=Qi.hH(S)==22;if(R.IsRest){Qi.cp(S,true);R.Name=Qi.q3(S);if(Qi.A6(S,54,false))R.Type=Qi.ed(S);Qi.PS(S,18);return R}
Qi.x4(S,[112,110,111].slice());switch(Qi.hH(S)){case 112:R.AccessibilityModifier=0;Qi.cp(S,false);break;case 110:R.AccessibilityModifier=1;Qi.cp(S,false);break;case 111:R.AccessibilityModifier=2;Qi.cp(S,false);break}
Qi.x4(S,[]);Qi.xJ(S,[53,54,56,24,18].slice(),true);R.IsOptional=Qi.hH(S)==53;if(R.IsOptional)Qi.xJ(S,[54,56,24,18].slice(),true);if(Qi.hH(S)==54)R.Type=Qi.NJ(S);Qi.hP(S,[56,24,18].slice());if(Qi.hH(S)==56){Qi.cp(S,true);R.DefaultValue=Qi.q3(S)}
Qi.hP(S,[24,18].slice());return R},xP:function(S){var R=null;var US=[],US=[69,9,117,128,130,120,103,101,15,17,19].slice();var BU=null;Qi.hP(S,US);switch(Qi.hH(S)){case 17:R=Qi.NJ(S);Qi.PS(S,18);Qi.Pv(S);break;case 69:R=FR.GD($New(FR),$AsIntf(S,"Ot"),Qi.zf(S));if(Qi.hH(S)==25){do{$As(R,FR).Arguments.push(Qi.dx(S))}while(!(Qi.hH(S)!=24));Qi.PS(S,27);Qi.Pv(S)}
break;case 9:R=FR.GD($New(FR),$AsIntf(S,"Ot"),S.xf.getTokenValue());Qi.Pv(S);break;case 117:R=Rq.s7$($New(Hf),$AsIntf(S,"Ot"));Qi.Pv(S);break;case 128:R=Rq.s7$($New(A1),$AsIntf(S,"Ot"));Qi.Pv(S);break;case 103:R=null;Qi.Pv(S);break;case 101:R=Rq.s7$($New(f6),$AsIntf(S,"Ot"));$As(R,f6).Type=Qi.NJ(S);break;case 130:R=Rq.s7$($New(OC),$AsIntf(S,"Ot"));Qi.Pv(S);break;case 120:R=Rq.s7$($New(OX),$AsIntf(S,"Ot"));Qi.Pv(S);break;case 15:R=Qi.I6(S);Qi.Pv(S);break;case 19:R=Qi.il(S);Qi.Pv(S);break}
while(Qi.hH(S)==19){BU=R;R=Rq.s7$($New(Cu),$AsIntf(S,"Ot"));$As(R,Cu).Type=BU;Qi.A6(S,20,true);Qi.Pv(S)}
return R},oD:function(S){var R=null;Qi.hP(S,[54,23].slice());R=Rq.s7$($New(zi),$AsIntf(S,"Ot"));if(Qi.hH(S)==23)return R;R.Type=Qi.NJ(S);if(S.NeedsSemicolon)Qi.x4(S,[23,16,24].slice());return R},xJ:function(S,ui,mr){var R=false;R=ui.indexOf(Qi.Pv(S))>=0;if((!R)&&mr)Qi.Pb(S,0);return R},A6:function(S,Op,Cb){var R=false;R=Qi.Pv(S)==Op;if((!R)&&Cb)Qi.Pb(S,Op);return R},Pv:function(S){var R=0;R=S.xf.scan();return R},il:function(S){var R=null;Qi.PS(S,19);R=Rq.s7$($New(ex),$AsIntf(S,"Ot"));do{R.Types.push(Qi.NJ(S))}while(!(Qi.hH(S)==20));Qi.PS(S,20);return R},NJ:function(S){var R=null;var W2=[],W2=[69,9,117,128,130,120,103,101,92,15,17,19].slice();var Ku=null;Qi.xJ(S,W2,true);if(Qi.hH(S)==17)return Qi.Gu(S);if(Qi.hH(S)==92)return Qi.HK(S);R=Qi.xP(S);while(Qi.hH(S)==47){if(!$Is(R,CT)){Ku=R;R=Rq.s7$($New(CT),$AsIntf(S,"Ot"));$As(R,CT).Types.push(Ku)}
Qi.xJ(S,W2,true);$As(R,CT).Types.push(Qi.xP(S))}
return R},od:function(S){var R=null;Qi.PS(S,132);R=Rq.s7$($New(fn),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.xJ(S,[25,56].slice(),true);if(Qi.hH(S)==25){R.TypeParameters.push(Qi.MJ(S));Qi.A6(S,56,true)}
R.Type=Qi.NJ(S);Qi.PS(S,23);return R},ed:function(S){var R=null;Qi.PS(S,54);R=Qi.NJ(S);return R},dx:function(S){var R=null;Qi.hP(S,[25,24].slice());R=Rq.s7$($New(lz),$AsIntf(S,"Ot"));R.Type=Qi.NJ(S);Qi.hP(S,[27,24].slice());return R},AQ:function(S){var R=null;var Jh=[],xE=[],xE=[9,8,110,92,25,17,19].slice();var W1=[],W1=[72,73,75,77,78,82,85,86,89,90].slice();var lj="",qc=false;Qi.x4(S,xE.concat(W1));if(Qi.hH(S)==92)return Qi.vB(S);if(([17,25].indexOf(Qi.hH(S))>=0))return Qi.Qz(S);if(Qi.hH(S)==19)return Qi.NX(S);if(S.xf.isIdentifier()||[9,8].concat(W1).indexOf(S.xf.getToken())>=0){lj=Qi.q3(S);Qi.xJ(S,[25,53,54,17].slice(),true);qc=Qi.hH(S)==53;if(qc)Qi.xJ(S,[54,17,25].slice(),true);switch(Qi.hH(S)){case 54:R=Qi.oD(S);$As(R,zi).Nullable=qc;break;case 17:case 25:R=Qi.A3(S);break}
R.TypeArguments=Jh;R.Name=lj}
return R},MJ:function(S){var R=null;Qi.hP(S,[25,24].slice());R=Rq.s7$($New(XD),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.xJ(S,[83,27,24].slice(),true);if(Qi.hH(S)==83){R.ExtendsType=Qi.NJ(S);Qi.hP(S,[27,24].slice())}
return R},rU:function(S){var R=null;Qi.x4(S,[]);R=Rq.s7$($New(eA),$AsIntf(S,"Ot"));R.Name=Qi.zf(S);if(Qi.hH(S)==25){do{R.Arguments.push(Qi.dx(S))}while(!(Qi.hH(S)!=24));Qi.Pv(S)}
return R},GF:function(S){var R=null;Qi.PS(S,102);R=Rq.s7$($New(kx),$AsIntf(S,"Ot"));Qi.cp(S,true);R.Name=Qi.q3(S);Qi.A6(S,54,true);R.Type=Qi.NJ(S);return R},Z2:function(S,mo){var R="";S.xf=Z.createScanner(0,true,0,mo);S.fo=Z.createSourceFile("main",mo,0);try{Qi.xg$(S)}catch($e){var bv=$W($e);console.error(bv.FMessage)}
R=Qi.Kd$(S);return R},Destroy:TObject.Destroy,Kd$:function($){return $.ClassType.Kd($)},xg$:function($){return $.ClassType.xg($)}};Qi.$Intf={Ot:[]}
function Vc(No){var R="";var Nt=[];if(No.length==0)return"Unknown";Nt=(No).split("\\");R=Nt[(Nt.length-1)];Nt=(No).split("\/");R=Nt[(Nt.length-1)];R=StrReplace(R,"-","_");R=$StrSet(R,1,(R.charAt(0)).toUpperCase());return R};var oh=["Warning","Error","Message"];function Copy$X(s,d){d.W=s.W;d.f=s.f;return d}
function Clone$X($){return{W:$.W,f:$.f}}
var NY=["vPublic","vProtected","vPrivate"];var Rq={$ClassName:"TCustomDeclaration",$Parent:TObject,$Init:function($){TObject.$Init($);$.cM=null},J6:function(S){++Nm},s7:function(S,OB){S.cM=OB;return S},r7:function(S){--Nm},aY:function(S){var R="";R=DupeString("  ",Nm);return R},Destroy:TObject.Destroy,s7$:function($){return $.ClassType.s7.apply($.ClassType,arguments)},vo$:function($){return $.ClassType.vo($)}};var LI={$ClassName:"TCustomType",$Parent:Rq,$Init:function($){Rq.$Init($)},Destroy:TObject.Destroy,s7:Rq.s7,vo:Rq.vo};var oV={$ClassName:"TCustomNamedType",$Parent:LI,$Init:function($){LI.$Init($)},vo:function(S){var R="";R="J"+oV.SI$(S);return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)},SI$:function($){return $.ClassType.SI($)}};var QD={$ClassName:"TPredefinedType",$Parent:oV,$Init:function($){oV.$Init($)},vo:function(S){var R="";R=oV.SI$(S);return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)},SI:oV.SI};var Hf={$ClassName:"TVariantType",$Parent:QD,$Init:function($){QD.$Init($)},SI:function(S){var R="";R="Variant";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo:QD.vo,SI$:function($){return $.ClassType.SI($)}};var xN={$ClassName:"TNamedDeclaration",$Parent:Rq,$Init:function($){Rq.$Init($);$.Name=""},Destroy:TObject.Destroy,s7:Rq.s7,vo:Rq.vo};var kx={$ClassName:"TVariableDeclaration",$Parent:xN,$Init:function($){xN.$Init($);$.Type=null},vo:function(S){var R="";console.log("not implemented: TVariableDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var CT={$ClassName:"TUnionType",$Parent:LI,$Init:function($){LI.$Init($);$.Types=[]},vo:function(S){var R="";var EP=0;var zy=null;R="Variant {";var $t5;for(EP=0,$t5=(S.Types.length-1);EP<$t5;EP++){R+=Rq.vo$(S.Types[EP])+" or "}
zy=S.Types[(S.Types.length-1)];R+=(zy)?Rq.vo$(zy):"void";R+="}";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var eA={$ClassName:"TTypeReference",$Parent:Rq,$Init:function($){Rq.$Init($);$.Name="";$.Arguments=[]},vo:function(S){var R="";var dn=0;R="J"+S.Name;if(S.Arguments.length>0){R+=" {"+Rq.vo$(S.Arguments[0]);var $t6;for(dn=0+1,$t6=S.Arguments.length;dn<$t6;dn++){R+=", "+Rq.vo$(S.Arguments[dn])}
R+="} "}
return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var XD={$ClassName:"TTypeParameter",$Parent:Rq,$Init:function($){Rq.$Init($);$.Name="";$.ExtendsType=null},vo:function(S){var R="";R=S.Name;if(S.ExtendsType)R+=" extends "+Rq.vo$(S.ExtendsType);return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var f6={$ClassName:"TTypeOfType",$Parent:oV,$Init:function($){oV.$Init($);$.Type=null},SI:function(S){var R="";R="type of";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo:oV.vo,SI$:function($){return $.ClassType.SI($)}};var lz={$ClassName:"TTypeArgument",$Parent:Rq,$Init:function($){Rq.$Init($);$.Type=null},vo:function(S){var R="";if(S.Type){R=Rq.vo$(S.Type)}else R="Variant";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var fn={$ClassName:"TTypeAlias",$Parent:xN,$Init:function($){xN.$Init($);$.Type=null;$.TypeParameters=[]},vo:function(S){var R="";R=Rq.aY(S.ClassType)+S.Name+" = "+Rq.vo$(S.Type)+";"+"\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var ex={$ClassName:"TTupleType",$Parent:LI,$Init:function($){LI.$Init($);$.Types=[]},vo:function(S){var R="";R="TupletType";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var OC={$ClassName:"TStringType",$Parent:QD,$Init:function($){QD.$Init($)},SI:function(S){var R="";R="String";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo:QD.vo,SI$:function($){return $.ClassType.SI($)}};var nr={$ClassName:"TCustomTypeMember",$Parent:xN,$Init:function($){xN.$Init($);$.TypeParameters=[];$.Visibility=0;$.IsStatic=false;$.TypeArguments=[]},s7:function(S,zm){Rq.s7(S,zm);S.Visibility=0;return S},Destroy:TObject.Destroy,s7$:function($){return $.ClassType.s7.apply($.ClassType,arguments)},vo:Rq.vo};var Mi={$ClassName:"TClassTypeMember",$Parent:nr,$Init:function($){nr.$Init($);$.Visibility=0;$.IsStatic=false},Destroy:TObject.Destroy,s7:nr.s7,vo:Rq.vo};var zi={$ClassName:"TPropertyMemberDeclaration",$Parent:Mi,$Init:function($){Mi.$Init($);$.Nullable=false;$.Type=null},vo:function(S){var R="";var Yc=0;var G2=null;R=Rq.aY(S.ClassType)+o3(S.Name);if(S.TypeArguments.length>0){var l9=[];R+="{<";l9=S.TypeArguments;var $t7;for(Yc=0,$t7=l9.length;Yc<$t7;Yc++){G2=l9[Yc];R+=Rq.vo$(G2)}
R+=">}"}
R+=": ";if(S.Type){if($Is(S.Type,Oy))R+="record"+"\r\n";R+=Rq.vo$(S.Type)}else R+="Variant";R+=";";if(S.Nullable)R+=" \/\/ nullable";R+="\r\n";return R},Destroy:TObject.Destroy,s7:nr.s7,vo$:function($){return $.ClassType.vo($)}};var zB={$ClassName:"TParameter",$Parent:xN,$Init:function($){xN.$Init($);$.DefaultValue="";$.IsRest=$.IsOptional=false;$.AccessibilityModifier=0;$.Type=null},vo:function(S){var R="";R=S.Name+": ";if(S.Type){if($Is(S.Type,Oy))R+="record"+"\r\n";R+=Rq.vo$(S.Type)}else R+="Variant";if(S.DefaultValue!="")R+=" = "+S.DefaultValue;if(S.IsRest)R+=" {...}";return R},GC:function(S,eR){var R="";var vv=null;R=o3(S.Name);if(!eR){R+=": ";if(S.Type){if($Is(S.Type,Oy))R+="record"+"\r\n";if($Is(S.Type,JC)){vv=$As(S.Type,JC).ResultType;R+=(vv)?"function":"procedure"}
R+=Rq.vo$(S.Type)}else R+="Variant"}
return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var Oy={$ClassName:"TObjectType",$Parent:LI,$Init:function($){LI.$Init($);$.Members=[]},vo:function(S){var R="";var UG=0;var Nk=null,SP=null;var zj=[];Rq.J6(S.ClassType);zj=S.Members;var $t8;for(UG=0,$t8=zj.length;UG<$t8;UG++){Nk=zj[UG];if($Is(Nk,NR)){R+=Rq.aY(S.ClassType);SP=$As(Nk,NR).Type;R+=(SP)?"function":"procedure";R+=Rq.vo$(Nk)+"\r\n"}else R+=Rq.vo$(Nk)}
Rq.r7(S.ClassType);R+=Rq.aY(S.ClassType)+"end;";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var yb={$ClassName:"TNamespaceDeclaration",$Parent:xN,$Init:function($){xN.$Init($)},Destroy:TObject.Destroy,s7:Rq.s7,vo:Rq.vo};var FR={$ClassName:"TNamedType",$Parent:oV,$Init:function($){oV.$Init($);$.Arguments=[];$.nb=""},GD:function(S,kp,dv){Rq.s7(S,kp);S.nb=dv;return S},vo:function(S){var R="";var d2=0;var FV=null;R=oV.vo(S);if(S.Arguments.length>0){var Ah=[];R+="{<";Ah=S.Arguments;var $t9;for(d2=0,$t9=Ah.length;d2<$t9;d2++){FV=Ah[d2];R+=Rq.vo$(FV)}
R+=">}"}
return R},SI:function(S){var R="";R=S.nb;return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)},SI$:function($){return $.ClassType.SI($)}};var Vy={$ClassName:"TModuleDeclaration",$Parent:xN,$Init:function($){xN.$Init($);$.Modules=[];$.Variables=[];$.Exports=[];$.Functions=[];$.Interfaces=[];$.Classes=[]},vo:function(S){var R="";var cq=0;var V4=null,Kn=0;var Pa=null,kB=0;var pw=null;R="";if(S.Classes.length+S.Interfaces.length>0){var NV=[],Rb=[];R+="type"+"\r\n";Rq.J6(S.ClassType);Rb=S.Classes;var $tA;for(cq=0,$tA=Rb.length;cq<$tA;cq++){V4=Rb[cq];R=R+Rq.vo$(V4)}
NV=S.Interfaces;var $tB;for(Kn=0,$tB=NV.length;Kn<$tB;Kn++){Pa=NV[Kn];R=R+Rq.vo$(Pa)}
Rq.r7(S.ClassType)}
if(S.Variables.length>0){var oK=[];R+="var"+"\r\n";Rq.J6(S.ClassType);oK=S.Variables;var $tC;for(kB=0,$tC=oK.length;kB<$tC;kB++){pw=oK[kB];R=R+Rq.vo$(pw)}
Rq.r7(S.ClassType)}
return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var Ne={$ClassName:"TMethodDeclaration",$Parent:Mi,$Init:function($){Mi.$Init($);$.CallSignature=null},vo:function(S){var R="";var oy="";var Bi="";var aX=0,zJ=0;var If=null,p6=0;var Ml=[];aX=0;Ml=S.CallSignature.ParameterList;var $tD;for(zJ=0,$tD=Ml.length;zJ<$tD;zJ++){If=Ml[zJ];if(If.IsOptional)++aX}
oy=Rq.aY(S.ClassType);oy+=(S.CallSignature.Type)?"function":"procedure";oy+=" "+S.Name;Bi=(aX>0)?" overload;":"";Bi+="\r\n";R="";var $tE;for(p6=0,$tE=aX;p6<=$tE;p6++){R+=oy+NR.N6(S.CallSignature,p6)+Bi}
return R},Destroy:TObject.Destroy,s7:nr.s7,vo$:function($){return $.ClassType.vo($)}};var gM={$ClassName:"TInterfaceDeclaration",$Parent:Rq,$Init:function($){Rq.$Init($);$.TypeParameters=[];$.Name="";$.Extends=[];$.Type=null},vo:function(S){var R="";var xI=0;var wT=null,GV=0;R+=Rq.aY(S.ClassType)+"J"+S.Name;if(S.TypeParameters.length>0){var nj=[];R+="{<";nj=S.TypeParameters;var $tF;for(xI=0,$tF=nj.length;xI<$tF;xI++){wT=nj[xI];R+=Rq.vo$(wT)}
R+=">}"}
R+=" = class external";if(S.Extends.length>0){R+="(";R+=Rq.vo$(S.Extends[0]);var $tG;for(GV=0+1,$tG=S.Extends.length;GV<$tG;GV++){R+=", "+Rq.vo$(S.Extends[GV])}
R+=")"}
R+="\r\n";R+=Rq.vo$(S.Type);R+="\r\n"+"\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var KE={$ClassName:"TIndexSignature",$Parent:nr,$Init:function($){nr.$Init($);$.IsStringIndex=false;$.Type=null},vo:function(S){var R="";R=Rq.aY(S.ClassType)+"\/\/ ";R+="property Item["+S.Name+": ";R+=(S.IsStringIndex)?"String":"Integer";R+="]: "+Rq.vo$(S.Type)+";"+"\r\n";return R},Destroy:TObject.Destroy,s7:nr.s7,vo$:function($){return $.ClassType.vo($)}};var w2={$ClassName:"TIndexMemberDeclaration",$Parent:Mi,$Init:function($){Mi.$Init($);$.IndexSignature=null},vo:function(S){var R="";R=Rq.vo$(S.IndexSignature)+";"+"\r\n";return R},Destroy:TObject.Destroy,s7:nr.s7,vo$:function($){return $.ClassType.vo($)}};var vs={$ClassName:"TImportDeclaration",$Parent:xN,$Init:function($){xN.$Init($)},vo:function(S){var R="";console.log("not implemented: TImportDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var JC={$ClassName:"TFunctionType",$Parent:oV,$Init:function($){oV.$Init($);$.ParameterList=[];$.ResultType=null},vo:function(S){var R="";var EM=0;if(S.ParameterList.length>0){R="("+Ry.gv(S.ParameterList[0],false);var $tH;for(EM=0+1,$tH=S.ParameterList.length;EM<$tH;EM++){R+="; "+Ry.gv(S.ParameterList[EM],false)}
R+=")"}
if(S.ResultType)R+=": "+Rq.vo$(S.ResultType);return R},VX:function(S,QV){var R="";var Ao=false;var pT=0,Kw=0;pT=0;if(S.ParameterList.length>0){if(!(S.ParameterList[0].IsOptional&&QV==0)){pT+=(S.ParameterList[0].IsOptional?1:0);Ao=S.ParameterList.length>=2&&Xh(S.ParameterList[0],S.ParameterList[1])&&((!S.ParameterList[0].IsOptional)||pT<QV);R="("+Ry.gv(S.ParameterList[0],Ao);var $tI;for(Kw=0+1,$tI=S.ParameterList.length;Kw<$tI;Kw++){if(S.ParameterList[Kw].IsOptional&&pT>=QV)break;pT+=(S.ParameterList[Kw].IsOptional?1:0);R+=(Ao)?", ":"; ";Ao=Kw+1<S.ParameterList.length&&Xh(S.ParameterList[0],S.ParameterList[1])&&((!S.ParameterList[Kw].IsOptional)||pT<QV);R+=Ry.gv(S.ParameterList[Kw],Ao)}
R+=")"}}
if(S.ResultType)R+=": "+Rq.vo$(S.ResultType);return R},SI:function(S){var R="";R="function";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)},SI$:function($){return $.ClassType.SI($)}};var Ry={$ClassName:"TFunctionParameter",$Parent:xN,$Init:function($){xN.$Init($);$.Type=null;$.IsOptional=false},vo:function(S){var R="";R=o3(S.Name)+": ";if(S.Type){if($Is(S.Type,Oy))R+="record"+"\r\n";R+=Rq.vo$(S.Type)}else R+="Variant";return R},gv:function(S,Q8){var R="";R=o3(S.Name);if(!Q8){R+=": ";if(S.Type){if($Is(S.Type,Oy))R+="record"+"\r\n";R+=Rq.vo$(S.Type)}else R+="Variant"}
return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var Y6={$ClassName:"TFunctionDeclaration",$Parent:xN,$Init:function($){xN.$Init($);$.Type=null},vo:function(S){var R="";var xQ="";var x1="";var TG=0,L1=0;var hf=null,RY=0;var D3=[];TG=0;D3=S.Type.ParameterList;var $tJ;for(L1=0,$tJ=D3.length;L1<$tJ;L1++){hf=D3[L1];if(hf.IsOptional)++TG}
xQ=Rq.aY(S.ClassType);xQ+=(S.Type.ResultType)?"function":"procedure";xQ+=" "+S.Name;x1=";"+((TG>0)?" overload;":"");x1+="\r\n";R="";var $tK;for(RY=0,$tK=TG;RY<=$tK;RY++){R+=xQ+JC.VX(S.Type,RY)+x1}
return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var A1={$ClassName:"TFloatType",$Parent:QD,$Init:function($){QD.$Init($)},SI:function(S){var R="";R="Float";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo:QD.vo,SI$:function($){return $.ClassType.SI($)}};var Cr={$ClassName:"TExportDeclaration",$Parent:xN,$Init:function($){xN.$Init($);$.Nv=false},vo:function(S){var R="";R="";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var hp={$ClassName:"TEnumerationItem",$Parent:Rq,$Init:function($){Rq.$Init($);$.Name=$.Value=""},vo:function(S){var R="";R=S.Name;return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var TS={$ClassName:"TEnumerationDeclaration",$Parent:xN,$Init:function($){xN.$Init($);$.Items=[]},vo:function(S){var R="";var GL=0;var sZ=null;var bs=[];R+=Rq.aY(S.ClassType)+"T"+S.Name+" = Variant;"+"\r\n";R+=Rq.aY(S.ClassType)+"T"+S.Name+"Helper = strict helper for T"+S.Name+"\r\n";Rq.J6(S.ClassType);bs=S.Items;var $tL;for(GL=0,$tL=bs.length;GL<$tL;GL++){sZ=bs[GL];R+=Rq.aY(S.ClassType)+"const "+o3(Rq.vo$(sZ));if(sZ.Value!=""){try{R+=" = "+(parseInt(sZ.Value,10)).toString()+";"+"\r\n"}catch($e){R+=" = '"+sZ.Value+"';"+"\r\n"}}else R+=" = '"+sZ.Name+"';"+"\r\n"}
Rq.r7(S.ClassType);R+=Rq.aY(S.ClassType)+"end;"+"\r\n";R+="\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var ZL={$ClassName:"TDefinitionDeclaration",$Parent:xN,$Init:function($){xN.$Init($)},vo:function(S){var R="";console.log("not implemented: TDefinitionDeclaration.GetAsCode");return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var Lb={$ClassName:"TConstructorType",$Parent:oV,$Init:function($){oV.$Init($);$.ResultType=null;$.ParameterList=[]},vo:function(S){var R="";var J8=0;if(S.ParameterList.length>0){R="("+Ry.gv(S.ParameterList[0],false);var $tM;for(J8=0+1,$tM=S.ParameterList.length;J8<$tM;J8++){R+="; "+Ry.gv(S.ParameterList[J8],false)}
R+=")"}
if(S.ResultType)R+=": "+Rq.vo$(S.ResultType);return R},SI:function(S){var R="";R="constructor";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)},SI$:function($){return $.ClassType.SI($)}};var ai={$ClassName:"TConstructorDeclaration",$Parent:Mi,$Init:function($){Mi.$Init($);$.ParameterList=[];$.Type=null},vo:function(S){var R="";R=Rq.aY(S.ClassType)+"constructor Create";if(S.Type)R+=Rq.vo$(S.Type);R+=";"+"\r\n";return R},Destroy:TObject.Destroy,s7:nr.s7,vo$:function($){return $.ClassType.vo($)}};var EF={$ClassName:"TClassDeclaration",$Parent:gM,$Init:function($){gM.$Init($);$.Implements=[];$.Members=[]},vo:function(S){var R="";var Zv=0;var qq=0;var Ny=null;var aU=[];R+=Rq.aY(S.ClassType)+"J"+S.Name+" = class external '"+S.Name+"'";if(S.Extends.length>0){R+="(";R+=Rq.vo$(S.Extends[0]);var $tN;for(Zv=0+1,$tN=S.Extends.length;Zv<$tN;Zv++){R+=", "+Rq.vo$(S.Extends[Zv])}
R+=")"}
R+="\r\n";Rq.J6(S.ClassType);aU=S.Members;var $tO;for(qq=0,$tO=aU.length;qq<$tO;qq++){Ny=aU[qq];R+=Rq.vo$(Ny)}
Rq.r7(S.ClassType);R+=Rq.aY(S.ClassType)+"end;"+"\r\n"+"\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var NR={$ClassName:"TCallSignature",$Parent:nr,$Init:function($){nr.$Init($);$.ParameterList=[];$.Type=null;$.TypeParameters=[]},vo:function(S){var R="";var L7=0;var Dw=null,Ey=0;R="";if(S.TypeParameters.length>0){var hV=[];R+="{<";hV=S.TypeParameters;var $tP;for(L7=0,$tP=hV.length;L7<$tP;L7++){Dw=hV[L7];R+=Rq.vo$(Dw)}
R+=">}"}
if(S.ParameterList.length>0){R+="(";var $tQ;for(Ey=0,$tQ=(S.ParameterList.length-1);Ey<$tQ;Ey++){R+=zB.GC(S.ParameterList[Ey],false)+"; "}
R+=zB.GC(S.ParameterList[(S.ParameterList.length-1)],false)+")"}
if(S.Type)R+=": "+Rq.vo$(S.Type);R+=";";return R},N6:function(S,g5){var R="";var Cl=false;var MG=0,da=0;MG=0;if(S.ParameterList.length>0){if(!(S.ParameterList[0].IsOptional&&g5==0)){MG+=(S.ParameterList[0].IsOptional?1:0);Cl=S.ParameterList.length>=2&&Tx(S.ParameterList[0],S.ParameterList[1])&&((!S.ParameterList[0].IsOptional)||MG<g5);R="("+zB.GC(S.ParameterList[0],Cl);var $tR;for(da=0+1,$tR=S.ParameterList.length;da<$tR;da++){if(S.ParameterList[da].IsOptional&&MG>=g5)break;MG+=(S.ParameterList[da].IsOptional?1:0);R+=(Cl)?", ":"; ";Cl=da+1<S.ParameterList.length&&Tx(S.ParameterList[da],S.ParameterList[da+1])&&((!S.ParameterList[da].IsOptional)||MG<g5);R+=zB.GC(S.ParameterList[da],Cl)}
R+=")"}}
if(S.Type)R+=": "+Rq.vo$(S.Type);return R},Destroy:TObject.Destroy,s7:nr.s7,vo$:function($){return $.ClassType.vo($)}};var OX={$ClassName:"TBooleanType",$Parent:QD,$Init:function($){QD.$Init($)},SI:function(S){var R="";R="Boolean";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo:QD.vo,SI$:function($){return $.ClassType.SI($)}};var Cu={$ClassName:"TArrayType",$Parent:LI,$Init:function($){LI.$Init($);$.Type=null},vo:function(S){var R="";R="array of "+Rq.vo$(S.Type);return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var l2={$ClassName:"TAmbientVariableDeclaration",$Parent:Rq,$Init:function($){Rq.$Init($);$.IsConst=false;$.AmbientBindingList=[]},vo:function(S){var R="";var cO=0;var FC=null;var qN=[];qN=S.AmbientBindingList;var $tS;for(cO=0,$tS=qN.length;cO<$tS;cO++){FC=qN[cO];R+=Rq.aY(S.ClassType)+Rq.vo$(FC)}
R+=";"+"\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var OY={$ClassName:"TAmbientBodyElement",$Parent:Rq,$Init:function($){Rq.$Init($)},Destroy:TObject.Destroy,s7:Rq.s7,vo:Rq.vo};var sr={$ClassName:"TAmbientPropertyMemberDeclaration",$Parent:OY,$Init:function($){OY.$Init($);$.Visibility=0;$.IsStatic=false;$.Name=""},Destroy:TObject.Destroy,s7:Rq.s7,vo:Rq.vo};var ye={$ClassName:"TAmbientPropertyMemberDeclarationProperty",$Parent:sr,$Init:function($){sr.$Init($);$.Type=null},vo:function(S){var R="";R=Rq.aY(S.ClassType);if(S.IsStatic)R+="class var ";R+=o3(S.Name);R+=": "+((S.Type)?Rq.vo$(S.Type):"Variant");R+=";"+"\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var kM={$ClassName:"TAmbientPropertyMemberDeclarationMethod",$Parent:sr,$Init:function($){sr.$Init($);$.CallSignature=null},vo:function(S){var R="";var Db="";var EE="";var Jq=0,hd=0;var pS=null,Lv=0;var tJ=[];Jq=0;tJ=S.CallSignature.ParameterList;var $tT;for(hd=0,$tT=tJ.length;hd<$tT;hd++){pS=tJ[hd];if(pS.IsOptional)++Jq}
Db=Rq.aY(S.ClassType);Db+=(S.CallSignature.Type)?"function":"procedure";Db+=" "+o3(S.Name);EE=(Jq>0)?" overload;":"";EE+="\r\n";R="";var $tU;for(Lv=0,$tU=Jq;Lv<=$tU;Lv++){R+=Db+NR.N6(S.CallSignature,Lv)+EE}
return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var em={$ClassName:"TAmbientModuleDeclaration",$Parent:Rq,$Init:function($){Rq.$Init($);$.Interfaces=[];$.Modules=[];$.Classes=[];$.Functions=[];$.TypeAliases=[];$.IdentifierPath="";$.Enums=[];$.Variables=[]},vo:function(S){var R="";var aj=0,OZ=0;var fi=null,nB=0;var r1=null,sk=0;var jf=null,IG=0;var BI=null,G6=0;var TQ=null,fW=0;var qG=null,Cz=0;var Fb=null,HY=0;var BO=null,OP=0;var fB=null;var cI=[],BJ=[];R="\/\/"+S.IdentifierPath+"\r\n"+"\r\n";aj=0;BJ=S.Variables;var $tV;for(OZ=0,$tV=BJ.length;OZ<$tV;OZ++){fi=BJ[OZ];if(fi.IsConst)++aj}
if(aj>0){var FH=[];R+="const"+"\r\n";Rq.J6(S.ClassType);FH=S.Variables;var $tW;for(nB=0,$tW=FH.length;nB<$tW;nB++){r1=FH[nB];if(r1.IsConst)R=R+Rq.vo$(r1)}
Rq.r7(S.ClassType);R+="\r\n"}
if(S.Enums.length+S.Classes.length+S.Interfaces.length>0){var Yu=[],NN=[],Ky=[],jA=[];R+="type"+"\r\n";Rq.J6(S.ClassType);NN=S.Enums;var $tX;for(sk=0,$tX=NN.length;sk<$tX;sk++){jf=NN[sk];R+=Rq.vo$(jf)}
Yu=S.Classes;var $tY;for(IG=0,$tY=Yu.length;IG<$tY;IG++){BI=Yu[IG];R+=Rq.vo$(BI)}
jA=S.Interfaces;var $tZ;for(G6=0,$tZ=jA.length;G6<$tZ;G6++){TQ=jA[G6];R+=Rq.vo$(TQ)}
Ky=S.TypeAliases;var $ta;for(fW=0,$ta=Ky.length;fW<$ta;fW++){qG=Ky[fW];R+=Rq.vo$(qG)}
Rq.r7(S.ClassType)}
cI=S.Modules;var $tb;for(Cz=0,$tb=cI.length;Cz<$tb;Cz++){Fb=cI[Cz];R+=Rq.vo$(Fb)}
if(S.Functions.length>0){var GJ=[];GJ=S.Functions;var $tc;for(HY=0,$tc=GJ.length;HY<$tc;HY++){BO=GJ[HY];R+=Rq.vo$(BO)}
R+="\r\n"}
if(S.Variables.length-aj>0){var Za=[];R+="var"+"\r\n";Rq.J6(S.ClassType);Za=S.Variables;var $td;for(OP=0,$td=Za.length;OP<$td;OP++){fB=Za[OP];if(!fB.IsConst)R=R+Rq.vo$(fB)}
Rq.r7(S.ClassType);R+="\r\n"}
R+="\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var MS={$ClassName:"TAmbientFunctionDeclaration",$Parent:xN,$Init:function($){xN.$Init($);$.CallSignature=null},vo:function(S){var R="";var v6="";var iX="";var dY=0,Gi=0;var rT=null,nN=0;var Y5=[];dY=0;Y5=S.CallSignature.ParameterList;var $te;for(Gi=0,$te=Y5.length;Gi<$te;Gi++){rT=Y5[Gi];if(rT.IsOptional)++dY}
v6=Rq.aY(S.ClassType);v6+=(S.CallSignature.Type)?"function":"procedure";v6+=" "+S.Name;iX=(dY>0)?" overload;":"";iX+="\r\n";R="";var $tf;for(nN=0,$tf=dY;nN<=$tf;nN++){R+=v6+NR.N6(S.CallSignature,nN)+iX}
return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var dw={$ClassName:"TAmbientDeclaration",$Parent:xN,$Init:function($){xN.$Init($);$.Variables=[];$.Namespaces=[];$.Modules=[];$.Classes=[];$.Functions=[];$.Enums=[]},vo:function(S){var R="";var pV=0;var av=null,zd=0;var tb=null,ma=0;var wN=null,QW=0;var S3=null;var dj=[],PA=[],s4=[];s4=S.Functions;var $tg;for(pV=0,$tg=s4.length;pV<$tg;pV++){av=s4[pV];R+=Rq.vo$(av)}
PA=S.Modules;var $th;for(zd=0,$th=PA.length;zd<$th;zd++){tb=PA[zd];R+=Rq.vo$(tb)}
if(S.Classes.length>0){var hk=[];R+="type"+"\r\n";Rq.J6(S.ClassType);hk=S.Classes;var $ti;for(ma=0,$ti=hk.length;ma<$ti;ma++){wN=hk[ma];R=R+Rq.vo$(wN)}
Rq.r7(S.ClassType)}
if(S.Variables.length>0){dj=S.Variables;var $tj;for(QW=0,$tj=dj.length;QW<$tj;QW++){S3=dj[QW];R=R+Rq.vo$(S3)}}
return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var Mm={$ClassName:"TAmbientConstructorDeclaration",$Parent:OY,$Init:function($){OY.$Init($);$.ParameterList=[]},vo:function(S){var R="";var EV=0;R=Rq.aY(S.ClassType)+"constructor Create";if(S.ParameterList.length>0){R+="(";var $tk;for(EV=0,$tk=(S.ParameterList.length-1);EV<$tk;EV++){R+=Ry.gv(S.ParameterList[EV],false)+"; "}
R+=Ry.gv(S.ParameterList[(S.ParameterList.length-1)],false)+")";R+=")"}
R+=";"+"\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var dR={$ClassName:"TAmbientClassDeclaration",$Parent:Rq,$Init:function($){Rq.$Init($);$.Members=[];$.Name="";$.Extends=[];$.Implements=[]},vo:function(S){var R="";var Bw=0;var z5=0,K2=0;var PO=null,jk=0;var Qv=[];R+=Rq.aY(S.ClassType)+"J"+S.Name+" = class external '"+S.Name+"'";if(S.Extends.length>0){R+="(";R+=Rq.vo$(S.Extends[0]);var $tl;for(Bw=0+1,$tl=S.Extends.length;Bw<$tl;Bw++){R+=", "+Rq.vo$(S.Extends[Bw])}
R+=")"}
R+="\r\n";z5=0;Rq.J6(S.ClassType);Qv=S.Members;var $tm;for(K2=0,$tm=Qv.length;K2<$tm;K2++){PO=Qv[K2];jk=($Is(PO,sr))?$As(PO,sr).Visibility:0;if(z5!=jk){Rq.r7(S.ClassType);R+=Rq.aY(S.ClassType);switch(jk){case 0:R+="public"+"\r\n";break;case 1:R+="protected"+"\r\n";break;case 2:R+="private"+"\r\n";break}
Rq.J6(S.ClassType);z5=jk}
R+=Rq.vo$(PO)}
Rq.r7(S.ClassType);R+=Rq.aY(S.ClassType)+"end;"+"\r\n"+"\r\n";return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var CY={$ClassName:"TAmbientBinding",$Parent:xN,$Init:function($){xN.$Init($);$.Type=null},vo:function(S){var R="";R=S.Name+": "+Rq.vo$(S.Type);return R},Destroy:TObject.Destroy,s7:Rq.s7,vo$:function($){return $.ClassType.vo($)}};var Qd=["amPublic","amPrivate","amProtected"];function Tx(uj,my){var R=false;R=(!(uj.Type!==null)!=!(uj.Type!==null));if(R&&(uj.Type!==null))R=Rq.vo$(uj.Type)==Rq.vo$(my.Type);return R};function Xh(fV,Tn){var R=false;R=(!(fV.Type!==null)!=!(fV.Type!==null));if(R&&(fV.Type!==null))R=Rq.vo$(fV.Type)==Rq.vo$(Tn.Type);return R};function o3(Z1){var R="";R=Z1;if((["abstract","class","const","constructor","default","div","end","export","external","function","interface","label","object","private","property","protected","public","string","type","uses"].indexOf((Z1).toLowerCase())>=0))R="&"+R;if((["length","include","exclude"].indexOf((Z1).toLowerCase())>=0))R="_"+R;return R};var Z=null;var Z=require("typescript");var Nm=0;var U=[],wQ="",D7="",KH=null;var KH=gH();U=process.argv;U.splice(0,2);if(U.length==0){return"Usage: ts2pas inputfile [outputfile]"}
wQ=U[0];D7=U[0]+".pas";if(U.length==2)D7=U[1];P2(wQ,D7);
